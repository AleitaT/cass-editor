<!DOCTYPE html>

<html>

<head>
	<meta charset="utf-8" />
	<title>Highlight Competencies via postMessage</title>
</head>

<body>
	<header>
		<h3>Highlight Competencies via postMessage</h3>
		<button id="selectButton" class="greenButton" style="float: left;">Highlight</button>
	</header>
	<div id="iframe-wrapper">
		<iframe id="iframe" width="100%" height="800" frameborder="0"></iframe>
		<script>
			document.getElementsByTagName("iframe")[0].setAttribute("src", "../index.html?select=&frameworkId=https://sandbox.credentialengineregistry.org/resources/ce-b454a3b4-ae5f-4e41-9ce1-f4b4f1776a79&origin=" + window.location.origin);

		</script>
	</div>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script>
		$("#selectButton").click(function() {
			$("iframe")[0].contentWindow.postMessage({
				"message": "highlightedCompetencies",
				"competencies": ["https://army.mil/task/081-833-0197", "https://army.mil/task/081-835-3010", "https://army.mil/task/081-833-0007"]
			}, window.location.origin);
		});

		var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
		var eventer = window[eventMethod];
		var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";

		eventer(messageEvent, function(e) {}, false);

	</script>
</body>

</html>
