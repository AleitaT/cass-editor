(function(e){function t(t){for(var a,o,i=t[0],c=t[1],l=t[2],p=0,h=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(h.length)h.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/cass-editor/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0164":function(e,t,r){},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},1844:function(e,t,r){},1865:function(e,t,r){"use strict";var a=r("91cc"),n=r.n(a);n.a},"1f05":function(e,t,r){},2:function(e,t){},"217e":function(e,t,r){"use strict";var a=r("1844"),n=r.n(a);n.a},"2a6f":function(e,t,r){},"2cc3":function(e,t,r){},3:function(e,t){},3305:function(e,t,r){},"3dfd":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"has-background-white",attrs:{id:"app"}},[r("cass-modal"),r("nav",{staticClass:"navbar is-black is-fixed-top",attrs:{role:"navigation","aria-label":"main navigation"}},[r("div",{staticClass:"navbar-brand"},[r("div",{staticClass:"navbar-item"},[r("router-link",{attrs:{to:"/"}},[r("h2",{staticClass:"has-text-white subtitle"},[e._v("\n                        Cass Editor\n                    ")])])],1),r("a",{staticClass:"navbar-burger burger",class:{"is-active":e.navBarActive},attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"mainDropDown"},on:{click:function(t){e.navBarActive=!e.navBarActive}}},[r("span",{attrs:{"aria-hidden":"true"}}),r("span",{attrs:{"aria-hidden":"true"}}),r("span",{attrs:{"aria-hidden":"true"}})])]),r("div",{staticClass:"navbar-menu"},[r("div",{staticClass:"navbar-start"},[r("div",{staticClass:"navbar-item"},[r("a",{staticClass:"has-text-light",on:{click:e.createNew}},[e._v("\n                        New\n                    ")])]),r("div",{staticClass:"navbar-item"},[r("router-link",{staticClass:"has-text-light",class:{"is-active":"/"===e.currentRoute},attrs:{to:"/"}},[e._v("\n                        Open\n                    ")])],1),r("div",{staticClass:"navbar-item"},[r("router-link",{staticClass:"has-text-light",class:{"is-active":"/import"===e.currentRoute},attrs:{to:"/import"}},[e._v("\n                        Import\n                    ")])],1),"framework"==e.$route.name||"conceptScheme"==e.$route.name?r("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[r("a",{staticClass:"navbar-link is-primary"},[e._v("\n                        Export\n                    ")]),r("div",{staticClass:"navbar-dropdown"},["true"!==e.queryParams.concepts?r("a",{staticClass:"navbar-item",on:{click:function(t){e.exportType="asn"}}},[e._v("\n                            Achievement Standards Network (RDF+JSON)\n                        ")]):e._e(),r("a",{staticClass:"navbar-item",on:{click:function(t){e.exportType="jsonld"}}},[e._v("\n                            CaSS (JSON-LD)\n                        ")]),r("a",{staticClass:"navbar-item",on:{click:function(t){e.exportType="rdfQuads"}}},[e._v("\n                            CaSS (RDF Quads)\n                        ")]),r("a",{staticClass:"navbar-item",on:{click:function(t){e.exportType="rdfJson"}}},[e._v("\n                            CaSS (RDF+JSON)\n                        ")]),r("a",{staticClass:"navbar-item",on:{click:function(t){e.exportType="rdfXml"}}},[e._v("\n                            CaSS (RDF+XML)\n                        ")]),r("a",{staticClass:"navbar-item",on:{click:function(t){e.exportType="turtle"}}},[e._v("\n                            CaSS (Turtle)\n                        ")]),r("a",{staticClass:"navbar-item",on:{click:function(t){e.exportType="ctdlasnJsonld"}}},[e._v("\n                            Credential Engine ASN (JSON-LD)\n                        ")]),"true"!==e.queryParams.concepts?r("a",{staticClass:"navbar-item",on:{click:function(t){e.exportType="ctdlasnCsv"}}},[e._v("\n                            Credential Engine ASN (CSV)\n                        ")]):e._e(),"true"!==e.queryParams.concepts?r("a",{staticClass:"navbar-item",on:{click:function(t){e.exportType="csv"}}},[e._v("\n                            Table (CSV)\n                        ")]):e._e(),"true"!==e.queryParams.concepts?r("a",{staticClass:"navbar-item",on:{click:function(t){e.exportType="case"}}},[e._v("\n                            IMS Global CASE (JSON)\n                        ")]):e._e()])]):e._e()]),r("div",{staticClass:"navbar-end"})]),r("div",{staticClass:"navbar-menu is-dark is-hoverable",class:{"is-active":e.navBarActive},attrs:{id:"mainDropDown"}},[r("div",{staticClass:"navbar-end"},[r("div",{staticClass:"navbar-item has-dropdown is-hidden-desktop",class:{"is-active":e.navBarActive}},[r("div",[r("div",{staticClass:"navbar-item"},[r("a",{on:{click:e.createNew}},[e._v("\n                                New\n                            ")])]),r("div",{staticClass:"navbar-item"},[r("router-link",{class:{"is-active":"/"===e.currentRoute},attrs:{to:"/"}},[e._v("\n                                Open\n                            ")])],1),r("div",{staticClass:"navbar-item"},[r("router-link",{class:{"is-active":"/import"===e.currentRoute},attrs:{to:"/import"}},[e._v("\n                                Import\n                            ")])],1),r("div",{staticClass:"navbar-item"},[r("router-link",{class:{"is-active":"/help"===e.currentRoute},attrs:{to:"/help"}},[e._v("\n                                Help\n                            ")])],1)])])])])]),r("router-view",{attrs:{exportType:e.exportType,queryParams:e.queryParams}})],1)},n=[],s=(r("f559"),r("a481"),r("7f7f"),r("aef6"),r("872c")),o=(r("dc82"),{data:function(){return{navBarActive:!1,exportType:null,queryParams:null,repo:window.repo,itemsSaving:0}},mixins:[s["a"]],$router:function(e,t){e.path!==t.path&&(this.navBarActive=!1)},created:function(){var e=["https://dev.cassproject.org/api/"],t=this;this.$route.query&&(this.queryParams=this.$route.query,this.queryParams.server&&(this.queryParams.server.endsWith&&!1===this.queryParams.server.endsWith("/")&&(this.queryParams.server+="/"),e=[this.queryParams.server]));for(var r=0;r<e.length;r++){var a=new EcRepository;a.selectedServer=e[r],a.autoDetectRepository(),e[r]=a,window.repo=a;try{window.addEventListener("message",this.cappend,!1)}catch(s){console.error(s)}this.openWebSocket(a)}window.addEventListener?window.addEventListener("message",this.messageListener,!1):window.attachEvent("onmessage",this.messageListener),this.loadIdentity((function(){t.queryParams&&(t.queryParams.frameworkId&&("true"===t.queryParams.concepts?EcConceptScheme.get(t.queryParams.frameworkId,(function(e){t.$store.commit("framework",e),t.$router.push({name:"conceptScheme",params:{frameworkId:t.queryParams.frameworkId}})}),console.error):EcFramework.get(t.queryParams.frameworkId,(function(e){t.$store.commit("framework",e),t.$router.push({name:"framework",params:{frameworkId:t.queryParams.frameworkId}})}),console.error)),"import"===t.queryParams.action&&t.$router.push({name:"import"}),"add"===t.queryParams.action&&t.createNew())}));var n="&iframeRoot="+(this.queryParams.editorRoot?this.queryParams.editorRoot:"");n+="&origin="+window.location.origin,n+=this.queryParams.server?"&server="+this.queryParams.server:"",n+=this.queryParams.newObjectEndpoint?"&newObjectEndpoint="+this.queryParams.newObjectEndpoint:"",n+=this.queryParams.ceasnDataFields?"&ceasnDataFields="+this.queryParams.ceasnDataFields:"",n+=this.queryParams.webSocketOverride?"&webSocketOverride="+this.queryParams.webSocketOverride:"",n+=this.queryParams.inherit?"&inherit="+this.queryParams.inherit:"",n+=this.queryParams.css?"&css="+this.queryParams.css:"",n+=this.queryParams.selectVerbose?"&selectVerbose="+this.queryParams.selectVerbose:"",n+=this.queryParams.selectExport?"&selectExport="+this.queryParams.selectExport:"",n+=this.queryParams.user?"&user="+this.queryParams.user:"",this.$store.commit("commonPathIframe",n),n=this.queryParams.editorRoot?this.queryParams.editorRoot:"/",n+="cass-editor/?select=Align with...&view=true&back=true",n+=this.$store.state.editor.commonPathIframe,this.$store.commit("iframeCompetencyPathInterframework",n),n=this.queryParams.editorRoot?this.queryParams.editorRoot:"/",n+="cass-editor/?select=Add&concepts=true",n+=this.queryParams.conceptShow?"&conceptShow="+this.queryParams.conceptShow:"",n+="true"!==this.queryParams.editIframe?"&view=true":"",n+=this.$store.state.editor.commonPathIframe,this.$store.commit("iframeConceptPath",n)},methods:{cappend:function(e){if("selected"===e.data.message){for(var t=[],r=0;r<e.data.selected.length;r++)e.data.selected[r]["ceasn:exactAlignment"]?t.push(e.data.selected[r]["ceasn:exactAlignment"]):e.data.selected[r]["@id"]?t.push(e.data.selected[r]["@id"]):t.push(e.data.selected[r]);if(console.log("I got "+e.data.selected.length+" selected items from the iframe"),console.log(e.data.selected),"true"===this.queryParams.concepts&&"Concept"===e.data.type&&this.$store.state.editor.selectCompetencyRelation)this.addAlignments(t,selectedCompetency,this.$store.state.editor.selectCompetencyRelation);else if("Concept"===e.data.type)this.attachUrlProperties(t);else if(!0===this.$store.state.editor.selectingCompetencies&&"https://schema.cassproject.org/0.4/Level"!==this.$store.state.editor.selectCompetencyRelation){var a=t,n=this.$store.state.editor.selectedCompetency,s=this.$store.state.editor.selectCompetencyRelation;this.addAlignments(a,n,s)}else t.length>0?this.showModal("copyOrLink",t):e.data.selected.length<=0&&alert("No items have been selected.")}else if("back"===e.data.message)this.$router.push({name:"framework",params:{frameworkId:this.$store.state.editor.framework.id}});else if("highlightedCompetencies"===e.data.message){if(!e.data.competencies)return;this.queryParams.highlightCompetency=e.data.competencies}else"select"===e.data.message&&"framework"===this.$route.name&&this.queryParams.select&&this.select()},openWebSocket:function(e){var t,r=this;t=null==this.queryParams.webSocketOverride||void 0===this.queryParams.webSocketOverride?new WebSocket(e.selectedServer.replace(/http/,"ws").replace(/api\//,"ws/custom")):new WebSocket(this.queryParams.webSocketOverride),t.onopen=function(){console.log("WebSocket open.")},t.onerror=function(e){console.log(e)},t.onclose=function(t){console.log(t),r.$store.commit("webSocketBackoffIncrease"),setTimeout((function(){r.openWebSocket(e)}),webSocketBackoff)},t.changedObject=function(e){if("framework"===r.$route.name){var t=r.$store.state.editor.framework;if(((new ConceptScheme).isA(e.getFullType())||"ConceptScheme"===e["encryptedType"])&&null!=t&&t.shortId()===e.shortId()){var a=new ConceptScheme;"ConceptScheme"===e["encryptedType"]?a=r.decrypt(e,a):a.copyFrom(e),r.$store.commit("framework",a),r.spitEvent("frameworkChanged",a.shortId())}if(((new EcFramework).isA(e.getFullType())||"Framework"===e["encryptedType"])&&null!=t&&t.shortId()===e.shortId()){a=new EcFramework;"Framework"===e["encryptedType"]?a=r.decrypt(e,a):a.copyFrom(e),r.$store.commit("framework",a),r.spitEvent("frameworkChanged",a.shortId())}if(((new Concept).isA(e.getFullType())||"Concept"===e["encryptedType"])&&null!=t&&null!=r.$store.state.editor.selectedCompetency){if(r.$store.state.editor.selectedCompetency.shortId()===e.shortId()){var n=new EcConcept;"Concept"===e["encryptedType"]?n=r.decrypt(e,n):n.copyFrom(e),r.$store.commit("selectedCompetency",n)}r.spitEvent("competencyChanged",r.$store.state.editor.selectedCompetency.shortId())}if(((new EcCompetency).isA(e.getFullType())||"Competency"===e["encryptedType"])&&null!=t&&null!=r.$store.state.editor.selectedCompetency){if(r.$store.state.editor.selectedCompetency.shortId()===e.shortId()){n=new EcCompetency;"Competency"===e["encryptedType"]?n=r.decrypt(e,n):n.copyFrom(e),r.$store.commit("selectedCompetency",n)}r.spitEvent("competencyChanged",r.$store.state.editor.selectedCompetency.shortId())}if(((new EcLevel).isA(e.getFullType())||"Level"===e["encryptedType"])&&null!=t&&null!=r.$store.state.editor.selectedCompetency){if(r.$store.state.editor.selectedCompetency.shortId()===e.shortId()){n=new EcLevel;"Level"===e["encryptedType"]?n=r.decrypt(e,n):n.copyFrom(e),r.$store.commit("selectedCompetency",n)}r.spitEvent("competencyChanged",r.$store.state.editor.selectedCompetency.shortId())}}},t.onmessage=function(e){var a=e.data;if(console.log("Server: "+a),!EcArray.isArray(a)&&a.startsWith("[")&&(a=JSON.parse(a)),EcArray.isArray(a)){for(var n=0;n<a.length;n++)delete EcRepository.cache[a[n]],delete EcRepository.cache[EcRemoteLinkedData.trimVersionFromUrl(a[n])];if(null==r.$store.state.editor.framework)return;r.repo.precache(a,(function(){for(var e=0;e<a.length;e++)EcRepository.get(a[e],t.changedObject,console.error)}))}else{if(delete EcRepository.cache[a],delete EcRepository.cache[EcRemoteLinkedData.trimVersionFromUrl(a)],null==r.$store.state.editor.framework)return;EcRepository.get(a,t.changedObject,console.error)}}},decrypt:function(e,t){var r=new EcEncryptedValue;return r.copyFrom(e),t.copyFrom(r.decryptIntoObject()),t},createNew:function(){this.setDefaultLanguage();var e=this;if("true"!==this.queryParams.concepts){var t=new EcFramework;null!=this.queryParams.newObjectEndpoint?t.generateShortId(this.repo.newObjectEndpoint):t.generateId(this.repo.selectedServer),t["schema:dateCreated"]=(new Date).toISOString(),EcIdentityManager.ids.length>0&&t.addOwner(EcIdentityManager.ids[0].ppk.toPk()),t.name={"@language":this.$store.state.editor.defaultLanguage,"@value":"New Framework"};var r=t;"true"===this.queryParams.private&&(r=EcEncryptedValue.toEncryptedValue(t)),this.repo.saveTo(r,(function(){e.$store.commit("framework",t),"framework"!==e.$route.name&&e.$router.push({name:"framework"})}),console.error)}else{t=new EcConceptScheme;null!=this.queryParams.newObjectEndpoint?t.generateShortId(newObjectEndpoint):t.generateId(this.repo.selectedServer),EcIdentityManager.ids.length>0&&t.addOwner(EcIdentityManager.ids[0].ppk.toPk()),t["dcterms:title"]={"@language":this.$store.state.editor.defaultLanguage,"@value":"New Concept Scheme"},t["schema:dateCreated"]=(new Date).toISOString();r=t;"true"===this.queryParams.private&&(r=EcEncryptedValue.toEncryptedValue(t)),this.repo.saveTo(r,(function(){e.$store.commit("framework",t),"conceptScheme"!==e.$route.name&&e.$router.push({name:"conceptScheme"})}),console.error)}},addAlignments:function(e,t,r,a){if("true"===this.queryParams.concepts)return this.addConceptAlignments(e,t,r);if("ceasn:skillEmbodied"===r||"ceasn:abilityEmbodied"===r||"ceasn:knowledgeEmbodied"===r||"ceasn:taskEmbodied"===r)return this.addRelationAsCompetencyField(e,t,r,a);for(var n=0;n<e.length;n++){var s=new EcAlignment;if(null!=this.queryParams.newObjectEndpoint?s.generateShortId(this.newObjectEndpoint):s.generateId(this.repo.selectedServer),s["schema:dateCreated"]=(new Date).toISOString(),s.target=EcRemoteLinkedData.trimVersionFromUrl(e[n]),s.source=t.shortId(),s.target===s.source)return;if(s.relationType=r,"broadens"===s.relationType){var o=s.target;s.target=s.source,s.source=o,s.relationType="narrows"}EcIdentityManager.ids.length>0&&s.addOwner(EcIdentityManager.ids[0].ppk.toPk()),!0===this.$store.state.editor.private&&(s=EcEncryptedValue.toEncryptedValue(s)),this.repo.saveTo(s,(function(){}),console.error);var i=this.$store.state.editor.framework;if("Concept"===t.type){null==i.relation&&(i.relation=[]);var c=!0,l=0;while(c&&l<i.relation.length)EcRemoteLinkedData.trimVersionFromUrl(i.relation[l]).equals(s.id)&&(c=!1),l++;c&&i.relation.push(s.id)}else i.addRelation(s.id)}this.$store.commit("framework",i),!0===this.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[i.id]&&(i=EcEncryptedValue.toEncryptedValue(i)),this.repo.saveTo(i,(function(){}),console.error)},loadIdentity:function(e){var t;if("self"===this.queryParams.user)EcIdentityManager.readIdentities(),EcIdentityManager.readContacts(),0===EcIdentityManager.ids.length?EcPpk.generateKeyAsync((function(r){t=new EcIdentity,t.ppk=r,t.displayName="You",EcIdentityManager.onIdentityChanged=EcIdentityManager.saveIdentities,EcIdentityManager.addIdentity(t),e()})):e();else if("wait"===this.queryParams.user){var r=function(r){var a=r.data;if(null==a||""===a||EcObject.isObject(a)||(a=JSON.parse(a)),"identity"===a.action){t=new EcIdentity,t.ppk=EcPpk.fromPem(a.identity),t.displayName="You",EcIdentityManager.addIdentity(t),e();var n={action:"response",message:"identityOk"};console.log(n),parent.postMessage(n,this.queryParams.origin)}};window.addEventListener?window.addEventListener("message",r,!1):window.attachEvent("onmessage",r);var a={message:"waiting"};console.log(a),parent.postMessage(a,this.queryParams.origin)}else e()},messageListener:function(e){var t=e.data,r=this;if(null!=t&&""!==t&&!EcObject.isObject(t))try{t=JSON.parse(t)}catch(h){}if(null!=t&&""!==t)if("template"===t.action){null!=t.framework&&(EcFramework.template=this.removeNewlines(t.framework)),null!=t.competency&&(EcCompetency.template=this.removeNewlines(t.competency)),null!=t.conceptScheme&&(EcConceptScheme.template=this.removeNewlines(t.conceptScheme)),null!=t.concept&&(EcConcept.template=this.removeNewlines(t.concept));var a={action:"response",message:"templateOk"};console.log(a),parent.postMessage(a,this.queryParams.origin)}else if("set"===t.action){if(null!=t.id)var n=EcRepository.getBlocking(t.id);for(var s in delete t.id,delete t.action,t)n[s]=t[s];repo.saveTo(n,(function(e){(n.isAny((new EcFramework).getTypes())||n.isAny((new EcConceptScheme).getTypes()))&&r.$route.name;var t={action:"response",message:"setOk"};console.log(t),parent.postMessage(t,r.queryParams.origin)}),(function(e){var t={action:"response",message:"setFail"};console.log(t),parent.postMessage(t,r.queryParams.origin)}))}else if("export"===t.action){var o,i,c,l=t.schema,d=this.$store.state.editor.framework;if(null!=this.$store.state.editor.selectedCompetency){var p=this.$store.state.editor.selectedCompetency;!1===EcRepository.shouldTryUrl(p.id)?(o=this.repo.selectedServer+"data/"+EcCrypto.md5(p.id),i=this.repo.selectedServer+"data/"+EcCrypto.md5(d.id),c=EcCrypto.md5(p.id)):(o=p.id,i=d.id,c=p.getGuid())}else!1===EcRepository.shouldTryUrl(d.id)?(o=this.repo.selectedServer+"data/"+EcCrypto.md5(d.id),i=this.repo.selectedServer+"data/"+EcCrypto.md5(d.id),c=EcCrypto.md5(d.id)):(o=d.id,i=d.id,c=d.getGuid());"asn"===l?this.get(i.replace("/data/","/asn/"),null,null,(function(e){var t=JSON.parse(e);parent.postMessage({action:"response",message:"export",schema:"asn",format:"rdf+json",data:t},r.queryParams.origin)})):"cass"===l?this.get(o,null,null,(function(e){var t=JSON.parse(e);parent.postMessage({action:"response",message:"export",schema:"cass",format:"application/ld+json",data:t},r.queryParams.origin)})):"cassn4"===l?this.get(o,null,{Accept:"text/n4"},(function(e){var t=JSON.parse(e);parent.postMessage({action:"response",message:"export",schema:"cass",format:"text/n4",data:t},r.queryParams.origin)}),(function(e){console.log(e)})):"cassrdfjson"===l?this.get(o,null,{Accept:"application/rdf+json"},(function(e){var t=JSON.parse(e);parent.postMessage({action:"response",message:"export",schema:"cass",format:"application/rdf+json",data:t},r.queryParams.origin)}),(function(e){console.log(e)})):"cassrdfxml"===l?this.get(o,null,{Accept:"application/rdf+xml"},(function(e){var t=JSON.parse(e);parent.postMessage({action:"response",message:"export",schema:"cass",format:"application/rdf+xml",data:t},r.queryParams.origin)}),(function(e){console.log(e)})):"cassturtle"===l?this.get(o,null,{Accept:"text/turtle"},(function(e){var t=JSON.parse(e);parent.postMessage({action:"response",message:"export",schema:"cass",format:"text/turtle",data:t},r.queryParams.origin)}),(function(e){console.log(e)})):"ceasn"===l||"ctdlasn"===l?this.get(i.replace("/data/","/ceasn/"),null,null,(function(e){var t=JSON.parse(e);parent.postMessage({action:"response",message:"export",schema:l,format:"application/ld+json",data:t},r.queryParams.origin)})):"case"===l&&(null==p?this.get(this.repo.selectedServer+"ims/case/v1p0/CFDocuments/"+c,null,null,(function(e){var t=JSON.parse(e);parent.postMessage({action:"response",message:"export",schema:"case",format:"application/json",data:t},r.queryParams.origin)}),(function(e){console.log(e)})):this.get(this.repo.selectedServer+"ims/case/v1p0/CFItems/"+c,null,null,(function(e){var t=JSON.parse(e);parent.postMessage({action:"response",message:"export",schema:"case",format:"application/json",data:t},r.queryParams.origin)}),(function(e){console.log(e)})))}},removeNewlines:function(e){if(null!=e["@owner"])for(var t=0;t<e["@owner"].length;t++){var r=e["@owner"][t];e["@owner"][t]=EcPk.fromPem(r).toPem()}if(null!=e["@reader"])for(t=0;t<e["@reader"].length;t++){r=e["@reader"][t];e["@reader"][t]=EcPk.fromPem(r).toPem()}return e},attachUrlProperties:function(e){var t=this.$store.state.editor.framework;null!=this.$store.state.editor.selectedCompetency&&(t=this.$store.state.editor.selectedCompetency);for(var r=0;r<e.length;r++){var a=EcRepository.getBlocking(e[r]);a.isAny((new EcConcept).getTypes())&&(EcArray.isArray(t[this.$store.state.editor.selectCompetencyRelation])||(t[this.$store.state.editor.selectCompetencyRelation]=[]),EcArray.setAdd(t[this.$store.state.editor.selectCompetencyRelation],a.shortId()))}t["schema:dateModified"]=(new Date).toISOString(),"true"===this.queryParams.private&&!0!==EcEncryptedValue.encryptOnSaveMap[t.id]&&(t=EcEncryptedValue.toEncryptedValue(t)),this.repo.saveTo(t,(function(){}),console.error)},showModal:function(e,t){var r=this,a={};"copyOrLink"===e&&(a={type:e,title:"Copy or Link",text:"Do you want to copy or link to the selected items?",options:["Copy","Link"],onConfirm:function(e){return r.copyOrLink(e,t)}}),this.$modal.show(a)},copyOrLink:function(e,t){"Copy"===e?this.copyCompetencies(t):this.appendCompetencies(t,!0)},copyCompetencies:function(e){for(var t={},r=this.$store.state.editor.framework,a=this,n=0;n<e.length;n++){var s=EcRepository.getBlocking(e[n]);if(null!=s&&s.isAny((new EcCompetency).getTypes())){var o=new EcCompetency;o.copyFrom(s),null!=this.queryParams.newObjectEndpoint?o.generateShortId(this.queryParams.newObjectEndpoint):o.generateId(this.repo.selectedServer),o["schema:dateCreated"]=(new Date).toISOString(),delete o.owner,EcIdentityManager.ids.length>0&&o.addOwner(EcIdentityManager.ids[0].ppk.toPk()),o["ceasn:derivedFrom"]=s.id,t[o["ceasn:derivedFrom"]]=o,"true"===this.queryParams.private&&!0!==EcEncryptedValue.encryptOnSaveMap[o.id]&&(o=EcEncryptedValue.toEncryptedValue(o)),this.itemsSaving++,function(e){Task.asyncImmediate((function(t){a.repo.saveTo(e,(function(){r.addCompetency(e.id),a.$store.commit("framework",r),a.afterCopy(),t()}),(function(e){console.error(e),a.afterCopy(),t()}))}))}(o)}else if(null!=s&&s.isAny((new EcLevel).getTypes())){var i=new EcLevel;i.copyFrom(s),null!=this.queryParams.newObjectEndpoint?i.generateShortId(this.queryParams.newObjectEndpoint):i.generateId(this.repo.selectedServer),i["schema:dateCreated"]=(new Date).toISOString(),i.competency=this.$store.state.editor.selectedCompetency.shortId(),delete i.owner,EcIdentityManager.ids.length>0&&i.addOwner(EcIdentityManager.ids[0].ppk.toPk()),i["ceasn:derivedFrom"]=s.id,t[i["ceasn:derivedFrom"]]=i,"true"===this.queryParams.private&&!0!==EcEncryptedValue.encryptOnSaveMap[i.id]&&(i=EcEncryptedValue.toEncryptedValue(i)),this.itemsSaving++,function(e){Task.asyncImmediate((function(t){a.repo.saveTo(e,(function(){r.addLevel(e.id),a.$store.commit("framework",r),a.afterCopy(),t()}),(function(e){console.error(e),a.afterCopy(),t()}))}))}(i)}}for(n=0;n<e.length;n++){s=EcRepository.getBlocking(e[n]);if(null!=s&&s.isAny((new EcAlignment).getTypes())){var c=t[s.target],l=t[s.source];if("undefined"!==typeof c&&"undefined"!==typeof l){var d=new EcAlignment;d.copyFrom(s),null!=this.queryParams.newObjectEndpoint?d.generateShortId(this.queryParams.newObjectEndpoint):d.generateId(this.repo.selectedServer),d["schema:dateCreated"]=(new Date).toISOString(),d.target=c.shortId(),d.source=l.shortId(),d.relationType=s.relationType,EcIdentityManager.ids.length>0&&d.addOwner(EcIdentityManager.ids[0].ppk.toPk()),d.source!==d.target&&(r["schema:dateModified"]=(new Date).toISOString(),EcArray.setRemove(e,s.source),"true"===this.queryParams.private&&(d=EcEncryptedValue.toEncryptedValue(d)),this.itemsSaving++,function(e){Task.asyncImmediate((function(t){a.repo.saveTo(e,(function(){r.addRelation(e.id),a.$store.commit("framework",r),a.afterCopy(),t()}),(function(e){console.error(e),a.afterCopy(),t()}))}))}(d))}}}var p=this.$store.state.editor.selectedCompetency;for(n=0;n<e.length;n++){s=EcRepository.getBlocking(e[n]);if(null!=s&&s.isAny((new EcCompetency).getTypes())&&null!=p){d=new EcAlignment;null!=this.queryParams.newObjectEndpoint?d.generateShortId(this.queryParams.newObjectEndpoint):d.generateId(this.repo.selectedServer),d["schema:dateCreated"]=(new Date).toISOString();l=t[s.id];d.target=p.shortId(),d.source=l.shortId(),d.relationType=Relation.NARROWS,EcIdentityManager.ids.length>0&&d.addOwner(EcIdentityManager.ids[0].ppk.toPk()),d.source!==d.target&&(this.itemsSaving++,r.addRelation(d.id),r["schema:dateModified"]=(new Date).toISOString(),"true"===this.queryParams.private&&(d=EcEncryptedValue.toEncryptedValue(d)),function(e){Task.asyncImmediate((function(t){a.repo.saveTo(e,(function(){a.afterCopy(),t()}),(function(e){console.error(e),a.afterCopy(),t()}))}))}(d))}}},afterCopy:function(){if(this.itemsSaving--,0===this.itemsSaving){var e=this.$store.state.editor.framework;"true"===this.queryParams.private&&!0!==EcEncryptedValue.encryptOnSaveMap[e.id]&&(e=EcEncryptedValue.toEncryptedValue(e)),this.repo.saveTo(e,(function(){}),console.error)}},appendCompetencies:function(e,t){for(var r=this.$store.state.editor.selectedCompetency,a=this.$store.state.editor.framework,n=this,s=0;s<e.length;s++){var o=EcRepository.getBlocking(e[s]);o.isAny((new EcCompetency).getTypes())?a.addCompetency(o.shortId()):o.isAny((new EcLevel).getTypes())&&(a.addLevel(o.shortId()),EcArray.isArray(o.competency)||(o.competency=[o.competency]),o.competency.push(r.shortId()),this.repo.saveTo(o,(function(){}),console.error))}for(s=0;s<e.length;s++){o=EcRepository.getBlocking(e[s]);o.isAny((new EcAlignment).getTypes())&&EcArray.has(a.competency,o.source)&&EcArray.has(a.competency,o.target)&&(a.addRelation(o.shortId()),EcArray.setRemove(e,o.source))}for(s=0;s<e.length;s++){o=EcRepository.getBlocking(e[s]);if(o.isAny((new EcCompetency).getTypes())&&null!=r){var i=new EcAlignment;null!=this.queryParams.newObjectEndpoint?i.generateShortId(this.queryParams.newObjectEndpoint):i.generateId(this.repo.selectedServer),i["schema:dateCreated"]=(new Date).toISOString(),i.target=r.shortId(),i.source=o.shortId(),i.relationType=Relation.NARROWS,EcIdentityManager.ids.length>0&&i.addOwner(EcIdentityManager.ids[0].ppk.toPk()),i.source!==i.target&&(a.addRelation(i.id),"true"===this.queryParams.private&&(i=EcEncryptedValue.toEncryptedValue(i)),this.repo.saveTo(i,(function(){}),console.error))}}"true"===this.queryParams.private&&!0!==EcEncryptedValue.encryptOnSaveMap[a.id]&&(a=EcEncryptedValue.toEncryptedValue(a)),this.repo.saveTo(a,(function(){n.$store.commit("framework",EcFramework.getBlocking(a.id))}),console.error)},addRelationAsCompetencyField:function(e,t,r,a){for(var n=this,s=this.$store.state.editor.framework,o=0;o<e.length;o++)null==t[r]&&(t[r]=[]),t[r].push(e[o]);"true"===this.queryParams.private&&(!0!==EcEncryptedValue.encryptOnSaveMap[t.id]&&(t=EcEncryptedValue.toEncryptedValue(t)),!0!==EcEncryptedValue.encryptOnSaveMap[s.id]&&(s=EcEncryptedValue.toEncryptedValue(s))),n.repo.saveTo(t,(function(){n.repo.saveTo(s,(function(){}),console.error)}),console.error)}},computed:{currentRoute:function(){return this.$route.path}},watch:{$route:function(e,t){var r=e;r&&(this.navBarActive=!1)}}}),i=o,c=(r("4221"),r("5c64"),r("2877")),l=Object(c["a"])(i,a,n,!1,null,"5402a376",null);t["a"]=l.exports},"3e41":function(e,t,r){e.exports=r.p+"4dc323f4e9610d2aac1ca8b9eeb323e0.csv"},"3e7a":function(e,t,r){e.exports=r.p+"8fc779728526a704c648427e523dbada.csv"},4:function(e,t){},4089:function(e,t,r){},"41cb":function(e,t,a){"use strict";var n=a("2b0e"),s=a("8c4f"),o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"about"},[r("h1",[e._v("This is an about page")])])}],c=a("2877"),l={},d=Object(c["a"])(l,o,i,!1,null,null,null),p=d.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("button",{on:{click:function(t){e.hierarchy=!e.hierarchy}}},[e._v("\n        HIERARCHY CONTROL\n    ")]),r("br"),e.hierarchy?r("Hierarchy",{attrs:{container:e.frameworkActual,containerType:"Framework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"Competency",edgeType:"Relation",edgeRelationProperty:"relationType",edgeSourceProperty:"source",edgeTargetProperty:"target",edgeRelationLiteral:"narrows",repo:e.repo}}):e._e(),r("button",{on:{click:function(t){e.complex=!e.complex}}},[e._v("\n        COMPLEX CONTROL\n    ")]),r("br"),e._e(),e.complex?r("Thing",{attrs:{uri:"https://dev.cassproject.org/api/data/schema.cassproject.org.0.3.Competency/309bbf99-8671-454d-bd94-67ca180029f5/1514482922014"}}):e._e(),r("button",{on:{click:function(t){e.competency=!e.competency}}},[e._v("\n        COMPETENCY SEARCH\n    ")]),r("br"),e.competency?r("List",{attrs:{type:"Competency",profile:e.simpleProfile,repo:e.repo}}):e._e(),r("button",{on:{click:function(t){e.framework=!e.framework}}},[e._v("\n        FRAMEWORK SEARCH\n    ")]),r("br"),e.framework?r("List",{attrs:{type:"Framework",repo:e.repo}}):e._e(),r("button",{on:{click:function(t){e.person=!e.person}}},[e._v("\n        PERSON SEARCH\n    ")]),r("br"),e.person?r("List",{attrs:{type:"Person",repo:e.repo}}):e._e()],1)},m=[],u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"List"},[r("div",{staticClass:"field"},[r("p",{staticClass:"control has-icons-right"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],ref:"text",staticClass:"input is-large",attrs:{placeholder:"Search for "+e.type+"s..."},domProps:{value:e.search},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchRepo(t)},input:function(t){t.target.composing||(e.search=t.target.value)}}}),r("span",{staticClass:"icon is-small is-right",on:{click:e.searchRepo}},[r("i",{staticClass:"fas fa-search"})])])]),r("div",[r("ul",{staticClass:"list-ul"},e._l(e.results,(function(t){return r("li",{key:t.id,on:{click:function(r){return e.click(t)}}},[r("Thing",{attrs:{obj:t,profile:e.profile,parentNotEditable:e.disallowEdits},scopedSlots:e._u([{key:"frameworkTags",fn:function(){return[e._t("frameworkTags",null,{item:t})]},proxy:!0}],null,!0)})],1)})),0),r("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"false"}})])])},g=[],w=(a("386d"),a("dbb9")),v={name:"List",props:{type:String,repo:Object,profile:Object,click:Function,searchOptions:String,paramObj:Object,disallowEdits:Boolean},components:{Thing:w["default"]},created:function(){var e=this;this.$nextTick((function(){return e.searchRepo()}))},data:function(){return{search:"",results:[],busy:!1,start:0}},watch:{text:function(e,t){},paramObj:function(){this.searchRepo()},searchOptions:function(){this.searchRepo()}},methods:{searchRepo:function(){var e=this;this.start=0,this.results.splice(0,this.results.length);var t="(@type:"+this.type+' AND "'+this.search+'")'+this.searchOptions,r=null;this.paramObj&&(r=Object.assign({},this.paramObj)),this.repo.searchWithParams(t,r,(function(t){e.results.push(t)}),(function(e){}),console.error)},loadMore:function(){if(this.paramObj){this.busy=!0;var e=this,t=Object.assign({},this.paramObj);this.start+=this.paramObj.size,t.start=this.start;var r="(@type:"+this.type+' AND "'+this.search+'")'+this.searchOptions;this.repo.searchWithParams(r,t,(function(t){e.results.push(t)}),(function(t){e.busy=!1}),(function(t){console.error(t),e.busy=!1}))}}}},y=v,C=Object(c["a"])(y,u,g,!1,null,null,null),k=C.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"e-Hierarchy"},[e.hierarchy?r("ul",{staticClass:"e-Hierarchy-ul"},[r("draggable",{attrs:{disabled:1!=e.canEdit,group:{name:"test"}},on:{start:e.beginDrag,end:e.endDrag},model:{value:e.hierarchy,callback:function(t){e.hierarchy=t},expression:"hierarchy"}},e._l(e.hierarchy,(function(t){return r("HierarchyNode",{key:t.obj.id,attrs:{obj:t.obj,dragging:e.dragging,canEdit:e.canEdit,hasChild:t.children,profile:e.profile,exportOptions:e.exportOptions,highlightList:e.highlightList,selectMode:e.selectMode,selectAll:e.selectAll,iframePath:e.iframePath,iframeText:e.iframeText},on:{mountingNode:e.handleMountingNode}},[e._t("default")],2)})),1)],1):e._e()])},x=[],E=(a("ac6a"),a("55dd"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"section is-paddingless",class:["e-HierarchyNode",e.editingThingClass],attrs:{id:e.obj.shortId()}},[r("div",{staticClass:"columns is-gapless is-paddingless is-marginless is-mobile is-multiline"},[r("div",{staticClass:"column is-12"},[r("div",{staticClass:"section is-paddingless"},[r("div",{staticClass:"columns is-gapless is-mobile is-marginless is-paddingless is-multiline"},[e.selectMode?r("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.checked)?e._i(e.checked,null)>-1:e.checked},on:{change:function(t){var r=e.checked,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);a.checked?o<0&&(e.checked=r.concat([s])):o>-1&&(e.checked=r.slice(0,o).concat(r.slice(o+1)))}else e.checked=n}}}):e._e(),r("div",{staticClass:"column full-column has-background-light constrain-column"},[r("Thing",{class:e.newThingClass,attrs:{obj:e.obj,parentNotEditable:!e.canEdit,profile:e.profile,childrenExpanded:e.childrenExpanded,children:this.hasChild.length,exportOptions:e.exportOptions,highlightList:e.highlightList,selectMode:e.selectMode,iframePath:e.iframePath,iframeText:e.iframeText},on:{expandEvent:function(t){return e.onExpandEvent()},editingThing:function(t){return e.handleEditingThing(t)},addNode:function(t){return e.onAddNodeEvent()}}},[e._t("default")],2)],1),!e.collapse&&e.hasChild.length>0?r("div",{staticClass:"column is-12 hello"},[r("ul",{class:"e-HierarchyNode-ul"+(1==e.dragging?" dragging":"")},[r("draggable",{attrs:{id:e.obj.shortId(),group:{name:"test"},disabled:1!=e.canEdit},on:{start:e.beginDrag,end:e.endDrag},model:{value:e.hasChild,callback:function(t){e.hasChild=t},expression:"hasChild"}},e._l(e.hasChild,(function(t){return r("HierarchyNode",{key:t.obj.id,attrs:{obj:t.obj,hasChild:t.children,dragging:e.dragging,canEdit:e.canEdit,profile:e.profile,exportOptions:e.exportOptions,highlightList:e.highlightList,selectMode:e.selectMode,selectAll:e.selectAll,iframePath:e.iframePath,iframeText:e.iframeText}},[e._t("default")],2)})),1)],1)]):e._e()])])])])])}),P=[],T=a("310e"),S=a.n(T),_={name:"HierarchyNode",props:{obj:Object,hasChild:Array,canEdit:Boolean,dragging:Boolean,profile:Object,exportOptions:Array,highlightList:Array,selectMode:Boolean,selectAll:Boolean,iframePath:String,iframeText:String},components:{Thing:w["default"],draggable:S.a},data:function(){return{collapse:!1,controlOnStart:!1,checked:!1,editingThingClass:"",childrenExpanded:!0}},computed:{newThingClass:function(){return this.$store.state.editor&&this.obj.shortId()===this.$store.state.editor.newCompetency?"new-thing":""}},mounted:function(){this.$emit("mountingNode")},methods:{handleEditingThing:function(e){this.editingThingClass=e?"editing-thing":""},onAddNodeEvent:function(){this.add(this.obj.shortId())},onExpandEvent:function(){this.collapseIfPossible(),this.childrenExpanded=!this.childrenExpanded},collapseIfPossible:function(){this.hasChild.length>0&&(this.collapse=!this.collapse)},beginDrag:function(e){void 0!==e&&(this.controlOnStart=e.originalEvent.ctrlKey||e.originalEvent.shiftKey);var t=this.$parent;while(null==t.beginDrag)t=t.$parent;t.beginDrag()},endDrag:function(e){console.log(e.oldIndex,e.newIndex);var t=null,r=0;e.from.id===e.to.id?e.newIndex+1<this.hasChild.length&&(t=this.hasChild[e.newIndex+1].obj.shortId()):void 0===e.to.children[e.newIndex]?t=e.to.id:""===e.to.id?e.newIndex<e.to.children.length&&(t=e.to.children[e.newIndex].id):e.newIndex+1<e.to.children.length&&(t=e.to.children[e.newIndex+1].id),this.move(e.clone.id,t,e.from.id,e.to.id,!this.controlOnStart,r)},move:function(e,t,r,a,n,s){var o=this.$parent;while(null==o.move)o=o.$parent;o.move(e,t,r,a,n,s)},add:function(e){var t=this.$parent;while(null==t.add)t=t.$parent;t.add(e)}},watch:{checked:function(){var e=this.$parent;while(null==e.select)e=e.$parent;e.select(this.obj.id,this.checked)},selectAll:function(){this.selectMode&&(this.checked=this.selectAll)}}},I=_,O=Object(c["a"])(I,E,P,!1,null,null,null),A=O.exports,j={name:"Hierarchy",props:{container:Object,containerType:String,containerTypeGet:String,containerNodeProperty:String,containerEdgeProperty:String,nodeType:String,edgeType:String,edgeRelationProperty:String,edgeSourceProperty:String,edgeTargetProperty:String,edgeRelationLiteral:String,editable:Boolean,repo:Object,profile:Object,queryParams:Object,exportOptions:Array,highlightList:Array,selectMode:Boolean,selectAll:Boolean,iframePath:String,iframeText:String},data:function(){return{structure:[],once:!0,dragging:!1,controlOnStart:!1}},components:{HierarchyNode:A,draggable:S.a},watch:{container:{handler:function(){this.once=!0},deep:!0}},computed:{hierarchy:function(){var e=this;if(null==this.container)return null;if(!this.once)return this.structure;console.log("Computing hierarchy.");var t=[];return null!=this.container[this.containerNodeProperty]&&(t=t.concat(this.container[this.containerNodeProperty])),null!=this.container[this.containerEdgeProperty]&&(t=t.concat(this.container[this.containerEdgeProperty])),t.length>0?this.repo.multiget(t,(function(t){e.computeHierarchy()}),console.error,console.log):e.computeHierarchy(),this.structure},canEdit:function(){return!0===this.editable&&this.container.canEditAny(EcIdentityManager.getMyPks())}},methods:{handleMountingNode:function(){this.startTime()},startTime:function(){var e=this;setTimeout((function(){e.$emit("doneLoadingNodes")}),1e3)},computeHierarchy:function(){var e=this,t={},r={};if(this.structure=[],null==this.container)return t;if(null!==this.container[this.containerNodeProperty])for(var a=0;a<this.container[this.containerNodeProperty].length;a++){var n=window[this.nodeType].getBlocking(this.container[this.containerNodeProperty][a]);null!==n&&(t[this.container[this.containerNodeProperty][a]]=t[n.shortId()]=r[n.shortId()]=n)}if(null!=this.container[this.containerEdgeProperty])for(a=0;a<this.container[this.containerEdgeProperty].length;a++){var s=null;if(s=window[this.edgeType].getBlocking(this.container[this.containerEdgeProperty][a]),null!=s){if(s[this.edgeRelationProperty]===this.edgeRelationLiteral){if(null==t[s[this.edgeTargetProperty]])continue;if(null==t[s[this.edgeSourceProperty]])continue;null==t[s[this.edgeTargetProperty]]._children&&(t[s[this.edgeTargetProperty]]._children=[]),t[s[this.edgeTargetProperty]]._children.push(t[s[this.edgeSourceProperty]]),delete r[s[this.edgeSourceProperty]]}}else console.log("Hierarchy: Could not find edge: "+window[this.edgeType].getBlocking(this.container[this.containerEdgeProperty][a]))}if(null!=this.container[this.containerNodeProperty])for(a=0;a<this.container[this.containerNodeProperty].length;a++)null!=t[this.container[this.containerNodeProperty][a]]._children&&t[this.container[this.containerNodeProperty][a]]._children.sort((function(t,r){return e.container[e.containerNodeProperty].indexOf(t.shortId())-e.container[e.containerNodeProperty].indexOf(r.shortId())}));this.structure.splice(0,this.structure.length);var o=EcObject.keys(r);if(null!=this.startingSpotUri)this.structure.push(t[this.startingSpotUri]);else for(a=0;a<o.length;a++)this.structure.push(r[o[a]]);this.structure.sort((function(t,r){return e.container[e.containerNodeProperty].indexOf(t.shortId())-e.container[e.containerNodeProperty].indexOf(r.shortId())})),this.packChildren(this.structure),this.once=!1},packChildren:function(e){if(null!=e){for(var t=0;t<e.length;t++)e[t]={obj:e[t],children:void 0===e[t]._children?[]:e[t]._children},delete e[t].obj._children;for(t=0;t<e.length;t++)this.packChildren(e[t].children)}},beginDrag:function(){this.dragging=!0,void 0!==event&&(this.controlOnStart=event.originalEvent.ctrlKey||event.originalEvent.shiftKey)},endDrag:function(e){console.log(e.oldIndex,e.newIndex);var t=null,r=0;e.from.id===e.to.id?(e.newIndex<this.hierarchy.length&&(t=this.hierarchy[e.newIndex].obj.shortId()),r=1):void 0===e.to.children[e.newIndex]?t=e.to.id:e.newIndex+1<e.to.children.length&&(t=e.to.children[e.newIndex+1].id),this.move(this.hierarchy[e.oldIndex].obj.shortId(),t,e.from.id,e.to.id,!this.controlOnStart,r)},move:function(e,t,r,a,n,s){if(this.once=!0,e!==t){var o=this.container[this.containerNodeProperty].indexOf(e);console.log(o),this.container[this.containerNodeProperty].splice(o,1);var i=null;i=null==t||void 0===t?-1:this.container[this.containerNodeProperty].indexOf(t),console.log(i),s>0&&o<=i&&(i+=s),s<0&&o<i&&(i+=s),-1===i?this.container[this.containerNodeProperty].push(e):this.container[this.containerNodeProperty].splice(i,0,e)}if(r!==a){if(!0===n)for(var c=0;c<this.container[this.containerEdgeProperty].length;c++){var l=window[this.edgeType].getBlocking(this.container[this.containerEdgeProperty][c]);if(null!=l&&l[this.edgeRelationProperty]===this.edgeRelationLiteral){if(null==l[this.edgeTargetProperty])continue;if(null==l[this.edgeSourceProperty])continue;if(l[this.edgeSourceProperty]!==e)continue;console.log("Identified edge to remove: ",JSON.parse(l.toJson())),this.container[this.containerEdgeProperty].splice(c--,1)}}if(null!=a&&""!==a){l=new window[this.edgeType];null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&l.addOwner(EcIdentityManager.ids[0].ppk.toPk());var d=window[this.nodeType].getBlocking(e),p=window[this.nodeType].getBlocking(a);l.assignId(this.repo.selectedServer,EcCrypto.md5(d.shortId())+"_"+this.edgeRelationLiteral+"_"+EcCrypto.md5(p.shortId())),l.source=d.shortId(),l.target=p.shortId(),l.relationType=this.edgeRelationLiteral,this.container[this.containerEdgeProperty].push(l.shortId()),console.log("Added edge: ",JSON.parse(l.toJson())),this.repo.saveTo(l,console.log,console.error)}}this.repo.saveTo(this.stripEmptyArrays(this.container),console.log,console.error),this.dragging=!1},add:function(e){var t=this,r=new window[this.nodeType];if(this.queryParams&&null!=this.queryParams.newObjectEndpoint?r.generateShortId(this.queryParams.newObjectEndpoint):r.generateId(this.repo.selectedServer),null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&r.addOwner(EcIdentityManager.ids[0].ppk.toPk()),EcArray.isArray(t.container[t.containerNodeProperty])||(t.container[t.containerNodeProperty]=[]),this.container[this.containerNodeProperty].push(r.shortId()),this.$store.state.editor&&this.$store.state.editor.defaultLanguage){var a=this.nodeType;0===this.nodeType.indexOf("Ec")&&(a=this.nodeType.substring(2)),r.name={"@language":this.$store.state.editor.defaultLanguage,"@value":"New "+a},r["schema:dateCreated"]=(new Date).toISOString(),!0===this.$store.state.editor.private&&(r=EcEncryptedValue.toEncryptedValue(r)),this.container["schema:dateModified"]=(new Date).toISOString()}console.log("Added node: ",JSON.parse(r.toJson())),this.$store.state.editor&&this.$store.commit("newCompetency",r.shortId()),this.repo.saveTo(r,(function(){if(e===t.container.shortId()){var a=t.container;t.$store.state.editor&&!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap(t.container.id)&&(a=EcEncryptedValue.toEncryptedValue(t.container)),t.repo.saveTo(t.stripEmptyArrays(a),(function(){t.once=!0}),console.error)}else window[t.nodeType].get(r.id,(function(r){var a=new window[t.edgeType];null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&a.addOwner(EcIdentityManager.ids[0].ppk.toPk());var n=r,s=window[t.nodeType].getBlocking(e);a.assignId(t.repo.selectedServer,EcCrypto.md5(n.shortId())+"_"+t.edgeRelationLiteral+"_"+EcCrypto.md5(s.shortId())),a.source=n.shortId(),a.target=s.shortId(),a.relationType=t.edgeRelationLiteral,EcArray.isArray(t.container[t.containerEdgeProperty])||(t.container[t.containerEdgeProperty]=[]),t.container[t.containerEdgeProperty].push(a.shortId()),console.log("Added edge: ",JSON.parse(a.toJson()));var o=t.container;t.$store.state.editor&&!0===t.$store.state.editor.private&&(a=EcEncryptedValue.toEncryptedValue(a),!0!==EcEncryptedValue.encryptOnSaveMap(t.container.id)&&(o=EcEncryptedValue.toEncryptedValue(t.container))),t.repo.saveTo(a,console.log,console.error),t.repo.saveTo(t.stripEmptyArrays(o),(function(){t.once=!0}),console.error)}),console.error)}),console.error)},stripEmptyArrays:function(e){if(EcArray.isArray(e)){if(0===e.length)return null;for(var t=0;t<e.length;t++)e[t]=this.stripEmptyArrays(e[t]),null==e[t]&&e.splice(t--,1)}else if(EcObject.isObject(e))for(var r in e){var a=this.stripEmptyArrays(e[r]);null==a&&delete e[r]}return e}}},L=j,N=Object(c["a"])(L,b,x,!1,null,null,null),F=N.exports,R={name:"Test",data:function(){return{repo:null,complex:!1,competency:!1,framework:!1,hierarchy:!1,person:!1,frameworkActual:null,simpleProfile:{"http://schema.org/name":{"@id":"http://schema.org/name","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"},{"@id":"http://schema.cassproject.org/0.3/Level"},{"@id":"http://schema.cassproject.org/0.3/RollupRule"},{"@id":"http://schema.cassproject.org/0.3/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Name of the competency."},{"@language":"en","@value":"Name of the level."},{"@language":"en","@value":"Name of the competency framework."},{"@language":"en","@value":"Name of the rollup rule."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Competency Text"}]}}}},created:function(){this.repo=new EcRepository,this.repo.selectedServer="https://dev.cassproject.org/api/";var e=this;EcRemote.getExpectingObject(window.location.href,"schema.jsonld",(function(t){jsonld.expand(t,(function(t,r){null==t?e.$store.commit("schemaFallback",r[0]["@graph"]):console.error(t)}))}),console.error),EcRemote.getExpectingObject(window.location.href,"ctdl.json",(function(t){jsonld.expand(t,(function(t,r){null==t?e.$store.commit("schemaFallback",r):console.error(t)}))}),console.error),EcRemote.getExpectingObject(window.location.href,"ctdlasn.json",(function(t){jsonld.expand(t,(function(t,r){null==t?e.$store.commit("schemaFallback",r):console.error(t)}))}),console.error),this.frameworkActual=EcFramework.getBlocking("https://dev.cassproject.org/api/data/schema.cassproject.org.0.3.Framework/d1d3f8a5-9687-4e48-92f9-3b0138be66aa")},components:{List:k,Thing:w["default"],Hierarchy:F}},D=R,$=(a("4c4a"),Object(c["a"])(D,h,m,!1,null,"4ac33674",null)),q=$.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-framework-list"},[r("div",{staticClass:"container"},[r("div",{staticClass:"section"},[r("div",{staticClass:"control"},["true"===e.queryParams.concepts?r("label",{staticClass:"radio is-large",attrs:{for:"dcterms:title.keyword"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],attrs:{type:"radio",value:"dcterms:title.keyword",id:"dcterms:title.keyword"},domProps:{checked:e._q(e.sortBy,"dcterms:title.keyword")},on:{change:function(t){e.sortBy="dcterms:title.keyword"}}}),e._v("\n                    Sort alphabetically")]):r("label",{staticClass:"radio",attrs:{for:"name.keyword"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],attrs:{type:"radio",value:"name.keyword",id:"name.keyword"},domProps:{checked:e._q(e.sortBy,"name.keyword")},on:{change:function(t){e.sortBy="name.keyword"}}}),e._v("\n                    Sort alphabetically")]),r("label",{staticClass:"radio",attrs:{for:"schema:dateModified"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],attrs:{type:"radio",value:"schema:dateModified",id:"schema:dateModified"},domProps:{checked:e._q(e.sortBy,"schema:dateModified")},on:{change:function(t){e.sortBy="schema:dateModified"}}}),e._v("\n                    Sort by last modified")])]),r("div",{staticClass:"control"},["mine"!==e.queryParams.show&&"mine"!==e.queryParams.conceptShow&&e.numIdentities?r("div",[r("label",{staticClass:"checkbox",attrs:{for:"showMine"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.showMine,expression:"showMine"}],attrs:{type:"checkbox",value:"true",id:"showMine"},domProps:{checked:Array.isArray(e.showMine)?e._i(e.showMine,"true")>-1:e.showMine},on:{change:function(t){var r=e.showMine,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s="true",o=e._i(r,s);a.checked?o<0&&(e.showMine=r.concat([s])):o>-1&&(e.showMine=r.slice(0,o).concat(r.slice(o+1)))}else e.showMine=n}}}),e._v("\n                        Show only mine")])]):e._e()])]),r("div",{staticClass:"section"},[r("List",{attrs:{type:e.type,repo:e.repo,click:e.frameworkClick,searchOptions:e.searchOptions,paramObj:e.paramObj,disallowEdits:"true"===e.queryParams.view},scopedSlots:e._u([{key:"frameworkTags",fn:function(t){return["true"!==e.queryParams.concepts?r("span",{staticClass:"tag"},[e._v(e._s(t.item.competency.length)+" items ")]):e._e(),t.item.Published?r("span",{staticClass:"tag",attrs:{title:t.item.Published}},[e._v("Published ")]):e._e(),t.item.Approved?r("span",{staticClass:"tag",attrs:{title:t.item.Approved}},[e._v("Approved ")]):e._e(),t.item["schema:dateCreated"]?r("span",{staticClass:"tag",attrs:{title:new Date(t.item["schema:dateCreated"])}},[e._v("\n                        Created "+e._s(e.$moment(t.item["schema:dateCreated"]).fromNow())+"\n                    ")]):e._e(),t.item.getTimestamp()?r("span",{staticClass:"tag",attrs:{title:new Date(t.item.getTimestamp())}},[e._v("\n                        Last modified "+e._s(e.$moment(t.item.getTimestamp()).fromNow())+"\n                    ")]):t.item["schema:dateModified"]?r("span",{staticClass:"tag",attrs:{title:new Date(t.item["schema:dateModified"])}},[e._v("\n                        Last modified "+e._s(e.$moment(t.item["schema:dateModified"]).fromNow())+"\n                    ")]):e._e(),t.item["ceasn:publisherName"]&&e.getName(t.item["ceasn:publisherName"])?r("span",{staticClass:"tag"},[e._v("\n                        "+e._s(e.getName(t.item["ceasn:publisherName"]))+"\n                    ")]):t.item["schema:publisher"]&&e.getName(t.item["schema:publisher"])?r("span",{staticClass:"tag"},[e._v("\n                        "+e._s(e.getName(t.item["schema:publisher"]))+"\n                    ")]):t.item["schema:creator"]&&e.getName(t.item["schema:creator"])?r("span",{staticClass:"tag"},[e._v("\n                        "+e._s(e.getName(t.item["schema:creator"]))+"\n                    ")]):e._e()]}}])})],1)])])},V=[],B=a("872c"),U={name:"Frameworks",props:{queryParams:Object},mixins:[B["a"]],data:function(){return{repo:window.repo,showMine:!1,numIdentities:EcIdentityManager.ids.length,sortBy:null}},created:function(){this.sortBy="true"===this.queryParams.concepts?"dcterms:title.keyword":"name.keyword"},computed:{type:function(){return"true"===this.queryParams.concepts?"ConceptScheme":"Framework"},searchOptions:function(){var e="";if(this.queryParams&&null!=this.queryParams.filter&&(e+=" AND ("+this.queryParams.filter+")"),this.showMine||this.queryParams&&"true"!==this.queryParams.concepts&&"mine"===this.queryParams.show||this.queryParams&&"true"===this.queryParams.concepts&&"mine"===this.queryParams.conceptShow){e+=" AND (";for(var t=0;t<EcIdentityManager.ids.length;t++){0!==t&&(e+=" OR ");var r=EcIdentityManager.ids[t];e+='@owner:"'+r.ppk.toPk().toPem()+'"',e+=' OR @owner:"'+this.addNewlinesToId(r.ppk.toPk().toPem())+'"'}e+=")"}return e},paramObj:function(){var e={size:20},t="name.keyword"===this.sortBy||"dcterms:title.keyword"===this.sortBy?"asc":"desc";return e.sort='[ { "'+this.sortBy+'": {"order" : "'+t+'" , "unmapped_type" : "long",  "missing" : "_last"}} ]',this.queryParams&&("true"!==this.queryParams.concepts&&"mine"===this.queryParams.show||"true"===this.queryParams.concepts&&"mine"===this.queryParams.conceptShow)&&(e.ownership="me"),e}},components:{List:k},methods:{frameworkClick:function(e){var t=this;"true"===this.queryParams.concepts?EcConceptScheme.get(e.id,(function(r){t.$store.commit("framework",r),t.$router.push({name:"conceptScheme",params:{frameworkId:e.id}})}),console.error):EcFramework.get(e.id,(function(r){t.$store.commit("framework",r),t.$router.push({name:"framework",params:{frameworkId:e.id}})}),console.error)},getName:function(e){var t=EcArray.isArray(e)?e:[e];return-1!==Thing.getDisplayStringFrom(t).toLowerCase().indexOf("http")?this.resolveNameFromUrl(Thing.getDisplayStringFrom(t)):Thing.getDisplayStringFrom(t)},addNewlinesToId:function(e){e=e.substring(0,26)+"\n"+e.substring(26);var t=e.length,r=27;while(r+64<t)e=e.substring(0,r+64)+"\n"+e.substring(r+64),r+=65,t++;return e=e.substring(0,t-24)+"\n"+e.substring(t-24),e}}},J=U,z=(a("217e"),Object(c["a"])(J,M,V,!1,null,null,null)),H=z.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-framework"},[r("div",{staticClass:"container"},[r("div",{staticClass:"section is-paddingless"},[r("Thing",{attrs:{obj:e.framework,repo:e.repo,parentNotEditable:"true"===e.queryParams.view,profile:e.frameworkProfile,iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Attach subitems from other sources to the selected item."}}),r("span",{staticClass:"actions"},[e.framework.competency&&1==e.framework.competency.length?r("span",{staticClass:"tag is-info has-text-white"},[e._v("\n                    "+e._s(e.framework.competency.length)+" item\n                ")]):e.framework.competency&&e.framework.competency.length>1?r("span",{staticClass:"tag is-info has-text-white"},[e._v("\n                    "+e._s(e.framework.competency.length)+" items\n                ")]):e._e(),e.timestamp?r("span",{staticClass:"tag is-info has-text-white",attrs:{title:new Date(e.timestamp)}},[e._v("\n                    Last modified "+e._s(e.lastModified)+"\n                ")]):e._e(),e.framework["schema:dateCreated"]?r("span",{staticClass:"tag is-info has-text-white",attrs:{title:new Date(e.framework["schema:dateCreated"])}},[e._v("\n                    Created "+e._s(e.$moment(e.framework["schema:dateCreated"]).fromNow())+"\n                ")]):e._e(),e.framework["Approved"]?r("span",{staticClass:"tag is-info has-text-white",attrs:{title:e.framework["Approved"]}},[e._v("\n                    Approved\n                ")]):e._e(),e.framework["Published"]?r("span",{staticClass:"tag is-info has-text-white",attrs:{title:e.framework["Published"]}},[e._v("Published")]):e._e(),e.selectAllButton?r("button",{on:{click:function(t){e.selectAll=!e.selectAll}}},[e._v("\n                    Select All\n                ")]):e._e(),e.selectButtonText?r("button",{on:{click:e.selectButton}},[e._v("\n                    "+e._s(e.selectButtonText)+"\n                ")]):e._e()]),r("hr"),r("Hierarchy",{attrs:{container:e.framework,containerType:"Framework",containerTypeGet:"EcFramework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",editable:!0!==e.disallowEdits&&"true"!==e.queryParams.view,repo:e.repo,queryParams:e.queryParams,exportOptions:e.competencyExportOptions,highlightList:e.highlightCompetency,selectMode:null!=e.selectButtonText,selectAll:e.selectAll,profile:e.competencyProfile,iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Attach subitems from other sources to the selected item."}})],1)])])},G=[],W=(a("a481"),{methods:{exportAsn:function(e){window.open(e.replace("/data/","/asn/"),"_blank")},exportJsonld:function(e){window.open(e,"_blank")},exportRdfQuads:function(e){var t=this.framework.getName(),r=this;this.get(e,null,{Accept:"text/n4"},(function(e){r.download(t+".n4",e)}),(function(e){console.log(e)}))},exportRdfJson:function(e){var t=this.framework.getName(),r=this;this.get(e,null,{Accept:"application/rdf+json"},(function(e){r.download(t+".rdf.json",e)}),(function(e){console.log(e)}))},exportRdfXml:function(e){var t=this.framework.getName(),r=this;this.get(e,null,{Accept:"application/rdf+xml"},(function(e){r.download(t+".rdf.xml",e)}),(function(e){console.log(e)}))},exportTurtle:function(e){var t=this.framework.getName(),r=this;this.get(e,null,{Accept:"text/turtle"},(function(e){r.download(t+".turtle",e)}),(function(e){console.log(e)}))},exportCtdlasnJsonld:function(e){window.open(e.replace("/data/","/ceasn/"),"_blank")},exportCtdlasnCsv:function(e){var t=this;EcRemote.getExpectingString(e.replace("/data/","/ceasn/"),null,(function(e){CSVExport.exportCTDLASN(JSON.parse(e),t.framework.getName())}),(function(e){console.log(e)}))},exportCsv:function(){CSVExport.exportFramework(this.framework.id,console.log,console.log)},exportCasePackages:function(e){window.open(this.repo.selectedServer+"ims/case/v1p0/CFPackages/"+e,"_blank")},exportCaseItems:function(e){window.open(this.repo.selectedServer+"ims/case/v1p0/CFItems/"+e,"_blank")},download:function(e,t){var r=new Blob([t],{type:"text/plain;charset=utf-8"});saveAs(r,e)}}}),X={methods:{removeObject:function(e){console.log("removing "+e.id);var t=this;this.framework["schema:dateModified"]=(new Date).toISOString(),this.framework.removeCompetency(e.shortId(),(function(){var e=t.framework;!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[f.id]&&(e=EcEncryptedValue.toEncryptedValue(e)),repo.saveTo(e,(function(){t.confirmDialog=!1,t.$store.commit("framework",t.framework)}),console.error)}),console.log)},deleteObject:function(e){console.log("deleting "+e.id);var t=this;if(e.shortId()===this.framework.shortId()){var r=this.framework;this.repo.deleteRegistered(r,(function(e){if(t.spitEvent("frameworkDeleted",r.shortId(),"editFrameworkSection"),null!=r.competency)for(var a=0;a<r.competency.length;a++)t.conditionalDelete(r.competency[a]);if(null!=r.relation)for(a=0;a<r.relation.length;a++)t.conditionalDelete(r.relation[a]);if(null!=r.level)for(a=0;a<r.level.length;a++)t.conditionalDelete(r.level[a]);t.$store.commit("framework",null),t.$router.push({name:"frameworks"})}),console.log)}else this.$store.commit("selectedCompetency",e),this.framework["schema:dateModified"]=(new Date).toISOString(),this.framework.removeCompetency(e.shortId(),(function(){t.framework.removeLevel(e.shortId()),t.conditionalDelete(e.shortId()),t.spitEvent("competencyDeleted",e.shortId(),"editFrameworkSection"),t.$store.commit("selectedCompetency",null);var r=t.framework;!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[t.framework.id]&&(r=EcEncryptedValue.toEncryptedValue(r)),t.repo.saveTo(r,(function(){t.$store.commit("framework",t.framework)}),console.error)}),console.log)}}},Q={computed:{ctdlAsnFrameworkProfile:function(){return{"http://schema.org/name":{"@id":"http://schema.org/name","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://www.w3.org/2000/01/rdf-schema#langString"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Name of the competency framework."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"name"}]},"http://schema.org/description":{"@id":"http://schema.org/description","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://www.w3.org/2000/01/rdf-schema#langString"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Description of the framework."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"description"}]}}},ctdlAsnCompetencyProfile:function(){var e=this;return{"https://purl.org/ctdlasn/terms/competencyLabel":{"@id":"https://purl.org/ctdlasn/terms/competencyLabel","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://www.w3.org/2000/01/rdf-schema#langString"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Short identifying phrase or name applied to a competency by the creator of the competency framework."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Competency Label"}],thingKey:"ceasn:competencyLabel"},"http://schema.org/name":{"@id":"https://purl.org/ctdlasn/terms/competencyText","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://www.w3.org/2000/01/rdf-schema#langString"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The text of the competency. One per language."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Competency Text"}]},"http://schema.org/description":{"@id":"https://purl.org/ctdlasn/terms/comment","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://www.w3.org/2000/01/rdf-schema#langString"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Supplemental text provided by the promulgating body that clarifies the nature, scope or use of this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Comment"}]},"http://purl.org/dc/terms/type":{"@id":"https://purl.org/ctdlasn/terms/competencyCategory","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://www.w3.org/2000/01/rdf-schema#langString"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The textual label identifying the category of the competency as designated by the promulgating body. One label per line. One label per language."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Competency Category"}],thingKey:"dcterms:type"},"https://purl.org/ctdlasn/terms/educationLevelType":{"@id":"https://purl.org/ctdlasn/terms/educationLevelType","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"A general statement describing the education or training context. Alternatively, a more specific statement of the location of the audience in terms of its progression \n                                through an education or training context."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Education Level"}],thingKey:"ceasn:educationLevelType",iframePath:e.$store.state.editor.iframeConceptPath,iframeText:"Select concepts to attach..."},"https://purl.org/ctdlasn/terms/listId":{"@id":"https://purl.org/ctdlasn/terms/listID","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"An alphanumeric string indicating this competency's position in a list of competencies at the same level in some arbitrary hierarchy."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"List ID"}],thingKey:"ceasn:listID"},"https://purl.org/ctdlasn/terms/codedNotation":{"@id":"https://purl.org/ctdlasn/terms/codedNotation","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"An alphanumeric notation or ID code identifying this competency in common use among end-users."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Coded Notation"}],thingKey:"ceasn:codedNotation"},"https://purl.org/ctdlasn/terms/derivedFrom":{"@id":"https://purl.org/ctdlasn/terms/derivedFrom","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The URI of a competency from which this competency has been derived. For example: https://credentialengineregistry.org/, https://eduworks.com, https://case.georgiastandards.org/.  One entity per line."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Derivative Of"}],thingKey:"ceasn:derivedFrom"},"http://schema.org/identifier":{"@id":"https://purl.org/ctdlasn/terms/identifier","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"An alternative URI by which this competency framework or competency is identified. For example, https://sandbox.credentialengineregistry.org/. One URI per line."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Identifier"}]},"http://schema.org/keywords":{"@id":"https://purl.org/ctdlasn/terms/conceptKeyword","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://www.w3.org/2000/01/rdf-schema#langString"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"A word or phrase used by the promulgating agency to refine and differentiate individual competencies contextually. One concept per line."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Concept Keyword"}]},"https://purl.org/ctdlasn/terms/conceptTerm":{"@id":"https://purl.org/ctdlasn/terms/conceptTerm","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"A term drawn from a controlled vocabulary used by the promulgating agency to refine and differentiate individual resources contextually."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Concept Term"}],thingKey:"ceasn:conceptTerm",iframePath:e.$store.state.editor.iframeConceptPath,iframeText:"Select concepts to attach..."},"https://purl.org/ctdlasn/terms/complexityLevel":{"@id":"https://purl.org/ctdlasn/terms/complexityLevel","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The expected performance level of a learner or professional as defined by a competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Complexity Level"}],thingKey:"ceasn:complexityLevel",iframePath:e.$store.state.editor.iframeConceptPath,iframeText:"Select concepts to attach..."},"https://purl.org/ctdlasn/terms/weight":{"@id":"https://purl.org/ctdlasn/terms/weight","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"An asserted measurement of the weight, degree, percent, or strength of a recommendation, requirement, or comparison."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Weight"}],thingKey:"ceasn:weight"},hasChild:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The referenced competency is lower in some arbitrary hierarchy than this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Has Child"}],valuesIndexed:function(){return e.relations["hasChild"]},noTextEditing:!0,noEditing:!0},isChildOf:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The referenced competency is higher in some arbitrary hierarchy than this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Is Child Of"}],valuesIndexed:function(){return e.relations["isChildOf"]},noTextEditing:!0,noEditing:!0},narrows:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Covers all of the relevant concepts in the referenced competency as well as relevant concepts not found in the referenced competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Broad Alignment"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["narrows"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"narrows",r)},remove:function(t,r){e.removeRelationFromFramework(t,"narrows",r)}},broadens:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Covers all of the relevant concepts in this competency as well as relevant concepts not found in this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Narrow Alignment"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["broadens"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"broadens",r)},remove:function(t,r){e.removeRelationFromFramework(t,"broadens",r)}},isEquivalentTo:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Relevant concepts in this competency and the referenced competency are coextensive."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Exact Alignment"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["isEquivalentTo"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"isEquivalentTo",r)},remove:function(t,r){e.removeRelationFromFramework(t,"isEquivalentTo",r)}},majorRelated:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Major overlap of relevant concepts between this competency and the referenced competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Major Alignment"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["majorRelated"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"majorRelated",r)},remove:function(t,r){e.removeRelationFromFramework(t,"majorRelated",r)}},minorRelated:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Minor overlap of relevant concepts between this competency and the referenced competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Minor Alignment"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["minorRelated"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"minorRelated",r)},remove:function(t,r){e.removeRelationFromFramework(t,"minorRelated",r)}},requires:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"This competency is a prerequisite to the referenced competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Prerequisite Alignment"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["requires"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"requires",r)},remove:function(t,r){e.removeRelationFromFramework(t,"requires",r)}},"https://purl.org/ctdlasn/terms/abilityEmbodied":{"@id":"https://purl.org/ctdlasn/terms/abilityEmbodied","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Enduring attributes of the individual that influence performance are embodied either directly or indirectly in this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Ability Embodied"}],iframePath:e.$store.state.editor.iframeCompetencyPathIntraframework,iframeText:"Select competencies to align...",thingKey:"ceasn:abilityEmbodied"},"https://purl.org/ctdlasn/terms/knowledgeEmbodied":{"@id":"https://purl.org/ctdlasn/terms/knowledgeEmbodied","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Body of information embodied either directly or indirectly in this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Knowledge Embodied"}],iframePath:e.$store.state.editor.iframeCompetencyPathIntraframework,iframeText:"Select competencies to align...",thingKey:"ceasn:knowledgeEmbodied"},"https://purl.org/ctdlasn/terms/skillEmbodied":{"@id":"https://purl.org/ctdlasn/terms/skillEmbodied","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Cognitive, affective, and psychomotor skills directly or indirectly embodied in this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Skill Embodied"}],iframePath:e.$store.state.editor.iframeCompetencyPathIntraframework,iframeText:"Select competencies to align...",thingKey:"ceasn:skillEmbodied"},"https://purl.org/ctdlasn/terms/taskEmbodied":{"@id":"https://purl.org/ctdlasn/terms/taskEmbodied","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Specifically defined piece of work embodied either directly or indirectly in this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Task Embodied"}],iframePath:e.$store.state.editor.iframeCompetencyPathIntraframework,iframeText:"Select competencies to align...",thingKey:"ceasn:taskEmbodied"}}}}},Y={name:"Framework",props:{exportType:String,queryParams:Object,disallowEdits:Boolean,profileOverride:Object},mixins:[B["a"],W,X,Q],data:function(){return{repo:window.repo,frameworkExportLink:null,frameworkExportGuid:null,competencyExportOptions:[{name:"CASS (JSON-LD)",value:"jsonld"},{name:"CASS (RDF Quads)",value:"rdfQuads"},{name:"CASS (RDF+JSON)",value:"rdfJson"},{name:"CASS (RDF+XML)",value:"rdfXml"},{name:"CASS (Turtle)",value:"turtle"},{name:"Credential Engine ASN (JSON-LD)",value:"ctdlasnJsonld"},{name:"IMS Global CASE (JSON)",value:"case"}],highlightCompetency:null,selectButtonText:null,selectAllButton:!1,selectAll:!1,selectedArray:[]}},computed:{framework:function(){return this.$store.state.editor.framework},timestamp:function(){return this.framework.getTimestamp()?this.framework.getTimestamp():this.framework["schema:dateModified"]?this.framework["schema:dateModified"]:null},lastModified:function(){return null==this.framework?"Unknown.":this.timestamp?this.$moment(this.timestamp).fromNow():null},shortId:function(){return this.$store.state.editor.framework.shortId()},frameworkProfile:function(){return"true"===this.queryParams.ceasnDataFields?this.ctdlAsnFrameworkProfile:{"http://schema.org/name":{"@id":"http://schema.org/name","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://www.w3.org/2000/01/rdf-schema#langString"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Name of the competency framework."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"name"}]},"http://schema.org/description":{"@id":"http://schema.org/description","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Framework"}],"http://schema.org/rangeIncludes":[{"@id":"http://www.w3.org/2000/01/rdf-schema#langString"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Description of the framework."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"description"}]}}},competencyProfile:function(){if(this.profileOverride)return this.profileOverride;if("true"===this.queryParams.ceasnDataFields)return this.ctdlAsnCompetencyProfile;var e=this;return{"http://schema.org/name":{"@id":"http://schema.org/name","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://www.w3.org/2000/01/rdf-schema#langString"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Name of the competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Name"}]},"http://schema.org/description":{"@id":"http://schema.org/description","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://www.w3.org/2000/01/rdf-schema#langString"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Description of the competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Description"}]},"https://schema.cassproject.org/0.4/Competency/scope":{"@id":"https://schema.cassproject.org/0.4/Competency/scope","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Scope in which the competency may be applied. e.g. Underwater."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Scope"}]},"https://schema.cassproject.org/0.4/Level":{"@id":"https://schema.cassproject.org/0.4/Level","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"When an individual's performance in a competency can be measured, a level specifies milestones that an individual can reach, creating fine-grained distinction between the proficient and the adept."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Level"}],"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/Level"}],valuesIndexed:function(){return e.levels},noTextEditing:!0,iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select levels to align...",add:function(t){e.addLevel(t)},remove:function(t,r){e.removeLevelFromFramework(r)},save:function(){e.saveFramework()}},narrows:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"A sub-competency relationship which has relevance to this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Narrows"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["narrows"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"narrows",r)},remove:function(t,r){e.removeRelationFromFramework(t,"narrows",r)}},broadens:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Covers other relevant competencies not found in this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Broadens"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["broadens"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"broadens",r)},remove:function(t,r){e.removeRelationFromFramework(t,"broadens",r)}},isEquivalentTo:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Represents same capability in all aspects to another competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Equivalent To"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["isEquivalentTo"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"isEquivalentTo",r)},remove:function(t,r){e.removeRelationFromFramework(t,"isEquivalentTo",r)}},requires:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Another competency is prerequisite for this."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Requires"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["requires"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"requires",r)},remove:function(t,r){e.removeRelationFromFramework(t,"requires",r)}},isEnabledBy:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"A recommended option that speeds up acquisition of this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Is Enabled By"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["isEnabledBy"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"isEnabledBy",r)},remove:function(t,r){e.removeRelationFromFramework(t,"isEnabledBy",r)}},isRelatedTo:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"This competency has some degree of overlap with another."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Is Related To"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["isRelatedTo"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"isRelatedTo",r)},remove:function(t,r){e.removeRelationFromFramework(t,"isRelatedTo",r)}},desires:{"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Recommended, assumed, or expected competency not essential to acquisition of this competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Desires"}],iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select competencies to align...",valuesIndexed:function(){return e.relations["desires"]},noTextEditing:!0,add:"unsaved",save:function(t,r){e.addRelationsToFramework(t,"desires",r)},remove:function(t,r){e.removeRelationFromFramework(t,"desires",r)}}}},levels:function(){var e={};if(!this.framework.level)return null;for(var t=0;t<this.framework.level.length;t++){var r=EcLevel.getBlocking(this.framework.level[t]),a=r.competency;EcArray.isArray(a)||(a=[a]);for(var n=0;n<a.length;n++)EcArray.isArray(e[a[n]])||(e[a[n]]=[]),e[a[n]].push(r)}return e},relations:function(){for(var e={},t=0;t<this.framework.relation.length;t++){var r=EcAlignment.getBlocking(this.framework.relation[t]),a=r.relationType,n=null;"true"===this.queryParams.ceasnDataFields&&"narrows"===a&&-1!==this.framework.competency.indexOf(r.target)&&(a="isChildOf",n="hasChild"),"narrows"===a&&(n="broadens"),e[a]||(e[a]={}),e[a][r.source]||(e[a][r.source]=[]),e[a][r.source].push(r.target),n&&(e[n]||(e[n]={}),e[n][r.target]||(e[n][r.target]=[]),e[n][r.target].push(r.source))}return e}},components:{Hierarchy:F,Thing:w["default"]},created:function(){this.refreshPage()},watch:{exportType:function(){"asn"===this.exportType?this.exportAsn(this.frameworkExportLink):"jsonld"===this.exportType?this.exportJsonld(this.frameworkExportLink):"rdfQuads"===this.exportType?this.exportRdfQuads(this.frameworkExportLink):"rdfJson"===this.exportType?this.exportRdfJson(this.frameworkExportLink):"rdfXml"===this.exportType?this.exportRdfXml(this.frameworkExportLink):"turtle"===this.exportType?this.exportTurtle(this.frameworkExportLink):"ctdlasnJsonld"===this.exportType?this.exportCtdlasnJsonld(this.frameworkExportLink):"ctdlasnCsv"===this.exportType?this.exportCtdlasnCsv(this.frameworkExportLink):"csv"===this.exportType?this.exportCsv():"case"===this.exportType&&this.exportCasePackages(guid)},shortId:function(){this.refreshPage()}},methods:{refreshPage:function(){!1===EcRepository.shouldTryUrl(this.framework.id)?this.frameworkExportGuid=EcCrypto.md5(this.framework.id):this.frameworkExportGuid=this.framework.getGuid(),this.frameworkExportLink=this.repo.selectedServer+"data/"+this.frameworkExportGuid,this.setDefaultLanguage(),this.highlightCompetency=[],this.queryParams.highlightCompetency&&(EcArray.isArray(this.queryParams.highlightCompetency)?this.highlightCompetency=this.queryParams.highlightCompetency:this.highlightCompetency=[this.queryParams.highlightCompetency]),this.queryParams.singleSelect&&(this.selectButtonText=this.queryParams.singleSelect),this.queryParams.select&&(""!==this.queryParams.select&&"select"!==this.queryParams.select&&(this.selectButtonText=this.queryParams.select),this.selectAllButton=!0);var e=this.queryParams.editorRoot?this.queryParams.editorRoot:"/";e+="cass-editor/?select=Align with...&view=true&back=true&frameworkId="+this.framework.shortId(),e+=this.$store.state.editor.commonPathIframe,this.$store.commit("iframeCompetencyPathIntraframework",e)},exportObject:function(e,t){var r;r=!1===EcRepository.shouldTryUrl(e.id)?EcCrypto.md5(e.id):e.getGuid();var a=this.repo.selectedServer+"data/"+r;"jsonld"===t?this.exportJsonld(a):"rdfQuads"===t?this.exportRdfQuads(a):"rdfJson"===t?this.exportRdfJson(a):"rdfXml"===t?this.exportRdfXml(a):"turtle"===t?this.exportTurtle(a):"ctdlasnJsonld"===t?this.exportCtdlasnJsonld(a):"case"===t&&this.exportCaseItems(r)},select:function(e,t){t?EcArray.setAdd(this.selectedArray,e):EcArray.setRemove(this.selectedArray,e)},addRelationsToFramework:function(e,t,r){r.length>0&&this.$parent.addAlignments(r,e,t)},removeRelationFromFramework:function(e,t,r){var a=this;(new EcAsyncHelper).each(this.framework.relation,(function(n,s){EcAlignment.get(n,(function(n){"broadens"===t?n.target===e&&n.source===r&&"narrows"===n.relationType?(a.framework.removeRelation(n.shortId()),a.conditionalDelete(n.shortId()),s()):s():n.source===e&&n.target===r&&n.relationType===t?(a.framework.removeRelation(n.shortId()),a.conditionalDelete(n.shortId()),s()):s()}),s)}),(function(){var e=a.framework;a.$store.commit("framework",e),!0===a.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[e.id]&&(e=EcEncryptedValue.toEncryptedValue(e)),a.repo.saveTo(e,(function(){}),console.error)}))}}},Z=Y,ee=(a("1865"),Object(c["a"])(Z,K,G,!1,null,null,null)),te=ee.exports,re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-open"},[r("div",["true"===e.queryParams.concepts?r("span",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],attrs:{type:"radio",value:"dcterms:title.keyword",id:"dcterms:title.keyword"},domProps:{checked:e._q(e.sortBy,"dcterms:title.keyword")},on:{change:function(t){e.sortBy="dcterms:title.keyword"}}}),r("label",{attrs:{for:"dcterms:title.keyword"}},[e._v("Sort alphabetically")])]):r("span",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],attrs:{type:"radio",value:"name.keyword",id:"name.keyword"},domProps:{checked:e._q(e.sortBy,"name.keyword")},on:{change:function(t){e.sortBy="name.keyword"}}}),r("label",{attrs:{for:"name.keyword"}},[e._v("Sort alphabetically")])]),r("span",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],attrs:{type:"radio",value:"schema:dateModified",id:"schema:dateModified"},domProps:{checked:e._q(e.sortBy,"schema:dateModified")},on:{change:function(t){e.sortBy="schema:dateModified"}}}),r("label",{attrs:{for:"schema:dateModified"}},[e._v("Sort by last modified")])])]),r("List",{attrs:{type:"Organization",repo:e.repo,click:e.organizationClick,searchOptions:e.searchOptions,paramObj:e.paramObj},scopedSlots:e._u([{key:"organizationTags",fn:function(t){return[t.item["schema:dateCreated"]?r("span",{attrs:{title:new Date(t.item["schema:dateCreated"])}},[e._v("\n                Created "+e._s(e.$moment(t.item["schema:dateCreated"]).fromNow())+"\n            ")]):e._e(),t.item.getTimestamp()?r("span",{attrs:{title:new Date(t.item.getTimestamp())}},[e._v("\n                Last modified "+e._s(e.$moment(t.item.getTimestamp()).fromNow())+"\n            ")]):t.item["schema:dateModified"]?r("span",{attrs:{title:new Date(t.item["schema:dateModified"])}},[e._v("\n                Last modified "+e._s(e.$moment(t.item["schema:dateModified"]).fromNow())+"\n            ")]):e._e()]}}])})],1)},ae=[],ne={name:"Organizations",props:{queryParams:Object},mixins:[B["a"]],data:function(){return{repo:window.repo,sortBy:"name.keyword"}},computed:{searchOptions:function(){var e="";if(this.queryParams&&null!=this.queryParams.filter&&(e+=" AND ("+this.queryParams.filter+")"),this.queryParams&&"mine"===this.queryParams.show){e+=" AND (";for(var t=0;t<EcIdentityManager.ids.length;t++){0!==t&&(e+=" OR ");var r=EcIdentityManager.ids[t];e+='@owner:"'+r.ppk.toPk().toPem()+'"',e+=' OR @owner:"'+addNewlinesToId(r.ppk.toPk().toPem())+'"'}e+=")"}return e},paramObj:function(){var e={size:20},t="name.keyword"===this.sortBy?"asc":"desc";return e.sort='[ { "'+this.sortBy+'": {"order" : "'+t+'" , "unmapped_type" : "long",  "missing" : "_last"}} ]',this.queryParams&&null!=this.queryParams.show&&"mine"===this.queryParams.show&&(e.ownership="me"),e}},components:{List:k},methods:{organizationClick:function(e){var t=this;EcOrganization.get(e.id,(function(r){t.$store.commit("organization",r),t.$router.push({name:"organization",params:{organizationId:e.id}})}),console.error)},getName:function(e){var t=EcArray.isArray(e)?e:[e];return-1!==Thing.getDisplayStringFrom(t).toLowerCase().indexOf("http")?this.resolveNameFromUrl(Thing.getDisplayStringFrom(t)):Thing.getDisplayStringFrom(t)}}},se=ne,oe=(a("9264"),Object(c["a"])(se,re,ae,!1,null,"ffddf40a",null)),ie=oe.exports,ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-organization"},[r("Thing",{attrs:{obj:e.organization,repo:e.repo,clickToLoad:!1,profile:e.profile}}),e.timestamp?r("span",{staticClass:"info-tag",attrs:{title:new Date(e.timestamp)}},[e._v("Last modified "+e._s(e.lastModified))]):e._e(),e.organization["schema:dateCreated"]?r("span",{staticClass:"info-tag",attrs:{title:new Date(e.organization["schema:dateCreated"])}},[e._v("Created "+e._s(e.$moment(e.organization["schema:dateCreated"]).fromNow()))]):e._e(),e.organization["Approved"]?r("span",{staticClass:"info-tag",attrs:{title:e.organization["Approved"]}},[e._v("Approved")]):e._e(),e.organization["Published"]?r("span",{staticClass:"info-tag",attrs:{title:e.organization["Published"]}},[e._v("Published")]):e._e(),r("hr")],1)},le=[],de=(a("8e6e"),a("456d"),a("bd86")),pe=a("21a6"),he=a.n(pe);function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(r,!0).forEach((function(t){Object(de["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ge={name:"Organization",props:{exportType:String,queryParams:Object},mixins:[B["a"]],data:function(){return{repo:window.repo,organization:null}},computed:{timestamp:function(){return this.organization.getTimestamp&&this.organization.getTimestamp()?this.organization.getTimestamp():this.organization["schema:dateModified"]?this.organization["schema:dateModified"]:null},lastModified:function(){return null==this.organization?"Unknown.":this.timestamp?this.$moment(this.timestamp).fromNow():null},profile:function(){var e=this;return{"http://schema.org/name":fe({},this.$store.state.lode.schemataLookup["http://schema.org/Organization"]["http://schema.org/name"],{"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Name of the organization."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Organization Name"}]}),"http://schema.org/employee":fe({profile:{"http://schema.org/name":{"@id":"http://schema.org/name","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.org/Person"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Name of the person."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Person Name"}]}}},this.$store.state.lode.schemataLookup["http://schema.org/Organization"]["http://schema.org/employee"],{"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Employees"}]}),"http://schema.org/subOrganization":fe({profile:function(){return e.profile}},this.$store.state.lode.schemataLookup["http://schema.org/Organization"]["http://schema.org/subOrganization"],{"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Department"}]})}}},components:{Thing:w["default"]},created:function(){this.organization=this.$store.state.editor.organization,!1===EcRepository.shouldTryUrl(this.organization.id)?this.exportGuid=EcCrypto.md5(this.organization.id):this.exportGuid=this.organization.getGuid(),this.exportLink=this.repo.selectedServer+"data/"+this.exportGuid},watch:{},methods:{download:function(e,t){var r=new Blob([t],{type:"text/plain;charset=utf-8"});he()(r,e)}}},we=ge,ve=(a("6722"),Object(c["a"])(we,ce,le,!1,null,"256f7c7c",null)),ye=ve.exports,Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-import container is-fluid is-marginless is-paddingless"},[r("div",{staticClass:"columns is-multiline is-marginless is-gapless is-mobile"},[r("div",{staticClass:"column is-narrow is-hidden-mobile"},[r("side-bar",{attrs:{type:"import",method:e.method,queryParams:e.queryParams},on:{updateUrl:e.updateUrl}})],1),r("div",{staticClass:"column has-background-white is-scrollable"},[r("section",{staticClass:"page-import-body"},[r("div",{staticClass:"has-background-white",attrs:{id:"import-top-section"}},[r("div",{staticClass:"columns is-mobile"},[r("div",{staticClass:"column is-narrow"},["true"===e.queryParams.concepts?r("h1",{staticClass:"title is-size-2"},[e._v("\n                                Import a concept scheme\n                            ")]):r("h1",{staticClass:"title is-size-2"},[e._v("\n                                Import a framework\n                            ")])]),e._m(0)]),"Ready"!==e.status||e.file||"true"!==e.queryParams.concepts?"Ready"!==e.status||e.file?e._e():r("p",{staticClass:"is-size-6"},[e._v("\n                        Upload documents to transform into CaSS Competency Frameworks.\n                    ")]):r("p",{staticClass:"is-size-6"},[e._v("\n                        Upload documents to transform into CaSS Concept Schemes.\n                    ")]),e.showImportDetailsView?r("p",{staticClass:"is-size-6"},[r("span",{staticClass:"has-text-success has-text-weight-bold"},[e._v("\n                            CaSS has detected a framework!\n                        ")]),r("br"),r("br"),e._v("\n                        We've gathered details about your competency framework and file.  Please review. Accept and approve to continue, cancel to review your file and re-import.\n                    ")]):e._e(),e.showImportPreviewView?r("p",{staticClass:"is-size-6"},[r("span",{staticClass:"has-text-success has-text-weight-bold"},[e._v("\n                            Framework successfully imported, ready to edit.\n                        ")]),r("br"),r("br"),e._v('\n                        Please review the name and descriptions of the imported competencies. After making edits, "approve" the changes to view the imported competency details.\n                    ')]):e._e(),e.showImportLightView?r("p",{staticClass:"is-size-6"},[r("span",{staticClass:"has-text-success has-text-weight-bold"},[e._v("\n                            Your import is complete!\n                        ")]),r("br"),r("br"),e._v('\n                        To view your framework in the full editor, select "open in editor" at the\n                        bottom of the screen.\n                        '),r("br"),r("br")]):e._e(),e.framework&&e.showImportPreviewView?r("div",{staticClass:"import-instructions"},[e._m(1)]):e._e()]),r("div",{staticClass:"section",attrs:{id:"import-bottom-section"}},[e.framework?e._e():r("div",{staticClass:"section is-large"},[r("div",{staticClass:"tile is-vertical has-background-light"},[r("div",{staticClass:"section is-medium"},[r("div",{staticClass:"columns is-mobile"},[r("div",{staticClass:"column"},[r("div",{staticClass:"import-tab",class:{"is-active-tab":"file"===e.method}},[r("a",{on:{click:function(t){e.method="file",e.framework=null,e.status=""}}},[r("i",{staticClass:"fa fa-2x fa-file has-text-centered is-block",attrs:{"aria-hidden":"true"}}),r("div",{staticClass:"is-hidden-mobile is-block has-text-centered"},[e._v("\n                                                    File Import\n                                                ")])])])]),"true"!==e.queryParams.concepts?r("div",{staticClass:"column"},[r("div",{staticClass:"import-tab disabled",class:{"is-active-tab":"server"===e.method}},[r("a",{on:{click:function(t){return e.switchToRemoteServerTab()}}},[r("i",{staticClass:"fa fa-2x fa-server is-block has-text-centered",attrs:{"aria-hidden":"true"}}),r("div",{staticClass:"is-hidden-mobile is-block has-text-centered"},[e._v("\n                                                    Remote Server\n                                                ")])])])]):e._e(),"true"!==e.queryParams.concepts?r("div",{staticClass:"column"},[r("div",{staticClass:"import-tab disabled",class:{"is-active-tab":"text"===e.method}},[r("a",{on:{click:function(t){return e.switchToPasteTextTab()}}},[r("i",{staticClass:"fa fa-2x fa-paste has-text-centered is-block",attrs:{"aria-hidden":"true"}}),r("div",{staticClass:"is-hidden-mobile is-block has-text-centered"},[e._v("\n                                                    Paste Text\n                                                ")])])])]):e._e(),"true"!==e.queryParams.concepts?r("div",{staticClass:"column"},[r("div",{staticClass:"import-tab disabled",class:{"is-active-tab":"url"===e.method}},[r("a",{on:{click:function(t){return e.switchToUrlSourceTab()}}},[r("i",{staticClass:"fa fa-link has-text-centered is-block fa-2x",attrs:{"aria-hidden":"true"}}),r("div",{staticClass:"is-hidden-mobile is-block has-text-centered"},[e._v("\n                                                    URL Source\n                                                ")])])])]):e._e()]),"file"==e.method?r("div",{staticClass:"has-dashed-border columns",attrs:{id:"drop-area"}},[e.processingFile||e.showErrors?e.processingFile&&!e.showErrors?r("div",{staticClass:"column is-12"},[e.spin?r("span",{staticClass:"icon is-large"},[r("i",{staticClass:"fa fa-spinner fa-pulse fa-2x"})]):e._e(),r("div",{staticClass:"section"},[r("p",{staticClass:"is-size-7"},[e._v("\n                                                "+e._s(e.status)+"\n                                            ")])])]):e.showErrors?r("div",{staticClass:"column is-12 has-text-warning"},[r("ul",[e._l(e.errors,(function(t,a){return r("li",{key:a,staticClass:"is-size-7"},[r("span",{},[r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})]),e._v("\n                                                    "+e._s(t)+"\n                                                ")])])})),r("li")],2),r("div",{staticClass:"section"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-4"},[r("div",{staticClass:"button is-primary",on:{click:function(t){return e.cancelImport()}}},[e._v("\n                                                        Start over\n                                                    ")])])])])]):e._e():r("drag-and-drop",{staticClass:"column is-12",on:{clearFiles:e.onClearFiles,dragAndDropEmitFiles:e.onUploadFiles}})],1):e._e(),r("div",{staticClass:"section"},["csv"==e.importType?r("div",[r("div",[r("label",[e._v("Step 1: Name the framework.")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.importFrameworkName,expression:"importFrameworkName"}],domProps:{value:e.importFrameworkName},on:{input:function(t){t.target.composing||(e.importFrameworkName=t.target.value)}}})]),r("div",[r("label",[e._v("Step 2: Describe the framework (optional).")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.importFrameworkDescription,expression:"importFrameworkDescription"}],domProps:{value:e.importFrameworkDescription},on:{input:function(t){t.target.composing||(e.importFrameworkDescription=t.target.value)}}})]),r("div",[r("label",[e._v("Step 3: Select the Name column.")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.importCsvColumnName,expression:"importCsvColumnName"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.importCsvColumnName=t.target.multiple?r:r[0]}}},e._l(e.csvColumns,(function(t,a){return r("option",{key:a,domProps:{value:t}},[e._v("\n                                                    "+e._s(t.name)+"\n                                                ")])})),0)]),r("div",[r("label",[e._v("Step 4: Select the Description column (optional).")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.importCsvColumnDescription,expression:"importCsvColumnDescription"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.importCsvColumnDescription=t.target.multiple?r:r[0]}}},[r("option",[e._v("N/A")]),e._l(e.csvColumns,(function(t,a){return r("option",{key:a,domProps:{value:t}},[e._v("\n                                                    "+e._s(t.name)+"\n                                                ")])}))],2)]),r("div",[r("label",[e._v("Step 5: Select the Scope column (optional).")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.importCsvColumnScope,expression:"importCsvColumnScope"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.importCsvColumnScope=t.target.multiple?r:r[0]}}},[r("option",[e._v("N/A")]),e._l(e.csvColumns,(function(t,a){return r("option",{key:a,domProps:{value:t}},[e._v("\n                                                    "+e._s(t.name)+"\n                                                ")])}))],2)]),r("div",[r("label",[e._v("Step 6: Select the ID column (optional). If chosen, this should be a URL from another CaSS system or a non-numeric ID.")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.importCsvColumnId,expression:"importCsvColumnId"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.importCsvColumnId=t.target.multiple?r:r[0]}}},[r("option",[e._v("N/A")]),e._l(e.csvColumns,(function(t,a){return r("option",{key:a,domProps:{value:t}},[e._v("\n                                                    "+e._s(t.name)+"\n                                                ")])}))],2)]),r("div",[r("label",[e._v('\n                                                Step 7: Select a relation file (optional).\n                                                The relation source/target must be in the\n                                                form of ID or Name, and the relation types\n                                                should be "requires", "desires", "narrows",\n                                                "isEnabledBy", "isRelatedTo", or "isEquivalentTo".\n                                            ')]),r("input",{attrs:{type:"file"},on:{change:e.analyzeCsvRelation}})]),e.csvRelationFile?r("div",[r("div",[r("label",[e._v("\n                                                    Step 8: Select the Source column.\n                                                ")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.importCsvColumnSource,expression:"importCsvColumnSource"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.importCsvColumnSource=t.target.multiple?r:r[0]}}},e._l(e.csvRelationColumns,(function(t,a){return r("option",{key:a,domProps:{value:t}},[e._v("\n                                                        "+e._s(t.name)+"\n                                                    ")])})),0)]),r("div",[r("label",[e._v("Step 9: Select the Relation Type column.")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.importCsvColumnRelationType,expression:"importCsvColumnRelationType"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.importCsvColumnRelationType=t.target.multiple?r:r[0]}}},e._l(e.csvRelationColumns,(function(t,a){return r("option",{key:a,domProps:{value:t}},[e._v("\n                                                        "+e._s(t.name)+"\n                                                    ")])})),0)]),r("div",[r("label",[e._v("Step 10: Select the Target column.")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.importCsvColumnTarget,expression:"importCsvColumnTarget"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.importCsvColumnTarget=t.target.multiple?r:r[0]}}},e._l(e.csvRelationColumns,(function(t,a){return r("option",{key:a,domProps:{value:t}},[e._v("\n                                                        "+e._s(t.name)+"\n                                                    ")])})),0)])]):e._e()]):"medbiq"==e.importType?r("div",[r("div",[r("label",[e._v("Step 1: Name the framework.")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.importFrameworkName,expression:"importFrameworkName"}],domProps:{value:e.importFrameworkName},on:{input:function(t){t.target.composing||(e.importFrameworkName=t.target.value)}}})]),r("div",[r("label",[e._v("Step 2: Describe the framework (optional).")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.importFrameworkDescription,expression:"importFrameworkDescription"}],domProps:{value:e.importFrameworkDescription},on:{input:function(t){t.target.composing||(e.importFrameworkDescription=t.target.value)}}})])]):e._e(),e.file&&"pdf"!==e.importType?r("button",{on:{click:e.importFromFile}},[e._v("\n                                        Import\n                                    ")]):e._e()]),"server"==e.method?r("div",{staticClass:"section has-dashed-border"},[r("center",[r("h1",[e._v("Paste URL endpoint of server")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.serverUrl,expression:"serverUrl"}],attrs:{type:"url"},domProps:{value:e.serverUrl},on:{input:function(t){t.target.composing||(e.serverUrl=t.target.value)}}}),r("button",{on:{click:e.connectToServer}},[e._v("\n                                            Connect\n                                        ")]),r("div",[e._v("\n                                            "+e._s(e.status)+"\n                                        ")])]),e.caseDocs.length?r("div",[r("ul",e._l(e.caseDocs,(function(t){return r("li",{key:t.id},[t.loading||t.success||t.error?e._e():r("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"doc.checked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:function(r){var a=t.checked,n=r.target,s=!!n.checked;if(Array.isArray(a)){var o=null,i=e._i(a,o);n.checked?i<0&&e.$set(t,"checked",a.concat([o])):i>-1&&e.$set(t,"checked",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(t,"checked",s)}}}),t.loading?r("i",{staticClass:"fa fa-circle-notch fa-spin"}):t.success?r("i",{staticClass:"fa fa-check"}):t.error?r("i",{staticClass:"fa fa-exclamation-triangle"}):e._e(),e._v("\n                                                "+e._s(t.name)+"\n                                            ")])})),0),r("button",{on:{click:e.importCase}},[e._v("\n                                            Import\n                                        ")]),r("button",{on:{click:e.cancelCase}},[e._v("\n                                            Cancel\n                                        ")])]):e._e()],1):e._e(),"text"==e.method?r("div",{staticClass:"section has-dashed-border"},[r("center",[r("h1",[e._v("Paste Text")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],domProps:{value:e.text},on:{input:function(t){t.target.composing||(e.text=t.target.value)}}}),r("div",[e._v("\n                                            "+e._s(e.status)+"\n                                            "),r("button",{on:{click:e.parseText}},[e._v("\n                                                Import\n                                            ")])])])],1):e._e(),"url"==e.method?r("div",{staticClass:"section has-dashed-border"},[r("center",[r("h1",[e._v("Paste URL of document")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],attrs:{type:"url"},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),r("button",{on:{click:e.importFromUrl}},[e._v("\n                                            Import\n                                        ")]),r("div",[e._v("\n                                            "+e._s(e.status)+"\n                                        ")])])],1):e._e()])])]),e.framework&&e.showImportDetailsView?r("div",{staticClass:"section import-details"},[r("div",{staticClass:"import-details__section"},[r("h3",{staticClass:"subtitle is-size-3 has-text-weight-normal"},[e._v("\n                                The following details were detected.\n                            ")]),r("p",{staticClass:"is-size-6 has-text-weight-light"},[e._v("\n                                If these details don't look correct, please verify your file\n                                is correct and import again.\n                            ")]),r("ul",{staticClass:"is-size-6 detected-import-details"},[e.detailsDetected.columns>0?r("li",[e._m(2),e._v("\n                                    CaSS detected "),r("b",[e._v(e._s(e.detailsDetected.columns))]),e._v(" columns\n                                ")]):e._e(),e.detailsDetected.rows>0?r("li",[e._m(3),e._v("\n                                    CaSS detected "),r("b",[e._v(e._s(e.detailsDetected.rows))]),e._v(" rows\n                                ")]):e._e(),r("li",[e._m(4),e._v("\n                                    CaSS detected "),r("b",[e._v(e._s(e.detailsDetected.competencies))]),e._v(" competencies in the imported framework\n                                ")]),r("li",[e._m(5),e._v("\n                                    CaSS detected a "),r("b",[e._v(e._s(e.detailsDetected.fileType))]),e._v(" file type\n                                ")]),e.detailsDetected.headers?r("li",[e._m(6),r("b",[e._v("Header rows detected")])]):e._e(),r("li",{staticClass:"is-size-7"},[e._v('\n                                    If this information looks correct, "approve" to continue.\n                                ')])])])]):e._e(),e.framework&&e.showImportPreviewView?r("div",{staticClass:"import-preview"},[r("div",{staticClass:"tile is-vertical"},[e.hierarchyIsdoneLoading?e._e():r("div",{staticClass:"section"},[e._m(7)]),e.framework?r("Hierarchy",{class:{"is-hidden":!e.hierarchyIsdoneLoading},attrs:{container:e.framework,containerType:"Framework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",profile:e.previewProfile,editable:!0,edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",repo:e.repo},on:{doneLoadingNodes:e.handleDoneLoading}}):e._e()],1)]):e.framework&&e.showImportLightView?r("div",{staticClass:"import-light"},[r("div",{staticClass:"tile is-vertical"},[e.framework?r("Hierarchy",{attrs:{container:e.framework,containerType:"Framework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",profile:e.lightViewProfile,editable:!1,edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",repo:e.repo}}):e._e()],1)]):e._e()]),r("div",{staticClass:"section",attrs:{id:"import-actions"}},[r("div",{staticClass:"columns is-gapless is-marginless is-mobile is-multiline"},[r("div",{staticClass:"column is-12"},[e.showImportDetailsView?r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"button is-light is-pulled-right is-light",on:{click:e.cancelImport}},[r("span",[e._v("\n                                        Cancel\n                                    ")]),e._m(8)]),r("div",{staticClass:"button is-info is-pulled-right",on:{click:e.importDetailsAccept}},[r("span",[e._v("\n                                        Accept Details & Edit\n                                    ")]),e._m(9)])]):e.showImportPreviewView?r("div",{staticClass:"buttons is-right"},[r("div",{staticClass:"button is-light is-pulled-right",on:{click:e.cancelImport}},[r("span",[e._v("cancel")]),e._m(10)]),r("div",{staticClass:"button is-info is-pulled-right",on:{click:function(t){return e.importPreviewAccept()}}},[r("span",[e._v("\n                                        Approve Import & View\n                                    ")]),e._m(11)])]):e._e()]),e.showImportLightView?r("div",{staticClass:"column is-6"},[r("div",{staticClass:"buttons is-left"},[r("div",{staticClass:"button is-light is-pulled-right",on:{click:function(t){return e.showModal("export")}}},[r("span",[e._v("\n                                        Export\n                                    ")]),e._m(12)]),r("router-link",{staticClass:"button is-light is-pulled-right",attrs:{to:"/"}},[r("span",[e._v("\n                                        Done\n                                    ")]),r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-home"})])])],1)]):e._e(),e.showImportLightView?r("div",{staticClass:"column is-6"},[r("div",{staticClass:"buttons is-right"},[e.framework?r("div",{staticClass:"button is-info is-pulled-right",on:{click:e.cancelImport}},[r("span",[e._v("import new framework")]),e._m(13)]):e._e(),e.framework?r("div",{staticClass:"button is-info is-pulled-right",on:{click:e.openFramework}},[r("span",[e._v("open editor")]),e._m(14)]):e._e()])]):e._e()])])])])])])},ke=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column"},[r("p",{staticClass:"is-primary is-size-7"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns is-mobile"},[r("div",{staticClass:"column is-6 has-text-centered"},[r("span",{staticClass:"icon"},[r("i",{staticClass:"far fa-hand-rock has-text-dark"})]),r("span",{staticClass:"is-size-7 has-text-weight-bold"},[e._v("\n                                    Drag to change hierarchy\n                                ")])]),r("div",{staticClass:"column is-6 has-text-centered"},[r("span",[r("span",{staticClass:"icon"},[r("i",{staticClass:"far fa-edit has-text-black"})]),r("span",{staticClass:"is-size-7 has-text-weight-bold"},[e._v("\n                                        Click descriptions to edit\n                                    ")])])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-success"},[r("i",{staticClass:"fa fa-check-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-success"},[r("i",{staticClass:"fa fa-check-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-success"},[r("i",{staticClass:"fa fa-check-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-success"},[r("i",{staticClass:"fa fa-check-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-success"},[r("i",{staticClass:"fa fa-check-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticClass:"processing-list"},[r("li"),r("li"),r("ul",[r("li"),r("li"),r("li")]),r("li"),r("li"),r("ul",[r("li"),r("li")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon is-smalls"},[r("span",{staticClass:"fa-stack"},[r("i",{staticClass:"fas fa-circle fa-stack-1x"}),r("i",{staticClass:"fas has-text-info fa-caret-right fa-stack-1x caret-icon-overlay-fix"})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("span",{staticClass:"fa-stack"},[r("i",{staticClass:"fas fa-circle fa-stack-1x"}),r("i",{staticClass:"fas has-text-info fa-caret-right fa-stack-1x caret-icon-overlay-fix"})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-download"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-redo-alt"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-edit"})])}],be=(a("aef6"),a("7f7f"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"is-dragged-over":e.isDraggedOver},attrs:{id:"drag-and-drop"},on:{dragenter:function(t){return t.preventDefault(),e.handleDragEnter(t)},dragleave:function(t){return t.preventDefault(),e.handleDragLeave(t)},click:function(t){return e.openFileExplorer()},dragover:function(e){e.preventDefault()},drop:function(t){return t.preventDefault(),e.addFile(t)}}},[r("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",disabled:!e.uploadDisabled},on:{change:e.fileChange}}),r("div",{staticClass:"section"},[r("div",{staticClass:"columns"},[e._m(0),e._m(1),r("div",{staticClass:"column is-12"},[r("ul",e._l(e.files,(function(t){return r("li",{key:t,staticClass:"is-size-7",staticStyle:{display:"inline","vertical-align":"middle"}},[r("span",[e._v("\n                            "+e._s(t.name)+" ("+e._s(e._f("kb")(t.size))+" kb)\n                            "),r("button",{staticClass:"button is-small is-text",attrs:{title:"Remove"},on:{click:function(r){return e.removeFile(t)}}},[e._m(2,!0)])])])})),0)]),r("div",{staticClass:"column is-12"},[r("button",{staticClass:"button is-info is-medium",attrs:{disabled:e.uploadDisabled},on:{click:e.upload}},[r("span",[e._v("\n                        Process Files\n                    ")]),e._m(3)])])])])])}),xe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-12"},[r("p",{staticClass:"is-size-6"},[e._v("\n                    Files to Upload\n                ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"column is-12"},[r("p",{staticClass:"is-size-7"},[e._v("\n                    Drag and drop, or click to upload.\n                ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("span",{staticClass:"fa-stack"},[r("i",{staticClass:"fas fa-circle fa-stack-1x"}),r("i",{staticClass:"fas has-text-secondary fa-caret-right fa-stack-1x caret-icon-overlay-fix"})])])}],Ee=a("75fc"),Pe={name:"DragAndDrop",data:function(){return{files:[],isDraggedOver:!1,counter:0}},computed:{uploadDisabled:function(){return 0===this.files.length}},watch:{},filters:{kb:function(e){return Math.floor(e/1024)}},methods:{handleDragEnter:function(e){this.counter++,e.target.id&&"drag-and-drop"===e.target.id&&(this.isDraggedOver=!0)},handleDragLeave:function(e){this.counter--,e.target&&"drag-and-drop"===e.target.id&&0===this.counter&&(this.isDraggedOver=!1)},openFileExplorer:function(){this.uploadDisabled&&this.$refs.file.click()},fileChange:function(e){var t=this;console.log(e);var r=e.target.files;r?Object(Ee["a"])(r).forEach((function(e){t.files.push(e)})):this.files=[]},addFile:function(e){var t=this,r=e.dataTransfer.files||e.target.files;r&&(Object(Ee["a"])(r).forEach((function(e){t.files.push(e)})),this.isDraggedOver=!1)},removeFile:function(e){this.files=this.files.filter((function(t){return t!==e})),this.$emit("clearFiles")},upload:function(){this.$emit("dragAndDropEmitFiles",this.files)}}},Te=Pe,Se=(a("6451"),Object(c["a"])(Te,be,xe,!1,null,null,null)),_e=Se.exports,Ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("aside",{staticClass:"menu has-background-primary has-text-white"},["file"==e.method?r("div",{staticClass:"menu-label is-size-3"},[e._v("\n        Supported File Types\n    ")]):e._e(),"server"==e.method?r("div",{staticClass:"menu-label"},[e._v("\n        Supported Servers\n    ")]):e._e(),"text"==e.method?r("div",{staticClass:"menu-label"},[e._v("\n        How to format text\n    ")]):e._e(),"url"==e.method?r("div",{staticClass:"menu-header"},[e._v("\n        Supported URL Imports\n    ")]):e._e(),"file"==e.method?r("div",{staticClass:"menu-list"},e._l(e.supportedFiles,(function(t,a){return r("li",{key:a,staticClass:"menu-list_list-item"},[r("h1",{staticClass:"is-size-6 has-text-weight-medium"},[e._v("\n                "+e._s(t.type)+"\n                "),r("span",{staticClass:"icon is-pulled-right",on:{click:function(e){t.showDescription=!t.showDescription}}},[r("i",{staticClass:"fa fa-info-circle"})])]),t.showDescription?r("p",{staticClass:"is-size-7 content-body-wrapper",domProps:{innerHTML:e._s(t.description)}}):e._e(),r("div",{staticClass:"menu-list_list-subitem"},[t.examples.length>0?r("h5",{staticClass:"is-size-7 has-text-weight-bold"},[e._v("\n                    Examples\n                ")]):e._e(),r("div",{staticClass:"buttons is-left"},e._l(t.examples,(function(t){return r("a",{key:t.id,staticClass:"button has-text-link is-size-7 is-small is-text",attrs:{href:t.location,download:t.download}},[r("span",[e._v("\n                            "+e._s(t.name)+"\n                        ")]),e._m(0,!0)])})),0)]),r("div",{staticClass:"menu-list_list-subitem"},[t.templates.length>0?r("h5",{staticClass:"is-size-7 has-text-weight-bold"},[e._v("\n                    Templates\n                ")]):e._e(),r("div",{staticClass:"buttons is-left"},e._l(t.templates,(function(t){return r("a",{key:t.id,staticClass:"button has-text-link is-size-7 is-small is-text",attrs:{href:t.location,download:t.download}},[r("span",[e._v("\n                            "+e._s(t.name)+"\n                        ")]),e._m(1,!0)])})),0)])])})),0):"server"==e.method?r("div",{staticClass:"menu-list"},e._l(e.supportedServer,(function(t,a){return r("li",{key:a,staticClass:"menu-list_list-item"},[r("h1",{staticClass:"is-size-6 has-text-weight-medium"},[e._v("\n                "+e._s(t.type)+"\n                "),r("span",{staticClass:"icon is-pulled-right",on:{click:function(e){t.showDescription=!t.showDescription}}},[r("i",{staticClass:"fa fa-info-circle"})])]),t.showDescription?r("p",{staticClass:"is-size-7 content-body-wrapper",domProps:{innerHTML:e._s(t.description)}}):e._e(),r("div",{staticClass:"menu-list_list-subitem"},[t.examples.length>0?r("h5",{staticClass:"is-size-7 has-text-weight-bold"},[e._v("\n                    Examples\n                ")]):e._e(),r("div",{staticClass:"buttons is-left"},e._l(t.examples,(function(t){return r("a",{key:t.id,staticClass:"button has-text-link is-size-7 is-small is-text",on:{click:function(r){e.serverUrl=t.location}}},[r("span",[e._v("\n                            "+e._s(t.name)+"\n                        ")])])})),0)])])})),0):"url"==e.method?r("div",{staticClass:"menu-list"},e._l(e.supportedUrl,(function(t,a){return r("li",{key:a,staticClass:"menu-list_list-item"},[r("h1",{staticClass:"is-size-6 has-text-weight-medium"},[e._v("\n                "+e._s(t.type)+"\n                "),r("span",{staticClass:"icon is-pulled-right",on:{click:function(e){t.showDescription=!t.showDescription}}},[r("i",{staticClass:"fa fa-info-circle"})])]),t.showDescription?r("p",{staticClass:"is-size-7 content-body-wrapper",domProps:{innerHTML:e._s(t.description)}}):e._e(),r("div",{staticClass:"menu-list_list-subitem"},[t.examples.length>0?r("h5",{staticClass:"is-size-7 has-text-weight-bold"},[e._v("\n                    Examples\n                ")]):e._e(),r("div",{staticClass:"buttons is-left"},e._l(t.examples,(function(t){return r("a",{key:t.id,staticClass:"button has-text-link is-size-7 is-small is-text",on:{click:function(r){e.url=t.location}}},[r("span",[e._v("\n                            "+e._s(t.name)+"\n                        ")])])})),0)])])})),0):"text"==e.method?r("div",{staticClass:"menu-list"},[r("li",{staticClass:"menu-list_list-item"},[e._m(2),r("div",{staticClass:"buttons is-left"},[r("a",{staticClass:"button has-text-link is-size-7 is-small is-text",on:{click:function(t){e.text="First Level\n Second Level\n  Third Level\n Second Level"}}},[r("span",[e._v("\n                        Example\n                    ")])])])])]):e._e()])},Oe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-download"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-download"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"is-size-7 content-body-wrapper"},[e._v("\n                To enter a framework using text: Copy and paste or start writing in the box here. Use spaces to indicate indenture.\n                "),r("br"),e._v("\n                eg:\n                "),r("pre",[e._v("                    First Level\n                        Second Level\n                        Third Level\n                        Second Level\n                ")])])}],Ae=a("a53e"),je=a.n(Ae),Le=a("e817"),Ne=a.n(Le),Fe=a("6dfa"),Re=a.n(Fe),De=a("3e7a"),$e=a.n(De),qe=a("df03"),Me=a.n(qe),Ve=a("bf34"),Be=a.n(Ve),Ue=a("83a4"),Je=a.n(Ue),ze=a("9e94"),He=a.n(ze),Ke=a("a8ea"),Ge=a.n(Ke),We=a("3e41"),Xe=a.n(We),Qe=a("efb1"),Ye=a.n(Qe),Ze=a("7f6e"),et=a.n(Ze),tt={name:"SideBar",props:{method:{default:""},queryParams:Object},data:function(){return{supportedFileTypes:[{type:"CaSS formatted CSV",examples:[{name:"Competencies",id:"cassCsvExComp",location:Re.a,download:"CAP Software Engineering - Competencies.csv"},{name:"Relations",id:"cassCsvExRel",location:$e.a,download:"CAP Software Engineering - Relations.csv"}],templates:[{name:"Competencies",id:"cassCsvTemlComp",location:Me.a,download:"Template - Competencies.csv"},{name:"Relations",id:"cassCsvTempRel",location:Be.a,download:"Template - Relations.csv"}],showDescription:!1,description:'\n                            For this import, you can use one or two CSVs.\n                            The first (required) CSV describes the competencies to include in a new framework.\n                            The second (optional) CSV describes the relations between the competencies found in the first framework.\n                            </p><p class="content-body">\n                            Each row in the first CSV will represent one competency,\n                            and each row in the second CSV will represent one relation between two competencies.\n                            The relations can be between competencies found in the first CSV,\n                            competencies found in other frameworks, or a mixture of the two.\n                            </p><p class="content-body">\n                            You can select the columns to use to describe the id, name,\n                            description, and other fields.'},{type:"CTDL-ASN formatted CSV",examples:[{name:"Example",id:"ctdlEx",location:je.a,download:"CTDL-ASN.ONET.example.csv"}],templates:[{name:"Template",id:"ctdTempl",location:Ne.a,download:"CTDL-ASN.ONET.template.csv"}],showDescription:!1,description:'\n                        For this import, you use one CSV.\n                        Each row in the CSV will represent one object, whether\n                        that be a competency, or a competency framework.\n                        Particular fields will be used to determine hierarchy.\n                        </p><p class="content-body">\n                        Using this format, you can import several frameworks,\n                        each with their own competencies.\n                        </p><p>Competencies may not be shared across frameworks, and\n                        each competency may only have one parent.\n                        </p><p class="content-body">\n                        It is also important that the rows be sequenced correctly,\n                        with competency frameworks appearing before the competencies\n                        inside of them,and for a parent to be in a row above\n                        a child of that parent.\n                        </p><p class="content-body">\n                        Any field with multiple values must be formatted as entry\n                        1|entry 2.'},{type:"Medbiquitous XML",examples:[{name:"example",id:"medXmlEx",location:Ge.a,download:"educational_achievement_sample_1June2012.xml"}],templates:[],showDescription:!1,description:'\n                        Medbiquitous is a standards body that includes medical\n                        competencies as one of their XML based formats.\n                        </p><p class="content-body">\n                        Using this format, you can import competencies exported\n                        from a system that exports Medbiquitous formatted XML.'},{type:"Achievement Standards Network RDF+JSON",examples:[{name:"Example",id:"asnrdEx",location:He.a,download:"D2695955.json"}],templates:[],showDescription:!1,description:'\n                        The Achievement Standards Network set of standards, or ASN\n                        standard for short, is a legacy standard used primarily by\n                        achievementstandards.org to transmit state standards and\n                        other national and organizational standards.\n                        </p><p class="content-body">\n                        Using this format,you can import competencies exported from\n                        achievementstandards.org and other systems in an RDF JSON\n                        format.'},{type:"CTDL-ASN formatted JSON-LD",examples:[{name:"Example",id:"ctdlJsonTemp",location:Je.a,download:"DQP.jsonld"}],templates:[],showDescription:!1,description:'\n                        For this import, you use one JSON-LD file that includes a\n                        graph of the framework and all of its competencies.\n                        </p><p class="content-body">\n                        Using this format, you can import a framework and\n                        competencies from a system that exports CTDL-ASN formatted\n                        JSON-LD.'}],supportedConceptFileTypes:[{type:"CTDL-ASN formatted CSV",examples:[{name:"Example",id:"ctdlConceptEx",location:Xe.a,download:"Concept Scheme Example.csv"}],templates:[{name:"Template",id:"ctdlConceptTempl",location:Ye.a,download:"Concept Scheme Template.csv"}],showDescription:!1,description:'\n                        For this import, you use one CSV. Each row in the CSV\n                        will represent one object, whether that be a concept, or\n                        a concept scheme. Particular fields will be used to determine hierarchy.\n                        </p><p class="content-body">\n                        Using this format, you can import several concept schemes, each with\n                        their own concepts. Concepts may not be shared across schemes, and each\n                        concept may only have one parent.\n                        </p><p class="content-body">\n                        It is also important that any field with multiple values be formatted\n                        exactly as in the sample file, e.g. entry 1|entry 2.'},{type:"CTDL-ASN formatted JSON-LD",examples:[{name:"Example",id:"ctdlJsonConceptTemp",location:et.a,download:"ConnectingCredentialsLevels.json"}],templates:[],showDescription:!1,description:'\n                        For this import, you use one JSON-LD file that includes a graph of the\n                        concept scheme and all of its concepts.\n                        </p><p class="content-body">\n                        Using this format, you can import a concept scheme and concepts from a\n                        system that exports CTDL-ASN formatted JSON-LD.'}],supportedServer:[{type:"CaSS Server",examples:[{name:"Example: CaSS Sandbox",id:"cassSandbox",location:"https://sandbox.cassproject.org/"}],showDescription:!1,description:'\n                     If you know the URL of a CaSS Repository,\n                    you can import frameworks from that repository.\n                    </p><p class="content-body">\n                    This import maintains the URLs of the Competency Frameworks\n                    and does not change any of the data.\n                    </p><p class="content-body">\n                    After entering the endpoint below, you can select which\n                    frameworks you would like to import.'},{type:"IMS CASE Server",examples:[{name:"Example: OpenSalt.net",id:"imsCaseServer",location:"https://opensalt.net"}],showDescription:!1,description:"\n                     If you know the URL of a IMS CASE Repository, such as OpenSalt, \n                     you can import published frameworks from that repository.\n                     <br>\n                     This import maintains the URLs of the CASE frameworks and changes both the format \n                     and schema used to store the CASE frameworks in CaSS, but does not change any of the data.\n                     <br>\n                     After entering the endpoint below, you can select which frameworks you would like to import."}],supportedUrl:[{type:"CTDL-ASN JSON-LD Graphs",examples:[{name:"Example: O*NET Abilities",id:"onetAbilities",location:"https://www.onetcenter.org/ctdlasn/graph/ce-07c257d6-9119-11e8-b852-782bcb5df6ac"},{name:"Example: O*NET Basic Skills",id:"onetBasicSkills",location:"https://www.onetcenter.org/ctdlasn/graph/ce-07c25f74-9119-11e8-b852-782bcb5df6ac"},{name:"Example: O*NET Cross-Functional Skills",id:"onetCrossFunctionalSkills",location:"https://www.onetcenter.org/ctdlasn/graph/ce-07c264d7-9119-11e8-b852-782bcb5df6ac"},{name:"Example: O*NET Knowledge",id:"onetKnowledge",location:"https://www.onetcenter.org/ctdlasn/graph/ce-07c27a0f-9119-11e8-b852-782bcb5df6ac"},{name:"Example: O*NET Technology Skills",id:"onetTechnologySkills",location:"https://www.onetcenter.org/ctdlasn/graph/ce-9fab4187-d8e7-11e9-8250-782bcb5df6ac"}],showDescription:!1,description:"\n                     If you know the URL of a CTDL-ASN JSON-LD graph, you can import published frameworks by URL.\n                     <br>\n                     This import maintains the URLs of the original frameworks and changes both the format and\n                     schema used to store the CTDL-ASN frameworks in CaSS, but does not change any of the data.\n                     Please note that the Technology Skills framework below is very large and will take a long time to import."}],serverUrl:null,url:null}},watch:{serverUrl:function(){this.$emit("updateUrl",this.serverUrl)},url:function(){this.$emit("updateUrl",this.url)}},computed:{supportedFiles:function(){return"true"===this.queryParams.concepts?this.supportedConceptFileTypes:this.supportedFileTypes}}},rt=tt,at=Object(c["a"])(rt,Ie,Oe,!1,null,null,null),nt=at.exports,st={name:"Import",props:{queryParams:Object},mixins:[B["a"],W,X],components:{Hierarchy:F,dragAndDrop:_e,sideBar:nt},data:function(){return{hierarchyIsdoneLoading:!1,frameworkBusy:!0,detailsDetected:{rows:0,columns:0,headers:!1,competencies:0,format:"Department of Labor",fileType:""},errors:[],showErrors:!1,showImportPreviewView:!1,showImportLightView:!1,showImportDetailsView:!1,processingFile:!1,processingSuccess:!1,showCassCsv:!1,method:"file",file:null,serverUrl:null,text:"",framework:null,url:null,repo:window.repo,status:"Ready",statusType:"info",competencyCount:0,importType:null,importFrameworkName:null,importFrameworkDescription:null,importCsvColumnName:null,importCsvColumnDescription:"N/A",importCsvColumnScope:"N/A",importCsvColumnId:"N/A",importCsvColumnSource:null,importCsvColumnRelationType:null,importCsvColumnTarget:null,csvColumns:[],csvRelationFile:null,csvRelationColumns:[],relationCount:0,caseDocs:[],caseCancel:!1,frameworkExportOptions:[{name:"Achievement Standards Network (RDF+JSON)",value:"asn"},{name:"CASS (JSON-LD)",value:"jsonld"},{name:"CASS (RDF Quads)",value:"rdfQuads"},{name:"CASS (RDF+JSON)",value:"rdfJson"},{name:"CASS (RDF+XML)",value:"rdfXml"},{name:"CASS (Turtle)",value:"turtle"},{name:"Credential Engine ASN (JSON-LD)",value:"ctdlasnJsonld"},{name:"Credential Engine ASN (CSV)",value:"ctdlasnCsv"},{name:"Table (CSV)",value:"csv"},{name:"IMS Global CASE (JSON)",value:"case"}],spin:!0}},computed:{importProfile:function(){var e;return e=!0===this.showImportPreviewView?this.previewProfile:this.postImportProfile,e},isUrl:function(){return"url"===this.method},isFile:function(){return"file"===this.method},isText:function(){return"text"===this.method},isServer:function(){return"server"===this.method},previewProfile:function(){var e=this;return{"http://schema.org/name":{"@id":"http://schema.org/name","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Name of the competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Name"}]},"@id":{"@id":"https://schema.cassproject.org/0.4/Competency/id","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The URL of the competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"ID"}],noTextEditing:!0},"https://purl.org/ctdlasn/terms/codedNotation":{"@id":"https://purl.org/ctdlasn/terms/codedNotation","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"An alphanumeric notation or ID code as defined by the promulgating body to identify this resource."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Code"}],thingKey:"ceasn:codedNotation"},"http://schema.org/description":{"@id":"http://schema.org/description","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Description of the competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Description"}]},"http://purl.org/dc/terms/type":{"@id":"http://purl.org/dc/terms/type","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The textual label identifying the category of the competency as designated by the promulgating body."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Type"}],thingKey:"dcterms:type"},"https://schema.cassproject.org/0.4/Competency/scope":{"@id":"https://schema.cassproject.org/0.4/Competency/scope","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Scope in which the competency may be applied. e.g. Underwater."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Scope"}]},"https://purl.org/ctdlasn/terms/conceptTerm":{"@id":"https://purl.org/ctdlasn/terms/conceptTerm","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"A term drawn from a controlled vocabulary used by the promulgating agency to refine and differentiate individual resources contextually."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Context"}],thingKey:"ceasn:conceptTerm",iframePath:e.$store.state.editor.iframeConceptPath,iframeText:"Select concepts to attach..."},"https://schema.cassproject.org/0.4/Level":{"@id":"https://schema.cassproject.org/0.4/Level","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/Level"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"When an individual's performance in a competency can be measured, a level specifies milestones that an individual can reach, creating fine-grained distinction between the proficient and the adept."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Rubric Cell"}],valuesIndexed:function(){return e.levels},noTextEditing:!0,iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select levels to align...",add:function(t){e.addLevel(t)},remove:function(t,r){e.removeLevelFromFramework(r)},save:function(){e.saveFramework()},profile:{"https://schema.cassproject.org/0.4/Level/title":{"@id":"https://schema.cassproject.org/0.4/Level/title","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Level"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":'The title that one who holds this performance level may assume. e.g. "Fast"'}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Rubric Column Header"}]},"https://schema.cassproject.org/0.4/Level/competency":{"@id":"https://schema.cassproject.org/0.4/Level/competency","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Level"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Specifies the URL of the competency the level relates to."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Rubric Row Header"}]},alwaysProperties:["https://schema.cassproject.org/0.4/Level/title","https://schema.cassproject.org/0.4/Level/competency"]}},alwaysProperties:["http://schema.org/name","http://schema.org/description"]}},lightViewProfile:function(){var e=this;return{"http://schema.org/name":{"@id":"http://schema.org/name","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Name of the competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Name"}]},"@id":{"@id":"https://schema.cassproject.org/0.4/Competency/id","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The URL of the competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"ID"}],noTextEditing:!0},"https://purl.org/ctdlasn/terms/codedNotation":{"@id":"https://purl.org/ctdlasn/terms/codedNotation","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"An alphanumeric notation or ID code as defined by the promulgating body to identify this resource."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Code"}],thingKey:"ceasn:codedNotation"},"http://schema.org/description":{"@id":"http://schema.org/description","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Description of the competency."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Description"}]},"http://purl.org/dc/terms/type":{"@id":"http://schema.org/description","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"The textual label identifying the category of the competency as designated by the promulgating body."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Type"}],thingKey:"dcterms:type"},"https://schema.cassproject.org/0.4/Competency/scope":{"@id":"https://schema.cassproject.org/0.4/Competency/scope","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Scope in which the competency may be applied. e.g. Underwater."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Scope"}]},"https://purl.org/ctdlasn/terms/conceptTerm":{"@id":"https://purl.org/ctdlasn/terms/conceptTerm","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"A term drawn from a controlled vocabulary used by the promulgating agency to refine and differentiate individual resources contextually."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Context"}],thingKey:"ceasn:conceptTerm",iframePath:e.$store.state.editor.iframeConceptPath,iframeText:"Select concepts to attach..."},"https://schema.cassproject.org/0.4/Level":{"@id":"https://schema.cassproject.org/0.4/Level","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"http://schema.cassproject.org/0.3/Competency"}],"http://schema.org/rangeIncludes":[{"@id":"https://schema.cassproject.org/0.4/Level"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"When an individual's performance in a competency can be measured, a level specifies milestones that an individual can reach, creating fine-grained distinction between the proficient and the adept."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Rubric Cell"}],valuesIndexed:function(){return e.levels},noTextEditing:!0,iframePath:e.$store.state.editor.iframeCompetencyPathInterframework,iframeText:"Select levels to align...",add:function(t){e.addLevel(t)},remove:function(t,r){e.removeLevelFromFramework(r)},save:function(){e.saveFramework()},profile:{"https://schema.cassproject.org/0.4/Level/title":{"@id":"https://schema.cassproject.org/0.4/Level/title","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Level"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/Text"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":'The title that one who holds this performance level may assume. e.g. "Fast"'}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Rubric Column Header"}]},"https://schema.cassproject.org/0.4/Level/competency":{"@id":"https://schema.cassproject.org/0.4/Level/competency","@type":["http://www.w3.org/2000/01/rdf-schema#Property"],"http://schema.org/domainIncludes":[{"@id":"https://schema.cassproject.org/0.4/Level"}],"http://schema.org/rangeIncludes":[{"@id":"http://schema.org/URL"}],"http://www.w3.org/2000/01/rdf-schema#comment":[{"@language":"en","@value":"Specifies the URL of the competency the level relates to."}],"http://www.w3.org/2000/01/rdf-schema#label":[{"@language":"en","@value":"Rubric Row Header"}]},alwaysProperties:["https://schema.cassproject.org/0.4/Level/title","https://schema.cassproject.org/0.4/Level/competency"]}}}},levels:function(){var e={};if(!this.framework.level)return null;for(var t=0;t<this.framework.level.length;t++){var r=EcLevel.getBlocking(this.framework.level[t]),a=r.competency;EcArray.isArray(a)||(a=[a]);for(var n=0;n<a.length;n++)EcArray.isArray(e[a[n]])||(e[a[n]]=[]),e[a[n]].push(r)}return e}},watch:{text:function(e,t){var r=this;TabStructuredImport.importCompetencies(e,this.repo.selectedServer,EcIdentityManager.ids[0],(function(e,t){r.status=e.length+" competencies and "+t.length+" relations.",r.status="info";var a=new EcFramework;r.framework=null;for(var n=0;n<e.length;n++)EcRepository.cache[e[n].shortId()]=e[n],a.addCompetency(e[n].shortId());for(n=0;n<t.length;n++)EcRepository.cache[t[n].shortId()]=t[n],a.addRelation(t[n].shortId());r.$nextTick((function(){r.framework=a}))}),(function(e){r.status=e}),console.error,this.repo,!0)}},methods:{handleDoneLoading:function(){console.log("done loading"),this.hierarchyIsdoneLoading=!0},showModal:function(e,t){var r=this,a={};"export"===e?a={type:e,selectedExportOption:"",title:"Export framework",exportOptions:this.frameworkExportOptions,text:"Select a file format to export your framework. Files download locally.",onConfirm:function(e){return r.exportObject(e)}}:"duplicate"===e&&(a={type:e,title:"Duplicate framework",text:"A framework has already been imported under the name "+t.name+". Do you want to overwrite it?",options:["Overwrite framework","Choose another name"],currentName:t.name,onConfirm:function(e){return r.savePdfImport(t,e)},onCancel:function(){return r.cancelImport()}}),this.$modal.show(a)},exportObject:function(e){var t;t=!1===EcRepository.shouldTryUrl(this.framework.id)?EcCrypto.md5(this.framework.id):this.framework.getGuid();var r=this.repo.selectedServer+"data/"+t;"asn"===e?this.exportAsn(r):"jsonld"===e?this.exportJsonld(r):"rdfQuads"===e?this.exportRdfQuads(r):"rdfJson"===e?this.exportRdfJson(r):"rdfXml"===e?this.exportRdfXml(r):"turtle"===e?this.exportTurtle(r):"ctdlasnJsonld"===e?this.exportCtdlasnJsonld(r):"ctdlasnCsv"===e?this.exportCtdlasnCsv(r):"csv"===e?this.exportCsv():"case"===e&&this.exportCasePackages(t)},switchToRemoteServerTab:function(){},switchToPasteTextTab:function(){},switchToUrlSourceTab:function(){},unsupportedFile:function(e){var t=e;this.statusType="error",this.status="File type "+t+" is unsupported in this workflow",this.errors.push(this.status),this.showErrors=!0,this.processingFile=!1},updateUrl:function(e){"url"===this.method?this.url=e:"server"===this.method&&(this.serverUrl=e)},importSuccess:function(){"true"!==this.queryParams.concepts?(this.status="Competency detected",this.showImportDetailsView=!0,this.showImportPreviewView=!1,this.showImportLightView=!1):(this.status="Concept Scheme Imported.",this.spin=!1)},importDetailsAccept:function(){this.status="Edit and approve",this.showImportDetailsView=!1,this.showImportPreviewView=!0},importPreviewAccept:function(){this.status="Import complete!",this.showImportLightView=!0,this.showImportPreviewView=!1},cancelImport:function(){this.showImportPreviewView=!1,this.showImportDetailsView=!1,this.showImportLightView=!1,this.errors=[],this.showErrors=!1,this.framework=null,this.file=null,this.processingFile=!1,this.processingSuccess=!1,this.status="Ready",this.spin=!0},onUploadFiles:function(e){this.file=e,this.fileChange(this.file)},onClearFiles:function(){this.file=null},openFramework:function(){"true"===this.queryParams.concepts?(this.$store.commit("framework",this.framework),this.$router.push({name:"conceptScheme",params:{frameworkId:this.framework.shortId()}})):(this.$store.commit("framework",this.framework),this.$router.push({name:"framework",params:{frameworkId:this.framework.shortId()}}))},fileChange:function(e){console.log(e),this.processingFile=!0,this.processingSuccess=!1,this.analyzeImportFile(),this.firstImport=!0,this.spin=!0},analyzeImportFile:function(){var e=this,t=this.file[0];t.name.endsWith(".csv")?"true"===this.queryParams.concepts?CTDLASNCSVConceptImport.analyzeFile(t,(function(t,r){e.importType="conceptcsv",e.status="Import "+t+" concept schemes and "+r+" concepts.",e.spin=!1}),(function(t){e.statusType="error",e.status=t})):CTDLASNCSVImport.analyzeFile(t,(function(t,r){e.importType="ctdlasncsv",e.status="Import "+t+" frameworks and "+r+" competencies.",e.spin=!1}),(function(r){CSVImport.analyzeFile(t,(function(r){e.importType="csv",e.importFrameworkName=t.name.replace(".csv","");for(var a=0;a<r[0].length;a++){var n={};n.name=r[0][a],n.index=a,e.csvColumns.push(n),-1!==n.name.toLowerCase().indexOf("name")&&(e.importCsvColumnName=n),-1!==n.name.toLowerCase().indexOf("description")&&(e.importCsvColumnDescription=n),-1!==n.name.toLowerCase().indexOf("scope")&&(e.importCsvColumnScope=n),-1!==n.name.toLowerCase().indexOf("id")&&(e.importCsvColumnId=n)}e.processingFile=!1,e.status=(e.competencyCount=r.length-1)+" Competencies Detected."}),(function(t){e.statusType="error",e.status=t}))})):t.name.endsWith(".json")||t.name.endsWith(".jsonld")?this.analyzeJsonLdFramework(t,(function(t,r){var a=!1;"ctdlasnConcept"===r?"true"===e.queryParams.concepts?(e.status="1 Concept Scheme Detected.",e.importType="ctdlasnjsonld",e.spin=!1):(e.status="Concept Schemes must be imported in the concept scheme editor.",a=!0):"true"!==e.queryParams.concepts?(e.importType="ctdlasnjsonld",e.status="1 Framework and "+(EcObject.keys(t).length-1)+" Competencies Detected.",e.spin=!1):(e.status="Frameworks must be imported in the competency editor.",a=!0),e.competencyCount=EcObject.keys(t).length,(a||"ctdlasn"!==r&&"ctdlasnConcept"!==r)&&(a||(e.status="Context is not CTDL-ASN"))}),(function(r){ASNImport.analyzeFile(t,(function(t){e.importType="asn",e.status="1 Framework and "+EcObject.keys(t).length+" Competencies Detected.",e.competencyCount=EcObject.keys(t).length,e.spin=!1}),(function(t){e.status=t}))})):t.name.endsWith(".xml")?MedbiqImport.analyzeFile(t,(function(r){e.importType="medbiq",e.importFrameworkName=t.name.replace(".xml",""),e.status="1 Framework and "+EcObject.keys(r).length+" Competencies Detected.",e.competencyCount=EcObject.keys(r).length,e.spin=!1}),(function(t){e.statusType="error",e.status=t})):t.name.endsWith(".pdf")?(e.importType="pdf",e.firstImport=!1,e.detailsDetected.fileType="pdf",e.status="File selected."):t.name.endsWith(".docx")&&(e.importType="pdf",e.detailsDetected.fileType="docx",e.firstImport=!1,e.status="File selected."),e.firstImport||e.importFromFile()},analyzeCsvRelation:function(e){this.csvRelationFile=this.file[0];var t=this;CSVImport.analyzeFile(this.csvRelationFile,(function(e){for(var r=0;r<e[0].length;r++){var a={};a.name=e[0][r],a.index=r,t.csvRelationColumns.push(a),-1!==a.name.toLowerCase().indexOf("source")&&(t.importCsvColumnSource=a),-1!==a.name.toLowerCase().indexOf("origin")&&(t.importCsvColumnSource=a),-1!==a.name.toLowerCase().indexOf("type")&&(t.importCsvColumnRelationType=a),-1!==a.name.toLowerCase().indexOf("target")&&(t.importCsvColumnTarget=a),-1!==a.name.toLowerCase().indexOf("destination")&&(t.importCsvColumnTarget=a)}t.relationCount=e.length-1}),(function(e){t.statusType="error",t.status=e}))},analyzeJsonLdFramework:function(e,t,r){if(null!=e)if(null!=e["name"]){var a=new FileReader;a.onload=function(e){var a=e["target"]["result"],n=JSON.parse(a);n["@graph"]?"http://credreg.net/ctdlasn/schema/context/json"===n["@context"]||"http://credreg.net/ctdl/schema/context/json"===n["@context"]||"https://credreg.net/ctdlasn/schema/context/json"===n["@context"]||"https://credreg.net/ctdl/schema/context/json"===n["@context"]?-1!==n["@graph"][0]["@type"].indexOf("Concept")?t(n["@graph"],"ctdlasnConcept"):t(n["@graph"],"ctdlasn"):t(n["@graph"],null):r("Invalid file")},a.readAsText(e,"UTF-8")}else r("Invalid file");else r("No file to analyze")},importMedbiq:function(){var e=EcIdentityManager.ids[0],t=new EcFramework;null!=e&&t.addOwner(e.ppk.toPk()),null!=this.queryParams.newObjectEndpoint?t.generateShortId(null==this.queryParams.newObjectEndpoint?this.repo.selectedServer:this.queryParams.newObjectEndpoint):t.generateId(null==this.queryParams.newObjectEndpoint?this.repo.selectedServer:this.queryParams.newObjectEndpoint),t["schema:dateCreated"]=(new Date).toISOString(),t.setName(this.importFrameworkName),t.setDescription(this.importFrameworkDescription);var r=this;MedbiqImport.importCompetencies(null==this.queryParams.newObjectEndpoint?this.repo.selectedServer:this.queryParams.newObjectEndpoint,e,(function(e){for(var a=0;a<e.length;a++)t.addCompetency(e[a].shortId());r.repo.saveTo(t,(function(e){r.file.splice(0,1),r.file.length>0?(r.firstImport=!1,r.analyzeImportFile()):(r.framework=t,r.spitEvent("importFinished",t.shortId(),"importPage"))}),(function(e){r.statusType="error",r.status=e}))}),(function(e){r.statusType="error",r.status=e}),(function(e){r.status=e.competencies+"/"+r.competencyCount+" competencies imported."}),r.repo)},importAsn:function(){var e=EcIdentityManager.ids[0],t=this;ASNImport.importCompetencies(this.repo.selectedServer,e,!0,(function(e,r){t.file.splice(0,1),t.file.length>0?(t.firstImport=!1,t.analyzeImportFile()):(t.framework=r,t.spitEvent("importFinished",r.shortId(),"importPage"))}),(function(e){t.statusType="error",t.status=e}),(function(e){t.statusType="info",t.status=e.competencies+"/"+t.competencyCount+" competencies imported."}),t.repo)},importCtdlAsnCsv:function(){var e=null;EcIdentityManager.ids.length>0&&(e=EcIdentityManager.ids[0]);var t=this;CTDLASNCSVImport.importFrameworksAndCompetencies(t.repo,t.file[0],(function(e,r,a){if(!0===t.queryParams.ceasnDataFields)for(var n=0;n<e.length;n++)null==e[n]["schema:inLanguage"]||e[n]["schema:inLanguage"];var s=e.concat(r).concat(a);t.statusType="info",t.status="Saving "+s.length+" objects.",t.repo.multiput(s,(function(){for(var r=0;r<e.length;r++)t.framework=e[r],t.importSuccess(),t.spitEvent("importFinished",e[r].shortId(),"importPage");t.file.splice(0,1),t.file.length>0&&(t.firstImport=!1,t.analyzeImportFile())}),(function(e){t.statusType="error",t.status=e}))}),(function(e){t.statusType="error",t.status=e}),e)},importPdf:function(){var e=this,t=new FormData;t.append(e.file[0].name,e.file[0]),EcRemote.postExpectingObject("https://t3.cassproject.org/service/parse/","docx",t,(function(t){var r=new UUID(3,"nil",t.name).format(),a=new EcFramework;a.assignId(e.repo.selectedServer,r),e.repo.search('(@id:"'+a.shortId()+'") AND (@type:Framework)',(function(){}),(function(r){console.log(r),r.length>0?e.showModal("duplicate",t):e.savePdfImport(t)}),(function(e){console.error(e)}))}),console.error),e.statusType="info",e.status="Importing Framework..."},savePdfImport:function(e,t){var r=this,a=[],n=new EcFramework,s=t||e.name;n.setName(s),n.setDescription(e.description);var o=new UUID(3,"nil",s).format();n.assignId(r.repo.selectedServer,o),n.competency=[],n.relation=[],n.level=[],a.push(n),console.log(e),console.log(JSON.parse(n.toJson()));var i={};if(!e.competencies)return r.showErrors=!0,r.status="Error importing competencies.",r.statusType="error",r.errors.push("Error importing competencies, no competencies found in file."),void(r.processingFile=!1);r.detailsDetected.competencies=e.competencies.length;for(var c=0;c<e.competencies.length;c++){var l=new EcCompetency;l.assignId(r.repo.selectedServer,e.competencies[c].id),i[e.competencies[c].id]=l.shortId(),null!=e.competencies[c].name&&l.setName(e.competencies[c].name.trim()),e.competencies[c].name!==e.competencies[c].description&&e.competencies[c].description&&l.setDescription(e.competencies[c].description.trim()),n.competency.push(l.shortId()),a.push(l)}for(c=0;c<e.relation.length;c++){l=new EcAlignment;l.assignId(r.repo.selectedServer,e.relation[c].source+"_"+e.relation[c].relationType+"_"+e.relation[c].target),l.source=i[e.relation[c].source],l.target=i[e.relation[c].target],l.relationType=e.relation[c].relationType,void 0!==l.source&&void 0!==l.target?(n.relation.push(l.shortId()),a.push(l)):console.log(JSON.parse(l.toJson()))}r.repo.multiput(a,(function(){r.framework=n,r.status="",r.importSuccess()}),console.error),r.statusType="info",r.status="Writing Framework to CaSS..."},importCsv:function(){var e=this.file[0],t=this.csvRelationFile,r=EcIdentityManager.ids[0],a=null==this.queryParams.newObjectEndpoint?this.repo.selectedServer:this.queryParams.newObjectEndpoint,n=new EcFramework;null!=r&&n.addOwner(r.ppk.toPk()),null!==this.queryParams.newObjectEndpoint?n.generateShortId(a):n.generateId(a),n["schema:dateCreated"]=(new Date).toISOString(),n.setName(this.importFrameworkName),n.setDescription(this.importFrameworkDescription);var s=this;CSVImport.importCompetencies(e,a,r,this.importCsvColumnName.index,this.importCsvColumnDescription.index,this.importCsvColumnScope.index,this.importCsvColumnId.index,t,this.importCsvColumnSource.index,this.importCsvColumnRelationType.index,this.importCsvColumnTarget.index,(function(e,t){n.competency=[],n.relation=[];for(var r=0;r<e.length;r++)n.competency.push(e[r].shortId());for(r=0;r<t.length;r++)n.relation.push(t[r].shortId());repo.saveTo(n,(function(e){s.file.splice(0,1),s.file.length>0?(s.firstImport=!1,s.analyzeImportFile()):(s.framework=n,s.importSuccess(),s.spitEvent("importFinished",n.shortId(),"importPage"))}),(function(e){s.statusType="error",s.status=e}))}),(function(e){s.statusType="error",s.status=e}),(function(e){null!=e.relations&&void 0!==e.relations?(s.statusType="info",s.status=e.relations+"/"+s.relationCount+" relations imported."):null!=e.competencies&&void 0!==e.competencies?(s.statusType="info",s.status=e.competencies+"/"+s.competencyCount+" competencies imported."):(s.statusType="info",s.status="Importing...")}),!1,s.repo)},importJsonLd:function(e){var t=new FormData;if(null!=e&&void 0!==e)t.append("data",JSON.stringify(e));else{var r=this.file[0];t.append("file",r)}var a=EcIdentityManager.ids[0];null!=a&&t.append("owner",a.ppk.toPk().toPem());var n=this;n.framework=null,EcRemote.postInner(this.repo.selectedServer,"ctdlasn",t,null,(function(e){if(-1!==e.indexOf("ctdlasn")){var t=e.substring(0,e.indexOf("ctdlasn")),r=e.substring(e.indexOf("ctdlasn")+7);e=t+"data"+r}var a;a="true"===n.queryParams.concepts?EcConceptScheme.getBlocking(e):EcFramework.getBlocking(e),n.importSuccess(),n.spitEvent("importFinished",a.shortId(),"importPage"),null!=n.file&&n.file.splice(0,1),n.file.length>0&&(n.firstImport=!1,n.analyzeImportFile())}),(function(e){n.statusType="error",n.status="Import failed. Check your import file for any errors.",console.log(e.statusText)})),n.statusType="info","true"===n.queryParams.concepts?n.status="Importing Concept Scheme":n.status="Importing Framework"},importCtdlAsnConceptCsv:function(){var e=this,t=null;EcIdentityManager.ids.length>0&&(t=EcIdentityManager.ids[0]),CTDLASNCSVConceptImport.importFrameworksAndCompetencies(e.repo,e.file[0],(function(t,r){if("true"===e.queryParams.ceasnDataFields)for(var a=0;a<t.length;a++)null!=t[a]["dcterms:language"]&&void 0!==t[a]["dcterms:language"]||(e.setDefaultLanguage(),t[a]["dcterms:language"]=defaultLanguage);var n=t.concat(r);e.status="Saving "+n.length+" objects.",e.repo.multiput(n,(function(){for(var r=0;r<t.length;r++)e.spitEvent("importFinished",t[r].shortId(),"importPage"),e.importSuccess()}),(function(t){e.statusType="error",e.status="Failed to save: "+t,console.error(t)}))}),(function(t){e.statusType="error",console.error(t)}),t)},importFromFile:function(){this.spin=!0,"csv"===this.importType?this.importCsv():"ctdlasncsv"===this.importType?this.importCtdlAsnCsv():"conceptcsv"===this.importType?this.importCtdlAsnConceptCsv():"ctdlasnjsonld"===this.importType?this.importJsonLd():"asn"===this.importType?this.importAsn():"pdf"===this.importType?this.importPdf():"medbiq"===this.importType&&this.importMedbiq()},connectToServer:function(){this.caseDocs.splice(0,this.caseDocs.length),this.caseDetectEndpoint()},caseDetectEndpoint:function(){var e=this;this.serverUrl.endsWith("/")||(this.serverUrl+="/"),this.get(this.serverUrl,"ims/case/v1p0/CFDocuments",{Accept:"application/json"},(function(t){e.caseGetDocsSuccess(t)}),(function(t){e.caseGetServerSide()}))},caseGetDocsSuccess:function(e){if(e=JSON.parse(e),null==e.CFDocuments)me.statusType="error",this.status="No frameworks found. Please check the URL and try again.";else{this.status=e.CFDocuments.length+" frameworks detected.";for(var t=0;t<e.CFDocuments.length;t++){var r=e.CFDocuments[t],a={};a.name=r.title,a.id=r.uri,a.identifier=r.identifier,a.loading=!1,a.success=!1,a.error=!1,a.checked=!1,this.caseDocs.push(a)}this.caseCancel=!1}},caseGetServerSide:function(){var e=this;EcRemote.getExpectingString(this.repo.selectedServer,"ims/case/getDocs?url="+this.serverUrl,(function(t){e.caseGetDocsSuccess(t)}),(function(t){e.statusType="error",e.status="No frameworks found. Please check the URL and try again."}))},importCase:function(){for(var e=this.caseDocs.length-1;e>=0;e--)this.caseDocs[e].checked?!1===this.caseDocs[e].success&&!1===this.caseDocs[e].error&&(this.caseDocs[e].loading=!0):this.caseDocs.splice(e,1);if(!this.caseCancel){var t=0,r=null;for(e=0;e<this.caseDocs.length;e++)!0===this.caseDocs[e].loading&&(t++,null==r&&(r=e));if(0===t)this.statusType="success",this.status="Import finished.";else{var a=this,n=this.caseDocs[r].id,s=this.caseDocs[r].identifier,o=EcIdentityManager.ids[0],i=new FormData;null!=o&&i.append("owner",o.ppk.toPk().toPem()),EcRemote.postInner(this.repo.selectedServer,"ims/case/harvest?caseEndpoint="+this.serverUrl+"&dId="+s,i,null,(function(e){a.caseDocs[r].loading=!1,a.caseDocs[r].success=!0,EcFramework.get(n,(function(e){a.framework=e,a.spitEvent("importFinished",e.shortId(),"importPage")}),console.error),a.importCase()}),(function(e){a.caseDocs[r].loading=!1,a.caseDocs[r].error=!0,a.importCase()}))}}},cancelCase:function(){this.caseCancel=!0;for(var e=null,t=0;t<this.caseDocs.length;t++)!0===this.caseDocs[t].loading&&(null==e?e=t:(this.caseDocs[t].loading=!1,this.caseDocs[t].error=!0));this.cancelImport(),this.status="Import Canceled."},parseText:function(){},importFromUrl:function(){var e=this;EcRemote.getExpectingString(this.url,null,(function(t){t=JSON.parse(t);var r=t["@graph"];if(null==r)return e.statusType="error",void(e.status="URL must have an '@graph' field at the top level.");e.importJsonLd(t),-1!==r[0]["@type"].indexOf("Concept")&&(e.status="Competency Editor cannot be used to import concept schemes.")}),(function(t){t?(e.statusType="error",e.status=t):(e.statusType="error",e.status="Import Error")}))},mounted:function(){}}},ot=st,it=(a("6bed"),Object(c["a"])(ot,Ce,ke,!1,null,null,null)),ct=it.exports,lt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-framework"},[r("Thing",{attrs:{obj:e.framework,repo:e.repo,parentNotEditable:"true"===e.queryParams.view}}),e.timestamp?r("span",{staticClass:"info-tag",attrs:{title:new Date(e.timestamp)}},[e._v("Last modified "+e._s(e.lastModified))]):e._e(),e.framework["schema:dateCreated"]?r("span",{staticClass:"info-tag",attrs:{title:new Date(e.framework["schema:dateCreated"])}},[e._v("Created "+e._s(e.$moment(e.framework["schema:dateCreated"]).fromNow()))]):e._e(),e.framework["Approved"]?r("span",{staticClass:"info-tag",attrs:{title:e.framework["Approved"]}},[e._v("Approved")]):e._e(),e.framework["Published"]?r("span",{staticClass:"info-tag",attrs:{title:e.framework["Published"]}},[e._v("Published")]):e._e(),e.selectAllButton?r("button",{on:{click:function(t){e.selectAll=!e.selectAll}}},[e._v("\n        Select All\n    ")]):e._e(),e.selectButtonText?r("button",{on:{click:e.selectButton}},[e._v("\n        "+e._s(e.selectButtonText)+"\n    ")]):e._e(),r("hr"),r("ConceptHierarchy",{attrs:{container:e.framework,containerType:"ConceptScheme",editable:"true"!==e.queryParams.view,repo:e.repo,queryParams:e.queryParams,exportOptions:e.conceptExportOptions,highlightList:e.highlightCompetency,selectMode:null!=e.selectButtonText,selectAll:e.selectAll}})],1)},dt=[],pt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"e-Hierarchy"},[e.hierarchy?r("ul",{staticClass:"e-Hierarchy-ul"},[r("draggable",{attrs:{disabled:1!=e.canEdit,group:{name:"test"}},on:{start:e.beginDrag,end:e.endDrag},model:{value:e.hierarchy,callback:function(t){e.hierarchy=t},expression:"hierarchy"}},e._l(e.hierarchy,(function(t){return r("HierarchyNode",{key:t.obj.id,attrs:{obj:t.obj,dragging:e.dragging,canEdit:e.canEdit,hasChild:t.children,profile:e.profile,exportOptions:e.exportOptions,highlightList:e.highlightList,selectMode:e.selectMode,selectAll:e.selectAll}},[e._t("default")],2)})),1)],1):e._e(),e.canEdit?r("i",{staticClass:"drag-footer fa fa-plus",on:{click:function(t){e.add(e.container.shortId())}}}):e._e()])},ht=[],mt={name:"ConceptHierarchy",props:{container:Object,containerType:String,editable:Boolean,repo:Object,profile:Object,queryParams:Object,exportOptions:Array,highlightList:Array,selectMode:Boolean,selectAll:Boolean},data:function(){return{structure:[],once:!0,dragging:!1,controlOnStart:!1}},components:{HierarchyNode:A,draggable:S.a},mixins:[B["a"]],computed:{hierarchy:function(){var e=this;if(null==this.container)return null;if(!this.once)return this.structure;console.log("Computing hierarchy.");var t=[];return null!=this.container["skos:hasTopConcept"]&&(t=t.concat(this.container["skos:hasTopConcept"])),t.length>0?this.repo.multiget(t,(function(t){e.computeHierarchy()}),console.error,console.log):e.computeHierarchy(),this.structure},canEdit:function(){return!0===this.editable&&this.container.canEditAny(EcIdentityManager.getMyPks())}},watch:{container:{handler:function(){this.once=!0},deep:!0}},methods:{computeHierarchy:function(){if(this.structure.splice(0,this.structure.length),null==this.container)return r;if(null!==this.container["skos:hasTopConcept"]&&void 0!==this.container["skos:hasTopConcept"])for(var e=0;e<this.container["skos:hasTopConcept"].length;e++){var t=EcConcept.getBlocking(this.container["skos:hasTopConcept"][e]);this.structure.push({obj:t,children:[]}),t["skos:narrower"]&&this.addChildren(this.structure,t,e)}this.once=!1},addChildren:function(e,t,r){for(var a=0;a<t["skos:narrower"].length;a++){var n=EcConcept.getBlocking(t["skos:narrower"][a]);e[r].children.push({obj:n,children:[]}),n&&n["skos:narrower"]&&this.addChildren(e[r].children,n,a)}},beginDrag:function(){this.dragging=!0,void 0!==event&&(this.controlOnStart=event.originalEvent.ctrlKey||event.originalEvent.shiftKey)},endDrag:function(e){console.log(e.oldIndex,e.newIndex);var t=null,r=0;e.from.id===e.to.id?(e.newIndex<this.hierarchy.length&&(t=this.hierarchy[e.newIndex].obj.shortId()),r=1):void 0===e.to.children[e.newIndex]?t=e.to.id:e.newIndex+1<e.to.children.length&&(t=e.to.children[e.newIndex+1].id),this.move(this.hierarchy[e.oldIndex].obj.shortId(),t,e.from.id,e.to.id,!this.controlOnStart,r)},move:function(e,t,r,a,n,s){this.once=!0;var o=this;if(r===a){var i=EcConcept.getBlocking(a),c="skos:narrower";null===i&&(i=this.container,c="skos:hasTopConcept");var l=i[c].indexOf(e);if(i[c].splice(l,1),null==t||void 0===t)EcArray.isArray(i[c])||(i[c]=[]),i[c].push(e);else{var d=i[c].indexOf(t);i[c].splice(d,0,e)}this.repo.saveTo(i,(function(){o.computeHierarchy()}),console.error)}else{var p=EcConcept.getBlocking(e),h=EcConcept.getBlocking(r),m="skos:narrower",u="skos:broader",f=EcConcept.getBlocking(a),g="skos:narrower",w="skos:broader";null===h&&(h=this.container,m="skos:hasTopConcept",u="skos:topConceptOf"),null===f&&(f=this.container,g="skos:hasTopConcept",w="skos:topConceptOf");l=h[m].indexOf(e);h[m].splice(l,1),r&&p[u]?(EcArray.setRemove(p[u],r),0===p[u].length&&delete p[u]):delete p[u],this.repo.saveTo(h,(function(){if(null==t||void 0===t)EcArray.isArray(f[g])||(f[g]=[]),f[g].push(e);else{var r=f[g].indexOf(t);f[g].splice(r,0,e)}EcArray.isArray(p[w])||(p[w]=[]),a?p[w].push(a):p[w].push(o.container.shortId()),o.repo.saveTo(f,(function(){o.repo.saveTo(p,console.log,console.error),o.computeHierarchy()}),console.log)}),console.error)}this.dragging=!1},add:function(e){var t=this,r=new EcConcept;if(this.queryParams.newObjectEndpoint?r.generateShortId(newObjectEndpoint):r.generateId(this.repo.selectedServer),r["schema:dateCreated"]=(new Date).toISOString(),null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&r.addOwner(EcIdentityManager.ids[0].ppk.toPk()),this.setDefaultLanguage(),r["skos:prefLabel"]={"@language":this.$store.state.editor.defaultLanguage,"@value":"New Concept"},r["skos:inScheme"]=this.container.shortId(),e===this.container.shortId())EcArray.isArray(this.container["skos:hasTopConcept"])||(this.container["skos:hasTopConcept"]=[]),this.container["skos:hasTopConcept"].push(r.shortId()),r["skos:topConceptOf"]=this.container.shortId(),this.container["schema:dateModified"]=(new Date).toISOString(),!0===this.$store.state.editor.private&&(r=EcEncryptedValue.toEncryptedValue(r),!0!==EcEncryptedValue.encryptOnSaveMap[t.container.id]&&(t.container=EcEncryptedValue.toEncryptedValue(t.container))),this.repo.saveTo(r,(function(){t.repo.saveTo(t.container,(function(){t.once=!0}),console.error)}),console.error);else{r["skos:broader"]=[e];var a=EcConcept.getBlocking(e);EcArray.isArray(a["skos:narrower"])||(a["skos:narrower"]=[]),a["skos:narrower"].push(r.shortId()),this.container["schema:dateModified"]=(new Date).toISOString(),!0===this.$store.state.editor.private&&(r=EcEncryptedValue.toEncryptedValue(r),!0!==EcEncryptedValue.encryptOnSaveMap[a.id]&&(a=EcEncryptedValue.toEncryptedValue(a)),!0!==EcEncryptedValue.encryptOnSaveMap[t.container.id]&&(t.container=EcEncryptedValue.toEncryptedValue(t.container))),this.repo.saveTo(r,(function(){t.repo.saveTo(a,(function(){t.repo.saveTo(t.container,(function(){t.once=!0}),console.error)}),console.error)}),console.error)}console.log("Added node: ",JSON.parse(r.toJson()))}}},ut=mt,ft=Object(c["a"])(ut,pt,ht,!1,null,null,null),gt=ft.exports,wt={name:"ConceptScheme",props:{exportType:String,queryParams:Object},mixins:[B["a"]],data:function(){return{repo:window.repo,framework:null,schemeExportLink:null,schemeExportGuid:null,conceptExportOptions:[{name:"SKOS (JSON-LD)",value:"jsonld"},{name:"SKOS (RDF Quads)",value:"rdfQuads"},{name:"SKOS (RDF+JSON)",value:"rdfJson"},{name:"SKOS (RDF+XML)",value:"rdfXml"},{name:"SKOS (Turtle)",value:"turtle"}],highlightCompetency:null,selectButtonText:null,selectAllButton:!1,selectAll:!1,selectedArray:[]}},computed:{timestamp:function(){return this.framework.getTimestamp()?this.framework.getTimestamp():this.framework["schema:dateModified"]?this.framework["schema:dateModified"]:null},lastModified:function(){return null==this.framework?"Unknown.":this.timestamp?this.$moment(this.timestamp).fromNow():null},shortId:function(){return this.$store.state.editor.framework.shortId()}},components:{Thing:w["default"],ConceptHierarchy:gt},created:function(){this.refreshPage()},watch:{exportType:function(){"jsonld"===this.exportType?this.exportJsonld(this.schemeExportLink):"rdfQuads"===this.exportType?this.exportRdfQuads(this.schemeExportLink):"rdfJson"===this.exportType?this.exportRdfJson(this.schemeExportLink):"rdfXml"===this.exportType?this.exportRdfXml(this.schemeExportLink):"turtle"===this.exportType?this.exportTurtle(this.schemeExportLink):"ctdlasnJsonld"===this.exportType&&this.exportCtdlasnJsonld(this.schemeExportLink)},shortId:function(){this.refreshPage()}},methods:{refreshPage:function(){this.framework=this.$store.state.editor.framework,!1===EcRepository.shouldTryUrl(this.framework.id)?this.schemeExportGuid=EcCrypto.md5(this.framework.id):this.schemeExportGuid=this.framework.getGuid(),this.schemeExportLink=this.repo.selectedServer+"data/"+this.schemeExportGuid,this.highlightCompetency=[],this.queryParams.highlightCompetency&&(EcArray.isArray(highlightCompetency)?this.highlightCompetency=this.queryParams.highlightCompetency:this.highlightCompetency=[this.queryParams.highlightCompetency]),this.queryParams.singleSelect&&(this.selectButtonText=this.queryParams.singleSelect),this.queryParams.select&&(""!==this.queryParams.select&&"select"!==this.queryParams.select&&(this.selectButtonText=this.queryParams.select),this.selectAllButton=!0)},download:function(e,t){var r=new Blob([t],{type:"text/plain;charset=utf-8"});he()(r,e)},exportJsonld:function(e){window.open(e,"_blank")},exportRdfQuads:function(e){var t=this.getDisplayStringFrom(this.framework["dcterms:title"]),r=this;this.get(e,null,{Accept:"text/n4"},(function(e){r.download(t+".n4",e)}),(function(e){console.log(e)}))},exportRdfJson:function(e){var t=this.getDisplayStringFrom(this.framework["dcterms:title"]),r=this;this.get(e,null,{Accept:"application/rdf+json"},(function(e){r.download(t+".rdf.json",e)}),(function(e){console.log(e)}))},exportRdfXml:function(e){var t=this.getDisplayStringFrom(this.framework["dcterms:title"]),r=this;this.get(e,null,{Accept:"application/rdf+xml"},(function(e){r.download(t+".rdf.xml",e)}),(function(e){console.log(e)}))},exportTurtle:function(e){var t=this.getDisplayStringFrom(this.framework["dcterms:title"]),r=this;this.get(e,null,{Accept:"text/turtle"},(function(e){r.download(t+".turtle",e)}),(function(e){console.log(e)}))},exportCtdlasnJsonld:function(e){window.open(e.replace("/data/","/ceasn/"),"_blank")},getDisplayStringFrom:function(e){return null!=e&&EcArray.isArray(e)&&e.length>0&&(e=e[0]),null!=e&&EcObject.isObject(e)&&e.hasOwnProperty("@value")?e["@value"]:e},deleteObject:function(e){console.log("deleting "+e.id);var t=this;if(e.shortId()===this.framework.shortId()){var r=this.framework;this.repo.deleteRegistered(r,(function(e){t.spitEvent("frameworkDeleted",r.shortId(),"editFrameworkSection"),EcConcept.search(t.repo,'skos\\:inScheme:"'+r.shortId()+'"',(function(e){for(var r=0;r<e.length;r++)t.repo.deleteRegistered(e[r],console.log,console.error)}),console.error),t.$store.commit("framework",null),t.$router.push({name:"frameworks"})}),console.log)}else this.deleteConceptInner(e),this.spitEvent("conceptDeleted",e.shortId(),"editFrameworkPage"),this.framework["schema:dateModified"]=(new Date).toISOString(),this.$store.commit("selectedCompetency",null)},deleteConceptInner:function(e){var t=this;if(null!=e["skos:broader"])for(var r=0;r<e["skos:broader"].length;r++)EcConcept.get(e["skos:broader"][r],(function(r){EcArray.setRemove(r["skos:narrower"],e.shortId()),!0===t.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[r.id]&&(r=EcEncryptedValue.toEncryptedValue(r)),repo.saveTo(r,(function(){t.$store.commit("framework",t.framework)}),console.error)}),console.error);if(null!=e["skos:narrower"])for(r=0;r<e["skos:narrower"].length;r++)EcConcept.get(e["skos:narrower"][r],(function(e){t.deleteConceptInner(e)}),console.error);if(null!=e["skos:topConceptOf"]){EcArray.setRemove(this.framework["skos:hasTopConcept"],e.shortId());var a=this.framework;!0===this.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[a.id]&&(a=EcEncryptedValue.toEncryptedValue(a)),repo.saveTo(a,(function(){t.$store.commit("framework",t.framework)}),console.error)}repo.deleteRegistered(e,(function(){t.$store.commit("framework",t.framework)}),console.error)},exportObject:function(e,t){var r;r=!1===EcRepository.shouldTryUrl(e.id)?EcCrypto.md5(e.id):e.getGuid();var a=this.repo.selectedServer+"data/"+r;"jsonld"===t?this.exportJsonld(a):"rdfQuads"===t?this.exportRdfQuads(a):"rdfJson"===t?this.exportRdfJson(a):"rdfXml"===t?this.exportRdfXml(a):"turtle"===t&&this.exportTurtle(a)},select:function(e,t){t?EcArray.setAdd(this.selectedArray,e):EcArray.setRemove(this.selectedArray,e)}}},vt=wt,yt=(a("e516"),Object(c["a"])(vt,lt,dt,!1,null,"1258c6f4",null)),Ct=yt.exports;n["a"].use(s["a"]);t["a"]=new s["a"]({mode:"history",base:"/cass-editor/",routes:[{path:"/",name:"frameworks",component:H,alias:"/cass-editor/"},{path:"/about",name:"about",component:p},{path:"/framework",name:"framework",component:te},{path:"/import",name:"import",component:ct},{path:"/organizations",name:"organizations",component:ie},{path:"/organization",name:"organization",component:ye},{path:"/test",name:"test",component:q},{path:"/conceptScheme",name:"conceptScheme",component:Ct}]})},4221:function(e,t,r){"use strict";var a=r("3305"),n=r.n(a);n.a},"4c4a":function(e,t,r){"use strict";var a=r("4089"),n=r.n(a);n.a},5:function(e,t){},"560b":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t),function(e){r("cadf"),r("551c"),r("f751"),r("097d");var t=r("2b0e"),a=r("3dfd"),n=(r("560b"),r("b3be"),r("41cb")),s=r("2f62"),o=r("f057"),i=r("c0d6");r("ccf5"),t["a"].use(o["a"]),t["a"].use(r("2ead")),t["a"].use(r("487a")),t["a"].use(s["a"]),EcRepository.caching=!0,window.repo=new EcRepository,window.repo.selectedServer="https://dev.cassproject.org/api/",e.jsonld=r("46bd"),e.base64=r("8390"),e.UUID=r("37a0"),t["a"].config.productionTip=!1,t["a"].config.warnHandler=function(e,t,r){'Invalid prop: type check failed for prop "clickToLoad". Expected Boolean, got String with value "true".'!==e&&"Avoid using non-primitive value as key, use string/number value instead."!==e&&"Duplicate keys detected: '[object Object]'. This may cause an update error."!==e&&console.error("[Vue warn]: "+e+r)},window.app=new t["a"]({router:n["a"],store:i["a"],render:function(e){return e(a["a"])}}).$mount("#app")}.call(this,r("c8ba"))},"57d0":function(e,t,r){},"5c64":function(e,t,r){"use strict";var a=r("6ee5"),n=r.n(a);n.a},6:function(e,t){},6451:function(e,t,r){"use strict";var a=r("1f05"),n=r.n(a);n.a},6722:function(e,t,r){"use strict";var a=r("7564"),n=r.n(a);n.a},"6bed":function(e,t,r){"use strict";var a=r("57d0"),n=r.n(a);n.a},"6dfa":function(e,t,r){e.exports=r.p+"a232f980bd2b7d234ddeef70c820323c.csv"},"6ee5":function(e,t,r){},7:function(e,t){},7564:function(e,t,r){},"7f6e":function(e,t,r){e.exports=r.p+"1e2ae045c7fcb4f9a9f569aad61c0b84.jsonld"},8:function(e,t){},"83a4":function(e,t,r){e.exports=r.p+"4f99388a45a48dda58f2d48209cb458c.jsonld"},8614:function(e,t,r){"use strict";var a=r("2a6f"),n=r.n(a);n.a},"872c":function(e,t,r){"use strict";r("a481"),r("386d"),r("456d"),r("7f7f"),r("ac6a"),r("f559");t["a"]={methods:{spitEvent:function(e,t,r){var a=this.framework?this.framework:this.$store.state.editor.framework,n=this.$store.state.editor.selectedCompetency,s={message:e,changed:t,selectedFramework:null==a?null:a.shortId(),selectedCompetency:null==n?null:n.shortId(),selectedFrameworkObject:null==a?null:JSON.parse(a.toJson()),selectedCompetencyObject:null==n?null:JSON.parse(n.toJson()),selectedFrameworkName:null==a?null:null==a.getName?a["dcterms:title"]:a.getName(),selectedCompetencyName:null==n?null:null==n.getName?n["skos:prefLabel"]:n.getName(),visiblePage:r};this.queryParams&&"true"===this.queryParams.ceasnDataFields&&(null!=a&&null!=a.getGuid&&(a.getGuid().startsWith("ce-")?s.selectedFrameworkCtid=null==a?null:a.getGuid():a.getGuid().matches("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$")?s.selectedFrameworkCtid=null==a?null:"ce-"+a.getGuid():s.selectedFrameworkCtid="ce-"+new UUID(3,"nil",a.shortId()).format()),null!=n&&null!=n.getGuid&&(n.getGuid().startsWith("ce-")?s.selectedCompetencyCtid=null==n?null:n.getGuid():n.getGuid().matches("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$")?s.selectedCompetencyCtid=null==n?null:"ce-"+n.getGuid():s.selectedCompetencyCtid="ce-"+new UUID(3,"nil",this.framework.shortId()+n.shortId()).format())),console.log(s),null!=parent&&this.queryParams&&null!=this.queryParams.origin&&""!==this.queryParams.origin&&parent.postMessage(s,this.queryParams.origin)},setDefaultLanguage:function(){var e;e=this.framework&&this.framework["ceasn:inLanguage"]?EcArray.isArray(this.framework["ceasn:inLanguage"])?this.framework["ceasn:inLanguage"][0]:this.framework["ceasn:inLanguage"]:this.framework&&this.framework["schema:inLanguage"]?EcArray.isArray(this.framework["schema:inLanguage"])?this.framework["schema:inLanguage"][0]:this.framework["schema:inLanguage"]:this.framework&&this.framework["dcterms:language"]?this.framework["dcterms:language"]:navigator.language||navigator.userLanguage?navigator.language||navigator.userLanguage:"en",this.$store.commit("defaultLanguage",e)},get:function(e,t,r,a,n){var s=EcRemote.urlAppend(e,t);s=EcRemote.upgradeHttpToHttps(s);var o=null;if("undefined"===typeof httpStatus){if(o=new XMLHttpRequest,o.open("GET",s,EcRemote.async),null!=r)for(var i=EcObject.keys(r),c=0;c<i.length;c++)o.setRequestHeader(i[c],r[i[c]]);var l=o;o.onreadystatechange=function(){4===l.readyState&&200===l.status&&(null!=a?a(l.responseText):4===l.readyState&&null!=n&&n(l.responseText))}}null!=o&&EcRemote.async&&(o["timeout"]=EcRemote.timeout),"undefined"!==typeof httpStatus?null!=a&&a(JSON.stringify(httpGet(s))):o.send()},resolveNameFromUrl:function(e){this.get(e,null,null,(function(e){var t=null;if(e&&(e=JSON.parse(e),e["ceterms:name"]?t=e["ceterms:name"]:e["name"]?t=e["name"]:e["schema:name"]?t=e["schema:name"]:e["title"]?t=e["title"]:e["skos:prefLabel"]?t=e["skos:prefLabel"]:e["title"]?t=e["title"]:e["@graph"]&&e["@graph"][0]&&(e["@graph"][0]["ceterms:name"]?t=e["@graph"][0]["ceterms:name"]:e["@graph"][0]["name"]?t=e["@graph"][0]["name"]:e["@graph"][0]["schema:name"]?t=e["@graph"][0]["schema:name"]:e["@graph"][0]["title"]?t=e["@graph"][0]["title"]:e["@graph"][0]["skos:prefLabel"]&&(t=e["@graph"][0]["skos:prefLabel"])),t=Thing.getDisplayStringFrom(t),EcObject.isObject(t))){var r=Object.keys(t);t=t[r[0]]}return t}),(function(e){console.log(e)}))},conditionalDelete:function(e,t){var r=this;(function(e,t){Task.asyncImmediate((function(a){void 0!==t&&null!=t||(t=0),null!=e&&void 0!==e||console.trace("ID is undefined."),t<5?EcFramework.search(r.repo,'"'+e+'"',(function(n){n.length<=0?(console.log("No references found for "+e+"... deleting."),r.repo.deleteRegistered(EcRepository.getBlocking(e),(function(e){a()}),(function(e){console.log(e),a()}))):(console.log(n.length+" references found for "+e+"... Not deleting. Will see again in another second."),a(),setTimeout((function(){r.conditionalDelete(e,t+1)}),1e3))}),console.error,{}):a()}))})(e,t)},selectButton:function(){var e=[],t=EcRemote.async;EcRemote.async=!1;for(var r=0;r<this.selectedArray.length;r++){if("true"===this.queryParams.selectVerbose&&"true"!==this.queryParams.concepts)if("ctdlasn"===this.queryParams.selectExport)n=!1===EcRepository.shouldTryUrl(this.selectedArray[r])?this.repo.selectedServer+"ceasn/"+EcCrypto.md5(this.selectedArray[r]):this.selectedArray[r].replace("/data/","/ceasn/"),this.get(n,null,null,(function(t){e.push(JSON.parse(t))}),(function(e){console.log(e)}));else e.push(JSON.parse(EcCompetency.getBlocking(this.selectedArray[r]).toJson()));else"true"===this.queryParams.selectVerbose?e.push(JSON.parse(EcConcept.getBlocking(this.selectedArray[r]).toJson())):e.push(this.selectedArray[r])}if("true"===this.queryParams.selectRelations&&this.framework.relation)for(r=0;r<this.framework.relation.length;r++){var a=EcAlignment.getBlocking(this.framework.relation[r]);EcArray.has(this.selectedArray,a.target)&&("true"===this.queryParams.selectVerbose?e.push(JSON.parse(rld.toJson())):e.push(a.shortId()))}var n,s=this.framework;"ctdlasn"===this.queryParams.selectExport&&"true"!==this.queryParams.concepts&&(null!=this.framework&&(n=!1===EcRepository.shouldTryUrl(this.framework.id)?this.repo.selectedServer+"ceasn/"+EcCrypto.md5(this.framework.id):this.framework.id.replace("/data/","/ceasn/"),this.get(n,null,null,(function(e){e=JSON.parse(e),e["@graph"]&&(s=e["@graph"][0])}),(function(e){console.log(e)}))));var o={message:"selected",selected:e,type:"true"===this.queryParams.concepts?"Concept":"Competency",selectedFramework:s};o=JSON.parse(JSON.stringify(o)),console.log(o),parent.postMessage(o,this.queryParams.origin),EcRemote.async=t},addLevel:function(e){var t=new EcLevel,r=this;null!=this.queryParams.newObjectEndpoint?t.generateShortId(this.queryParams.newObjectEndpoint):t.generateId(this.repo.selectedServer),t["schema:dateCreated"]=(new Date).toISOString(),EcIdentityManager.ids.length>0&&t.addOwner(EcIdentityManager.ids[0].ppk.toPk()),t.name="New Level",t.competency=e,"true"===this.queryParams.private&&(t=EcEncryptedValue.toEncryptedValue(t),!0!==EcEncryptedValue.encryptOnSaveMap[this.framework.id]&&(framework=EcEncryptedValue.toEncryptedValue(framework))),this.repo.saveTo(t,(function(){r.framework.addLevel(t.shortId())}),console.error)},saveFramework:function(){this.framework["schema:dateModified"]=(new Date).toISOString();var e=this.framework;this.$store.commit("framework",e),"true"===this.queryParams.private&&!0!==EcEncryptedValue.encryptOnSaveMap[e.id]&&(e=EcEncryptedValue.toEncryptedValue(e)),this.repo.saveTo(e,(function(){}),console.error)},removeLevelFromFramework:function(e){this.framework.removeLevel(e),this.conditionalDelete(e),this.saveFramework()}}}},9:function(e,t){},"91cc":function(e,t,r){},9264:function(e,t,r){"use strict";var a=r("2cc3"),n=r.n(a);n.a},"9e94":function(e,t,r){e.exports=r.p+"ccc3d217e39403dcd1f7d9aa5069c2ee.bin"},a53e:function(e,t,r){e.exports=r.p+"6fd78539e14201f2470566dbd03204f1.csv"},a8ea:function(e,t,r){e.exports=r.p+"f667b2c6eb4cc99bd15fe7cdcda91ee9.xml"},b3be:function(e,t,r){},bf34:function(e,t,r){e.exports=r.p+"de0249f9fa5fbe91488d4236bc6928e2.csv"},c0d6:function(e,t,r){"use strict";var a=r("2b0e"),n=r("2f62"),s={state:{schemata:{},schemataLookup:{},rawSchemata:{},schemaFallback:{}},mutations:{schemata:function(e,t){if(e.schemata[t.id]=t.obj,EcArray.isArray(t.obj)){e.schemataLookup[t.id]={};for(var r=0;r<t.obj.length;r++)e.schemataLookup[t.id][t.obj[r]["@id"]]=t.obj[r]}},rawSchemata:function(e,t){e.rawSchemata[t.id]=t.obj},schemaFallback:function(e,t){for(var r=0;r<t.length;r++)e.schemaFallback[t[r]["@id"]]=t[r]}},actions:{}};a["a"].use(n["a"]);var o={state:{framework:null,organization:null,selectedCompetency:null,defaultLanguage:null,webSocketBackoff:100,selectCompetencyRelation:null,selectingCompetencies:!1,private:!1,commonPathIframe:null,iframeCompetencyPathInterframework:null,iframeCompetencyPathIntraframework:null,iframeConceptPath:null,newCompetency:null},mutations:{framework:function(e,t){e.framework=t},organization:function(e,t){e.organization=t},selectedCompetency:function(e,t){e.selectedCompetency=t},defaultLanguage:function(e,t){e.defaultLanguage=t},webSocketBackoffIncrease:function(e){e.webSocketBackoff*=2},private:function(e,t){e.private=t},selectCompetencyRelation:function(e,t){e.selectCompetencyRelation=t},selectingCompetencies:function(e,t){e.selectingCompetencies=t},commonPathIframe:function(e,t){e.commonPathIframe=t},iframeCompetencyPathInterframework:function(e,t){e.iframeCompetencyPathInterframework=t},iframeCompetencyPathIntraframework:function(e,t){e.iframeCompetencyPathIntraframework=t},iframeConceptPath:function(e,t){e.iframeConceptPath=t},newCompetency:function(e,t){e.newCompetency=t}},actions:{}};t["a"]=new n["a"].Store({modules:{lode:s,editor:o}})},ce62:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="ce62"},dbb9:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"thing",class:e.editingClass},[e.clickToLoad?r("button",{staticClass:"button is-text has-text-primary",on:{click:e.load}},[e._v("\n        "+e._s(e.name?e.name:e.uri)+"\n    ")]):e.uriAndNameOnly?r("span",{attrs:{title:e.uri}},[e._v("\n        "+e._s(e.name?e.name:e.uri)+"\n    ")]):e.expandedThing?r("div",{class:["e-Thing e-"+e.shortType,e.hoverClass],on:{mouseover:function(t){return e.handleMouseOverThing()},mouseout:function(t){return e.handleMouseOutThing()}}},[e.expandedThing["@id"]?r("a",{staticClass:"e-type"},[e.shortType?r("span",{attrs:{title:e.type}},[e._v(e._s(e.shortType)+"\n            ")]):e._e()]):e.shortType?r("span",{staticClass:"e-type",attrs:{title:e.type}},[e._v(e._s(e.shortType))]):e._e(),r("div",{staticClass:"top-actions is-size-7"},[r("div",{staticClass:"info"},[e.children&&e.childrenExpanded?r("span",{staticClass:"button is-text is-small has-text-info",on:{click:function(t){return t.stopPropagation(),e.emitExpandEvent(t)}}},[e._m(0)]):e.children?r("span",{staticClass:"button is-small is-text has-text-info",on:{click:function(t){return e.emitExpandEvent(t)}}},[e._m(1)]):r("span",{staticClass:"icon has-text-info"},[r("i",{staticClass:"fas fa-circle"})])]),r("div",{staticClass:"view"},[r("div",{staticClass:"buttons"},[r("span",{staticClass:"button is-small",class:e.minimizeButtonClass,attrs:{title:"Show required properties only"},on:{click:function(t){e.showAlways=!0,e.showPossible=!1}}},[e._m(2)]),r("span",{staticClass:"button is-small",class:e.allPropertiesButtonClass,attrs:{title:"Show all properties"},on:{click:e.showEnteredProperties}},[e._m(3)]),e.canEdit?r("span",{staticClass:"button is-small",class:e.globalButtonClass,attrs:{title:"Show all available properties"},on:{click:e.showGlobal}},[e._m(4)]):e._e()])])]),e._t("default"),1==e.showAlways&&null!=e.expandedThing&&void 0!==e.expandedThing?r("ul",{staticClass:"e-Thing-always-ul e-Thing-ul",class:{highlighted:e.highlighted}},[e._l(e.alwaysProperties,(function(t,a){return r("Property",{key:a,attrs:{thing:e.thing,expandedThing:e.expandedThing,property:e.getKeyFromMap(a),expandedProperty:a,schema:t,canEdit:e.allowEdits(a),profile:e.profile,selectMode:e.selectMode},on:{editingThingEvent:function(t){return e.handleEditingEvent(t)}}})})),e._t("frameworkTags")],2):1==e.showPossible&&null!=e.expandedThing&&void 0!==e.expandedThing?r("ul",{staticClass:"e-Thing-possible-ul e-Thing-ul",class:[{highlighted:e.highlighted},{}]},e._l(e.possibleProperties,(function(t,a){return r("Property",{key:a,attrs:{thing:e.thing,expandedThing:e.expandedThing,property:e.getKeyFromMap(a),expandedProperty:a,schema:t,canEdit:e.allowEdits(a),profile:e.profile,selectMode:e.selectMode},on:{editingThingEvent:function(t){return e.handleEditingEvent(t)}}})})),1):null!=e.expandedThing&&void 0!==e.expandedThing?r("ul",{staticClass:"e-Thing-view-ul e-Thing-ul",class:{highlighted:e.highlighted}},e._l(e.viewProperties,(function(t,a){return r("Property",{key:a,attrs:{thing:e.thing,expandedThing:e.expandedThing,property:e.getKeyFromMap(a),expandedProperty:a,schema:t,canEdit:e.allowEdits(a),profile:e.profile,selectMode:e.selectMode},on:{editingThingEvent:function(t){return e.handleEditingEvent(t)}}})})),1):e._e(),r("div",{staticClass:"bottom-actions is-size-7"},[r("div",{staticClass:"info"},[r("span",{staticClass:"tags"},[e.children?r("span",{staticClass:"tag is-dark has-text-white has-text-weight-bold",attrs:{title:"Nested competencies"}},[e._v("\n                        "+e._s(e.children)+"\n                    ")]):r("span",{staticClass:"tag is-dark has-text-white has-text-weight-bold"},[e._v("\n                        0\n                    ")]),e.canEdit?r("span",{staticClass:"tag is-dark"},[e._m(5)]):r("span",{staticClass:"tag"},[e._m(6)])])]),r("div",{staticClass:"hierarchy"},[e.canEdit?r("div",{staticClass:"buttons"},[e._m(7),e._m(8),e._m(9),e._m(10)]):e._e()]),r("div",{staticClass:"action"},[e.canEdit?r("div",{staticClass:"buttons"},[e.canEdit?r("span",{staticClass:"button is-text has-text-danger is-small",attrs:{title:"Delete this "+e.thing.type.toLowerCase()},on:{click:function(t){return e.showModal("deleteObject")}}},[e._m(11)]):e._e(),e.canEdit&&"Competency"===e.thing.type?r("span",{staticClass:"button is-text has-text-warning is-small",attrs:{title:"Remove competency from framework"},on:{click:function(t){return e.showModal("removeObject")}}},[e._m(12)]):e._e(),e.exportOptions?r("span",{staticClass:"button is-text has-text-info is-small",attrs:{title:"Export competency"},on:{click:function(t){return e.showModal("export")}}},[e._m(13)]):e._e(),e.canEdit?r("span",{staticClass:"button is-text has-text-success is-small",attrs:{title:"Add competency node"},on:{click:function(t){return e.$emit("addNode")}}},[e._m(14)]):e._e(),e.canEdit&&e.iframePath?r("span",{staticClass:"button is-text has-text-dark is-small",attrs:{title:e.iframeText},on:{click:e.searchIframe}},[e._m(15)]):e._e()]):e._e()])])],2):e._e(),e.searching?r("div",{staticClass:"special-property"},[r("span",{staticClass:"icon",on:{click:e.removeIframe}},[r("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),r("center",[r("h1",[e._v(" "+e._s(e.iframeText))])]),r("iframe",{attrs:{src:e.iframePath,width:"100%"}})],1):e._e()])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-caret-down fa-2x"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fas fa-caret-right fa-2x"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon compact is-small"},[r("i",{staticClass:"fa fa-window-minimize",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon expand is-small"},[r("i",{staticClass:"fa fa-list",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon expand is-small"},[r("i",{staticClass:"fa fa-globe",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon editable is-small"},[r("i",{staticClass:"fa fa-key",attrs:{"aria-hidden":"true",title:"Is Editable"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon not-editable is-small"},[r("i",{staticClass:"fa fa-lock",attrs:{"aria-hidden":"true",title:"Not editable"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"button is-text has-text-dark",attrs:{title:"Move up a level"}},[r("span",{staticClass:"icon delete-thing"},[r("i",{staticClass:"fa fa-caret-square-up",attrs:{"aria-hidden":"true"}})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"button is-text  has-text-dark",attrs:{title:"Make child of nearest (above) sibling"}},[r("span",{staticClass:"icon remove is-small"},[r("i",{staticClass:"fa fa-caret-square-right",attrs:{"aria-hidden":"true"}})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"button is-text  has-text-dark",attrs:{title:"Move competency down"}},[r("span",{staticClass:"is-small export icon"},[r("i",{staticClass:"fa fa-caret-square-down"})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"button is-text  has-text-dark",attrs:{title:"Make sibling of current parent"}},[r("span",{staticClass:"icon add is-dark is-small"},[r("i",{staticClass:"fa fa-caret-square-left",attrs:{"aria-hidden":"true"}})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon delete-thing"},[r("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon remove is-small"},[r("i",{staticClass:"fa fa-minus-circle",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"is-small export icon"},[r("i",{staticClass:"fa fa-file-export"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon add is-dark is-small"},[r("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-dark is-small"},[r("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})])}],s=(r("ac6a"),r("456d"),r("7f7f"),r("a481"),r("f559"),r("7618")),o=(r("aef6"),r("28a5"),r("c5f6"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.thing?r("li",{class:["e-Property e-"+e.shortType,e.editingThingClass]},[r("label",{attrs:{title:e.comment}},[e.comment?r("i",{staticClass:"fa fa-info-circle",attrs:{title:e.comment,"aria-hidden":"true"}}):e._e(),r("span",{staticClass:"thing-label"},[e._v("\n            "+e._s(e.displayLabel)+"\n        ")])]),e.value&&e.show?r("ul",{staticClass:"e-Property-ul"},[e._l(e.expandedValue,(function(t,a){return r("li",{key:a,staticClass:"property-value",on:{click:function(t){return e.startEditing()}}},[e.selectMode&&"Level"===e.shortType?r("input",{directives:[{name:"model",rawName:"v-model",value:e.checked[t["@id"]],expression:"checked[item['@id']]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.checked[t["@id"]])?e._i(e.checked[t["@id"]],null)>-1:e.checked[t["@id"]]},on:{change:function(r){var a=e.checked[t["@id"]],n=r.target,s=!!n.checked;if(Array.isArray(a)){var o=null,i=e._i(a,o);n.checked?i<0&&e.$set(e.checked,t["@id"],a.concat([o])):i>-1&&e.$set(e.checked,t["@id"],a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.checked,t["@id"],s)}}}):e._e(),!e.edit&&e.isLink(t)?r("Thing",{staticClass:"related-competency",attrs:{uri:t["@id"]||t["@value"],clickToLoad:"true",parentNotEditable:!e.canEdit,profile:e.childProfile}}):e.isText(t)?e.edit&&e.isLink(t)&&e.profile&&e.profile[e.expandedProperty]&&e.profile[e.expandedProperty]["noTextEditing"]?r("span",[e._v("\n                "+e._s(t["@id"]||t["@value"])+"\n            ")]):e.edit&&"String"===typeof t&&e.profile&&e.profile[e.expandedProperty]&&e.profile[e.expandedProperty]["noTextEditing"]?r("span",[e._v("\n                "+e._s(t)+"\n            ")]):e.edit&&e.profile&&e.profile[e.expandedProperty]&&e.profile[e.expandedProperty]["noTextEditing"]?r("span",[e._v("\n                "+e._s(t["@value"])+"\n            ")]):e.edit?r("span",{staticClass:"property-string-span"},[r("PropertyString",{attrs:{index:a,property:e.property,thing:e.thing,value:t,profile:e.childProfile,langString:e.langString}})],1):e.isObject(e.expandedValue[a])&&e.expandedValue[a]["@language"]?r("span",{staticClass:"e-Property-text"},[e._v("\n                "+e._s(e.expandedValue[a]["@language"]+": "+e.expandedValue[a]["@value"])+"\n            ")]):e.isObject(e.expandedValue[a])?r("span",{staticClass:"e-Property-text"},[e._v("\n                "+e._s(e.expandedValue[a]["@value"])+"\n            ")]):r("span",{staticClass:"e-Property-text"},[e._v("\n                "+e._s(e.expandedValue[a])+"\n            ")]):r("Thing",{attrs:{obj:e.value[a],expandedObj:t,parentNotEditable:!e.canEdit,profile:e.childProfile}}),r("div",{staticClass:"editing-property-buttons"},[e.edit?r("span",{staticClass:"button is-text has-text-dark",on:{click:function(t){return e.showModal("remove",a)}}},[e._m(0,!0)]):e._e()])],1)})),e.unsaved&&e.show&&e.unsaved.length>0?r("ul",e._l(e.unsaved,(function(t,a){return r("li",{key:a},[1==e.edit?r("span",{staticClass:"input-span"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.unsaved[a],expression:"unsaved[index]"}],domProps:{value:e.unsaved[a]},on:{input:function(t){t.target.composing||e.$set(e.unsaved,a,t.target.value)}}})]):r("span",[e._v("\n                    "+e._s(t)+"\n                ")]),r("div",{staticClass:"editing-property-buttons"},[1==e.edit?r("span",{staticClass:"button",on:{click:function(t){return e.showModal("remove unsaved",a)}}},[e._m(1,!0)]):e._e()])])})),0):e._e(),r("li",{staticClass:"add-property-button"},[e.edit?r("span",{staticClass:"button is-primary is-small save-property",on:{click:e.stopEditing}},[e._m(2),r("span",{staticClass:"button-text"},[e._v("\n                    save\n                ")])]):e._e(),e.canEdit&&0==e.range.length?r("span",{staticClass:"button is-pulled-right is-small is-text has-text-info add-property",on:{click:function(t){return e.add("string")}}},[e._m(3),r("span",{staticClass:"button-text"},[e._v("\n                    Add\n                ")])]):e.canEdit?e._l(e.range,(function(t){return r("span",{key:t,staticClass:"button is-small is-text has-text-info ",attrs:{title:"Add New "+("http://www.w3.org/2000/01/rdf-schema#langString"===t?"Text":t.split("/").pop())},on:{click:function(r){e.add(t),e.startEditing()}}},[e._m(4,!0),r("span",{staticClass:"button-text"},[e._v("\n                    Add "+e._s("http://www.w3.org/2000/01/rdf-schema#langString"===t?"Text":t.split("/").pop())+"\n                ")])])})):e._e(),e.profile&&e.profile[e.expandedProperty]&&e.profile[e.expandedProperty]["iframePath"]?r("span",{staticClass:"button is-small is-primary",attrs:{title:"Search"},on:{click:function(t){return e.add("search")}}}):e._e()],2)],2):r("ul",{staticClass:"e-Property-ul"},[r("li",{staticClass:"add-property-button"},[0==e.range.length?r("button",{staticClass:"button is-small is-link has-text-info",attrs:{title:"Add New Text"},on:{click:function(t){e.add("string"),e.startEditing()}}},[e._m(5),r("span",[e._v("\n                    Add Text s\n                ")])]):e._l(e.range,(function(t){return r("button",{key:t,staticClass:"button is-small is-text has-text-info",attrs:{title:"Add New "+("http://www.w3.org/2000/01/rdf-schema#langString"===t?"Text":t.split("/").pop())},on:{click:function(r){e.add(t),e.startEditing()}}},[e._m(6,!0),r("span",[e._v("\n                    Add "+e._s("http://www.w3.org/2000/01/rdf-schema#langString"===t?"Text":t.split("/").pop())+"\n                ")])])})),e.profile&&e.profile[e.expandedProperty]&&e.profile[e.expandedProperty]["iframePath"]?r("span",{staticClass:"button is-small is-primary",attrs:{title:"Search"},on:{click:function(t){return e.add("search")}}}):e._e()],2)]),e.iframePath?r("div",{staticClass:"special-property"},[r("span",{staticClass:"icon",on:{click:e.removeIframe}},[r("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),r("center",[r("h1",[e._v(" "+e._s(e.profile[e.expandedProperty]["iframeText"]))])]),r("iframe",{attrs:{src:e.iframePath,width:"100%"}})],1):e._e()]):e._e()}),i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-trash has-text-danger",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon remove is-small"},[r("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon save is-small",attrs:{title:"Save"}},[r("i",{staticClass:"fa has-text-white fa-save",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon",attrs:{title:"Add New Text"}},[r("i",{staticClass:"fa has-text-info fa-plus",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon add-new"},[r("i",{staticClass:"fa has-text-info fa-plus",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-plus has-text-info",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon has-text-dark"},[r("i",{staticClass:"fa fa-plus has-text-info",attrs:{"aria-hidden":"true"}})])}],c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-field"},[e.computedLanguage||e.langString?r("input",{directives:[{name:"model",rawName:"v-model",value:e.computedLanguage,expression:"computedLanguage"}],ref:"language",staticClass:"text-input",domProps:{value:e.computedLanguage},on:{blur:e.blur,input:function(t){t.target.composing||(e.computedLanguage=t.target.value)}}}):e._e(),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.computedText,expression:"computedText"}],ref:"textarea",staticClass:"textarea-input",attrs:{rows:"1"},domProps:{value:e.computedText},on:{blur:e.blur,input:function(t){t.target.composing||(e.computedText=t.target.value)}}})])},l=[],d={name:"PropertyString",props:{thing:Object,expandedThing:Object,property:String,expandedProperty:String,schema:Object,index:null,langString:null},created:function(){},data:function(){var e=this.thing[this.property];return EcArray.isArray(e)?{text:this.thing[this.property][this.index],indexInternal:this.index}:{text:this.thing[this.property],indexInternal:null}},computed:{computedText:{get:function(){return EcObject.isObject(this.text)?void 0===this.text["@value"]?null:this.text["@value"]:this.text},set:function(e){EcObject.isObject(this.text)?void 0!==this.text["@value"]&&(this.text["@value"]=e):this.text=e}},computedLanguage:{get:function(){return EcObject.isObject(this.text)?void 0===this.text["@language"]?null:this.text["@language"]:null},set:function(e){EcObject.isObject(this.text)&&void 0!==this.text["@language"]&&(this.text["@language"]=e)}}},watch:{text:function(e,t){}},methods:{blur:function(){this.$parent.update(this.text,this.indexInternal)}}},p=d,h=r("2877"),m=Object(h["a"])(p,c,l,!1,null,null,null),u=m.exports,f={name:"Property",props:{thing:Object,expandedThing:Object,property:String,expandedProperty:String,schema:Object,canEdit:Boolean,profile:Object,selectMode:Boolean},data:function(){return{editingThingClass:"",edit:null,show:!0,iframePath:null,unsaved:[],checked:{},langString:!1}},components:{Thing:function(){return Promise.resolve().then(r.bind(null,"dbb9"))},PropertyString:u},created:function(){window.addEventListener("message",this.removeIframe,!1)},computed:{childProfile:function(){var e=function(e){return!!(e&&e.constructor&&e.call&&e.apply)};if(null==this.schema)return null;var t=this.schema.profile;return e(t)&&(t=t()),t},displayLabel:function(){if(null!=this.schema&&null!=this.schema["http://www.w3.org/2000/01/rdf-schema#label"]&&!EcArray.isArray(this.schema["http://www.w3.org/2000/01/rdf-schema#label"])&&!EcObject.isObject(this.schema["http://www.w3.org/2000/01/rdf-schema#label"]))return this.schema["http://www.w3.org/2000/01/rdf-schema#label"];if(null!=this.schema&&null!=this.schema["http://www.w3.org/2000/01/rdf-schema#label"]&&EcArray.isArray(this.schema["http://www.w3.org/2000/01/rdf-schema#label"])&&EcObject.isObject(this.schema["http://www.w3.org/2000/01/rdf-schema#label"][0]))return this.schema["http://www.w3.org/2000/01/rdf-schema#label"][0]["@value"];if(null!=this.schema&&null!=this.schema["http://www.w3.org/2000/01/rdf-schema#label"]&&EcObject.isObject(this.schema["http://www.w3.org/2000/01/rdf-schema#label"]))return this.schema["http://www.w3.org/2000/01/rdf-schema#label"]["@value"];var e=this.property.split(":").pop().split("/").pop();return e.replace(/([A-Z]+)/g,(function(e){return" "+e})).toLowerCase().trim().replace(/(^| )(\w)/g,(function(e){return e.toUpperCase()}))},comment:function(){return null==this.schema?null:null==this.schema["http://www.w3.org/2000/01/rdf-schema#comment"]?null:null==this.schema["http://www.w3.org/2000/01/rdf-schema#comment"][0]?null:this.schema["http://www.w3.org/2000/01/rdf-schema#comment"][0]["@value"]},type:function(){return null==this.schema?null==this.expandedThing?null:this.expandedThing["@type"][0]:this.schema["@id"]},shortType:function(){if(!this.type)return this.displayLabel;var e=this.type.split("/").pop();return-1!==e.indexOf("core#")&&(e=this.type.split("#").pop()),e},context:function(){var e=this.type.split("/");return e.pop(),e.join("/")},range:function(){if(null==this.schema)return[];var e=[],t=this.schema["http://schema.org/rangeIncludes"];if(null!=t||void 0!==t)for(var r=0;r<t.length;r++)e.push(t[r]["@id"]);return e},value:{get:function(){if(this.profile&&this.profile[this.expandedProperty]&&this.profile[this.expandedProperty]["valuesIndexed"]){var e=this.profile[this.expandedProperty]["valuesIndexed"];return e=e(),e&&e[this.thing.shortId()]?e[this.thing.shortId()]:[]}var t=this.thing[this.property];if(null!=t)return t;if(null!=this.expandedValue&&(t=this.thing[this.expandedProperty]),null!=t)return t;if(-1!==this.property.indexOf(":")){var r=this.property.split(":");r=this.$store.state.lode.rawSchemata[this.thing.context]["@context"][r[0]]+r[1],t=this.thing[r]}return t}},expandedValue:{get:function(){var e=this.expandedThing[this.expandedProperty];if(0===this.expandedProperty.indexOf("@")&&(e=[{"@value":this.thing[this.property]}]),this.profile&&this.profile[this.expandedProperty]&&this.profile[this.expandedProperty]["valuesIndexed"]){e=[];for(var t=0;t<this.value.length;t++)EcObject.isObject(this.value[t])?e.push({"@id":this.value[t].shortId()}):e.push({"@id":this.value[t]})}return e}}},methods:{stopEditing:function(){this.$emit("editingThingEvent",!1),this.editingThingClass="",this.edit=!1;for(var e=this.value.length-1;e>=0;e--)(null===this.value[e]||null!==this.value[e]["@value"]&&void 0!==this.value[e]["@value"]&&0===this.value[e]["@value"].length||0===this.value[e].length)&&this.value.splice(e,1);this.save()},startEditing:function(){this.edit=!0,this.editingThingClass="editing",this.$emit("editingThingEvent",!0)},showModal:function(e,t){var r=this,a={};"remove"===e&&(a={type:e,title:"Remove property",text:"Remove this property?",onConfirm:function(){return r.remove(t)}}),"remove unsaved"===e&&(a={type:e,title:"Remove compentecy",text:"Are you sure you want to remove this property?",onConfirm:function(){return r.remove(t,"unsaved")}}),this.$modal.show(a)},add:function(e){if("search"===e)this.$store.commit("selectingCompetencies",!0),this.$store.commit("selectedCompetency",this.thing),this.property?this.$store.commit("selectCompetencyRelation",this.property):this.$store.commit("selectCompetencyRelation",this.expandedProperty),this.iframePath=this.profile[this.expandedProperty]["iframePath"];else if(this.profile[this.expandedProperty]&&this.profile[this.expandedProperty]["add"]){var t=this.profile[this.expandedProperty]["add"];"unsaved"===t?this.unsaved.push(""):t(this.thing.shortId())}else if(-1!==e.toLowerCase().indexOf("langstring"))this.$parent.add(this.property,{"@language":"","@value":""}),this.langString=!0;else if(-1!==e.toLowerCase().indexOf("string")||-1!==e.toLowerCase().indexOf("url")||-1!==e.toLowerCase().indexOf("text"))this.$parent.add(this.property,"");else{var r=new EcRemoteLinkedData;r.context=this.context,r.type=e.split("/").pop(),this.$parent.add(this.property,r)}},remove:function(e,t){if(t)this.unsaved.splice(e,1);else if(this.profile&&this.profile[this.expandedProperty]&&this.profile[this.expandedProperty]["remove"]){var r=this.profile[this.expandedProperty]["remove"],a=EcObject.isObject(this.value[e])?this.value[e].shortId():this.value[e];r(this.thing.shortId(),a)}else this.$parent.remove(this.property,e)},update:function(e,t){this.$parent.update(this.property,t,e)},isText:function(e){if(null==e||void 0===e)return null;if(null!=e["@value"]&&void 0!==e["@value"])return!0;if(void 0!==e["@type"]&&null!==e["@type"]){if(-1!==e["@type"][0].toLowerCase().indexOf("text"))return!0;if(-1!==e["@type"][0].toLowerCase().indexOf("url"))return!0;if(-1!==e["@type"][0].toLowerCase().indexOf("string"))return!0}return null!=e["@id"]&&void 0!==e["@id"]},isLink:function(e){if(1===EcObject.keys(e).length){if(null!=e["@id"]&&void 0!==e["@id"])return!0;if(e["@value"]&&-1!==e["@value"].indexOf("http"))return!0}return!1},save:function(){if(this.profile&&this.profile[this.expandedProperty]&&this.profile[this.expandedProperty]["save"]){var e=this.profile[this.expandedProperty]["save"];e(this.thing,this.unsaved),this.unsaved.splice(0,this.unsaved.length)}else this.$parent.save()},isObject:function(e){return EcObject.isObject(e)},removeIframe:function(e){e.data&&"selected"!==e.data.message||(this.iframePath=null)}},watch:{canEdit:function(){!1===this.canEdit&&(this.edit=!1)},checked:{deep:!0,handler:function(){var e=this.$parent;while(null==e.select)e=e.$parent;for(var t in this.checked)e.select(t,this.checked[t])}}}},g=f,w=Object(h["a"])(g,o,i,!1,null,null,null),v=w.exports,y={name:"Thing",props:{obj:Object,children:Number,expandedObj:Object,uri:String,clickToLoad:Boolean,parentNotEditable:Boolean,profile:Object,exportOptions:Array,highlightList:Array,selectMode:Boolean,iframePath:String,iframeText:String,childrenExpanded:{type:Boolean,default:!0}},components:{Property:v},data:function(){return{thingState:"",editingClass:"",actionOptions:[{name:"edit",value:this.canEdit,action:""}],hoverClass:"",thing:null,expandedThing:null,showAlways:!0,showPossible:!0,rawSchema:null,keyMap:{},confirmDialog:!1,confirmText:null,confirmAction:null,uriAndNameOnly:!1,name:null,searching:!1}},created:function(){!1===this.clickToLoad&&this.load(),window.addEventListener("message",this.removeIframe,!1)},mounted:function(){this.uri&&this.$store.state.editor&&this.resolveNameFromUrl(this.uri)},computed:{minimizeButtonClass:function(){return!0===this.showAlways&&!1===this.showPossible?"is-text has-text-info ":"is-text has-text-dark"},allPropertiesButtonClass:function(){return!1===this.showAlways&&null===this.showPossible?"is-info has-text-white ":"is-text has-text-dark"},globalButtonClass:function(){return!1===this.showAlways&&!0===this.showPossible?"is-info has-text-white ":"is-text has-text-dark"},type:function(){return null==this.expandedThing?null:this.expandedThing["@type"][0]},shortType:function(){return null==this.expandedThing?null:this.expandedThing["@type"][0].split("/").pop()},context:function(){var e=this.type.split("/");return e.pop(),e.join("/")},canEdit:function(){return!0!==this.parentNotEditable&&(!!this.thing&&this.thing.canEditAny(EcIdentityManager.getMyPks()))},schema:function(){var e=this.rawSchema,t={};if(null!==e&&void 0!==e)for(var r=0;r<e.length;r++){var a=e[r];t[a["@id"]]=a}return t},alwaysProperties:function(){var e={};if(this.profile&&this.profile["alwaysProperties"]){for(var t=0;t<this.profile["alwaysProperties"].length;t++){var r=this.profile["alwaysProperties"][t];e[r]=this.profile[r]}return e}var a=["http://schema.org/name","http://schema.org/description","http://purl.org/dc/terms/title","http://purl.org/dc/terms/description","http://www.w3.org/2004/02/skos/core#prefLabel","http://www.w3.org/2004/02/skos/core#definition"];for(t=0;t<a.length;t++){r=a[t];(null==this.profile||null!=this.profile&&void 0!==this.profile[r])&&null!=this.schema[r]&&null!=this.expandedThing[r]&&0!==this.expandedThing[r].length&&(null!=this.profile?e[r]=this.profile[r]:e[r]=this.schema[r])}return e},viewProperties:function(){var e={};for(var t in this.alwaysProperties)e[t]=this.alwaysProperties[t];for(var t in this.expandedThing)"constructor"!==t&&"@id"!==t&&"@type"!==t&&"@context"!==t&&(t.endsWith("@owner")||t.endsWith("@reader")||t.endsWith("@signature")||null!=this.profile&&void 0===this.profile[t]||null!=this.expandedThing[t]&&0!==this.expandedThing[t].length&&(null==this.profile?null==this.schema[t]||void 0===this.schema[t]?e[t]=this.$store.state.lode.schemaFallback[t]:e[t]=this.schema[t]:e[t]=this.profile[t]));if(this.profile)for(var t in this.profile)if(this.profile[t]["valuesIndexed"]){var r=this.profile[t]["valuesIndexed"];r=r(),r&&r[this.thing.shortId()]&&(e[t]=this.profile[t])}else this.expandedThing[t]&&(e[t]=this.profile[t]);return e},possibleProperties:function(){var e={};for(var t in this.viewProperties)e[t]=this.viewProperties[t];if(null!=this.profile)for(var t in this.profile)"alwaysProperties"!==t&&(e[t]=this.profile[t]);else for(var t in this.schema)"constructor"!==t&&"@id"!==t&&"@type"!==t&&"@context"!==t&&(t.endsWith("@owner")||t.endsWith("@reader")||t.endsWith("@signature")||null!=this.profile&&void 0===this.profile[t]||void 0===this.schema[t]["@type"]&&void 0===this.schema[t]["http://schema.org/domainIncludes"]||null!=this.schema[t]["@type"]&&-1===this.schema[t]["@type"][0].indexOf("Property")||(null==this.schema[t]||void 0===this.schema[t]?e[t]=this.$store.state.lode.schemaFallback[t]:e[t]=this.schema[t]));return e},iconClass:function(){return"fas fa-"+this.shortType.toLowerCase()},highlighted:function(){if(this.highlightList)for(var e=0;e<this.highlightList.length;e++)if(this.thing.shortId()===this.highlightList[e]||this.thing.id===this.highlightList[e])return!0;return!1}},methods:{handleEditingEvent:function(e){e?(this.editingClass="editing-competency",this.thingState="editing",this.$emit("editingThing",!0)):(this.thingState="display",this.editingClass="",this.$emit("editingThing",!1))},showEnteredProperties:function(){console.log("showing entered properties"),this.showAlways=!1,this.showPossible=null},showGlobal:function(){this.showAlways=!1,this.showPossible=!0},emitExpandEvent:function(e){console.log("expand",e.target),this.$emit("expandEvent")},handleMouseOverThing:function(){this.hoverClass="showHoverItems"},handleMouseOutThing:function(){this.hoverClass=""},showModal:function(e){var t=this,r={};"deleteObject"===e&&(r={type:e,title:"Delete competency",text:'Warning! This action deletes the competency in its entirety.  If you just want to remove the competency from the framework, use the "remove" function',onConfirm:function(){return t.deleteObject()}}),"removeObject"===e&&(r={type:e,title:"Remove competency",text:"Removing a competency safely removes it from your framework without removing it from the system.",onConfirm:function(){return t.removeObject()}}),"export"===e&&(console.log("options",Object(s["a"])(this.exportOptions)),r={type:e,selectedExportOption:"",title:"Export Competency",exportOptions:this.exportOptions,text:"Select a file format to export your competency. Files download locally.",onConfirm:function(e){return t.exportObject(e)}}),this.$modal.show(r)},load:function(){var e=this;if(e.clickToLoad=!1,null!=this.uri)EcRepository.get(this.uri,(function(t){if(EcObject.isObject(t)){var r=e.getAllTypes(t);null!=t.context&&void 0!==t.context&&r.push(t.context),(new EcAsyncHelper).each(r,(function(t,r){e.loadSchema(r,t)}),(function(){e.thing=e.deserialize(t),e.expand((function(){e.rawSchema=e.$store.state.lode.schemata[e.type]}))}))}else e.resolveNameFromUrl(e.uri),e.uriAndNameOnly=!0}),(function(){e.resolveNameFromUrl(e.uri),e.uriAndNameOnly=!0}));else if(null!=this.expandedObj)null!=this.obj&&(this.thing=this.obj),this.loadSchema((function(){e.expandedThing=e.expandedObj,e.rawSchema=e.$store.state.lode.schemata[e.type]}),this.expandedObj["@type"][0]);else{var t=e.getAllTypes(this.obj);null!=this.obj.context&&void 0!==this.obj.context&&t.push(this.obj.context),(new EcAsyncHelper).each(t,(function(t,r){e.loadSchema(r,t)}),(function(){e.thing=e.deserialize(e.obj),e.expand((function(){e.rawSchema=e.$store.state.lode.schemata[e.type]}))}))}},reactify:function(e){var t=null,r=e.context;-1!==r.indexOf("skos")&&(r="https://schema.cassproject.org/0.4/skos/"),null!=e.type&&(t=this.$store.state.lode.schemata[r+(r.endsWith("/")?"":"/")+e.type]),null!=e["@type"]&&(t=this.$store.state.lode.schemata[e["@context"]+(e["@context"].endsWith("/")?"":"/")+e["@type"]]),null!=t&&jsonld.compact(t,this.$store.state.lode.rawSchemata[r]["@context"],(function(t,r){if(t)console.log(t);else for(var a=0;a<r["@graph"].length;a++){var n=r["@graph"][a]["@id"];void 0===r["@graph"][a]["@type"]&&void 0===r["@graph"][a]["http://schema.org/domainIncludes"]||(null!=r["@graph"][a]["@type"]&&-1===r["@graph"][a]["@type"][0].indexOf("Property")&&-1===r["@graph"][a]["@type"].indexOf("Property")||(null==e[n]?e[n]=[]:EcArray.isArray(e[n])||(e[n]=[e[n]])))}}))},deserialize:function(e){if(EcArray.isArray(e))for(var t=0;t<e.length;t++)e[t]=this.deserialize(e[t]);if(EcObject.isObject(e)){if(null!=e["@language"])return e;if(null!=e["@value"])return e;for(var r in e)e[r]=this.deserialize(e[r]);if(null!=e.type){var a=new EcRemoteLinkedData;a.copyFrom(e),e=a}if(null!=e["@type"]){a=new EcRemoteLinkedData;a.copyFrom(e),e=a}this.reactify(e)}return e},expand:function(e){var t=this,r=JSON.parse(this.thing.toJson());null!=r["@context"]&&r["@context"].startsWith("http://")&&(r["@context"]=r["@context"].replace("http://","https://")),null!=r["@context"]&&-1!==r["@context"].indexOf("skos")&&(r["@context"]="https://schema.cassproject.org/0.4/skos/"),jsonld.expand(r,(function(r,a){null==r?(t.expandedThing=a[0],t.loadSchema(e)):console.error(r)}))},loadSchema:function(e,t){var r=this;if(null==t&&(t=this.type),"http://schema.org/"!==t)if(-1!==t.indexOf("ConceptScheme")?t="https://schema.cassproject.org/0.4/skos/ConceptScheme":-1!==t.indexOf("Concept")?t="https://schema.cassproject.org/0.4/skos/Concept":-1!==t.indexOf("skos")&&(t="https://schema.cassproject.org/0.4/skos/"),void 0===this.$store.state.lode.schemata[t]){var a=t;a+=-1!==t.indexOf("schema.org")?".jsonld":"",EcRemote.getExpectingObject("",a,(function(a){r.$store.commit("rawSchemata",{id:t,obj:a}),jsonld.expand(a,(function(a,n){null==a?(r.$store.commit("schemata",{id:t,obj:n}),null!=e&&e()):console.error(a)}))}),console.error)}else null!=e&&e();else e()},add:function(e,t){var r=this;(new EcAsyncHelper).each(r.getAllTypes(t),(function(e,t){r.loadSchema(t,e)}),(function(){void 0!==r.thing[e]&&null!=r.thing[e]||(r.thing[e]=[]),EcArray.isArray(r.thing[e])||(r.thing[e]=[r.thing[e]]),r.thing[e].push(r.deserialize(t)),r.expand()}))},remove:function(e,t){EcArray.isArray(this.thing[e])||(this.thing[e]=[this.thing[e]]),this.thing[e].splice(t,1),this.save(),this.expand()},update:function(e,t,r){null==t?this.thing[e]=r:this.thing[e][t]=r,this.expand()},save:function(){var e=this;while(null==e.thing.id||void 0===e.thing.id)if(e=e.$parent.$parent,null==e.thing)return"Could not save.";repo.saveTo(this.stripEmptyArrays(e.thing),console.log,console.error)},stripEmptyArrays:function(e){if(EcArray.isArray(e)){if(0===e.length)return null;for(var t=0;t<e.length;t++)e[t]=this.stripEmptyArrays(e[t]),null==e[t]&&e.splice(t--,1)}else if(EcObject.isObject(e))for(var r in e){var a=this.stripEmptyArrays(e[r]);null==a&&delete e[r]}return e},getAllTypes:function(e,t){var r=[];if(null!=e&&null!=e.context&&(t=e.context),EcArray.isArray(e))for(var a=0;a<e.length;a++)r=r.concat(this.getAllTypes(e[a],t));else if(EcObject.isObject(e))for(var n in null!=e.type&&(null==e.context&&(e.context=t),r.push(e.context+(e.context.endsWith("/")?"":"/")+e.type)),null!=e["@type"]&&(null==e["@context"]&&(e["@context"]=t),r.push(e["@context"]+(e["@context"].endsWith("/")?"":"/")+e["@type"])),e)r=r.concat(this.getAllTypes(e[n],t));return r},getThingKeyFromExpandedKey:function(e){if("http://purl.org/dc/terms/type"===e)return this.keyMap[e]="dcterms:type","dcterms:type";if("http://schema.org/name"===e)return this.keyMap[e]="name","name";if("http://schema.org/description"===e)return this.keyMap[e]="description","description";if("broadens"===e)return this.keyMap[e]="Broadens","Broadens";if(0===e.indexOf("@"))return this.keyMap[e]=e.substring(1),e.substring(1);if(void 0!==this.thing[e])return this.keyMap[e]=e,e;if(this.profile&&this.profile[e]&&this.profile[e]["thingKey"])return this.keyMap[e]=this.profile[e]["thingKey"],this.profile[e]["thingKey"];for(var t in this.thing)if(-1!==t.indexOf(":")){var r=t.split(":"),a=this.thing.context;if(-1!==this.thing.context.indexOf("skos")&&(a="https://schema.cassproject.org/0.4/skos/"),void 0===this.$store.state.lode.rawSchemata[a]&&console.warn("Could not locate schema: "+a),r=this.$store.state.lode.rawSchemata[a]["@context"][r[0]]+r[1],e===r)return this.keyMap[e]=t,t}return void 0!==this.thing[e.split("/").pop()]?(this.keyMap[e]=e.split("/").pop(),e.split("/").pop()):void 0!==this.thing[e.split("#").pop()]?(this.keyMap[e]=e.split("#").pop(),e.split("#").pop()):null},getKeyFromMap:function(e){return this.keyMap[e]?this.keyMap[e]:this.getThingKeyFromExpandedKey(e)},deleteObject:function(){var e=this.$parent;while(null==e.deleteObject)e=e.$parent;e.deleteObject(this.thing),this.confirmDialog=!1},removeObject:function(){var e=this.$parent;while(null==e.removeObject)e=e.$parent;e.removeObject(this.thing)},exportObject:function(e){var t=this.$parent;while(null==t.exportObject)t=t.$parent;t.exportObject(this.thing,e)},resolveNameFromUrl:function(e){var t=this;this.get(e,null,null,(function(e){var r=null;if(e&&(e=JSON.parse(e),e["ceterms:name"]?r=e["ceterms:name"]:e["name"]?r=e["name"]:e["schema:name"]?r=e["schema:name"]:e["title"]?r=e["title"]:e["skos:prefLabel"]?r=e["skos:prefLabel"]:e["title"]?r=e["title"]:e["@graph"]&&e["@graph"][0]&&(e["@graph"][0]["ceterms:name"]?r=e["@graph"][0]["ceterms:name"]:e["@graph"][0]["name"]?r=e["@graph"][0]["name"]:e["@graph"][0]["schema:name"]?r=e["@graph"][0]["schema:name"]:e["@graph"][0]["title"]?r=e["@graph"][0]["title"]:e["@graph"][0]["skos:prefLabel"]&&(r=e["@graph"][0]["skos:prefLabel"])),r=Thing.getDisplayStringFrom(r),EcObject.isObject(r))){var a=Object.keys(r);r=r[a[0]]}t.name=r}),(function(e){console.log(e)}))},get:function(e,t,r,a,n){var s=EcRemote.urlAppend(e,t);s=EcRemote.upgradeHttpToHttps(s);var o=null;if("undefined"===typeof httpStatus){if(o=new XMLHttpRequest,o.open("GET",s,EcRemote.async),null!=r)for(var i=EcObject.keys(r),c=0;c<i.length;c++)o.setRequestHeader(i[c],r[i[c]]);var l=o;o.onreadystatechange=function(){4===l.readyState&&200===l.status&&(null!=a?a(l.responseText):4===l.readyState&&null!=n&&n(l.responseText))}}null!=o&&EcRemote.async&&(o["timeout"]=EcRemote.timeout),"undefined"!==typeof httpStatus?null!=a&&a(JSON.stringify(httpGet(s))):o.send()},removeIframe:function(e){e.data&&"selected"!==e.data.message||(this.searching=!1)},searchIframe:function(){this.searching=!0,"Competency"===this.shortType&&this.$store.commit("selectedCompetency",this.thing)},allowEdits:function(e){return(!this.profile||!this.profile[e]||!0!==this.profile[e]["noEditing"])&&this.canEdit}},watch:{thing:{deep:!0,handler:function(){this.expand()}},canEdit:function(){this.showAlways=!0,this.showPossible=!1}}},C=y,k=Object(h["a"])(C,a,n,!1,null,null,null);t["default"]=k.exports},dc82:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal is-small",class:[{"is-active":e.visible},e.modalClass]},[r("div",{staticClass:"modal-background"}),r("div",{staticClass:"modal-card"},[r("header",{staticClass:"modal-card-head",class:e.modalHeaderBackground},[r("p",{staticClass:"subtitle is-size-3 modal-card-title",class:e.modalHeaderFontColor},[e._v("\n                "+e._s(e.title)+"\n\n                "),r("button",{staticClass:"delete is-pulled-right",attrs:{"aria-label":"close"},on:{click:function(t){return e.cancel()}}})])]),r("div",{staticClass:"modal-card-body has-text-dark"},[e._v("\n            "+e._s(e.text)+"\n        ")]),"export"===e.type?r("section",{staticClass:"modal-card-body has-text-dark"},["export"===e.type?r("div",{staticClass:"field"},[r("div",{staticClass:"control"},[r("div",{staticClass:"select is-primary is-fullwidth"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedExportOption,expression:"selectedExportOption"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedExportOption=t.target.multiple?r:r[0]}}},[r("option",{attrs:{selected:"",value:""}},[e._v("\n                                Select an option\n                            ")]),e._l(e.exportOptions,(function(t,a){return r("option",{key:a,domProps:{value:t.value}},[e._v("\n                                "+e._s(t.name)+"\n                            ")])}))],2)])])]):e._e()]):e.options?r("section",{staticClass:"modal-card-body has-text-dark"},[r("div",{staticClass:"field"},[r("div",{staticClass:"control"},[r("div",{staticClass:"select is-primary is-fullwidth"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedOption,expression:"selectedOption"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedOption=t.target.multiple?r:r[0]}}},[r("option",{attrs:{selected:"",disabled:"",value:""}},[e._v("\n                                Select an option\n                            ")]),e._l(e.options,(function(t,a){return r("option",{key:a,domProps:{value:t}},[e._v("\n                                "+e._s(t)+"\n                            ")])}))],2)])])]),"Choose another name"===e.selectedOption?r("input",{directives:[{name:"model",rawName:"v-model",value:e.newName,expression:"newName"}],staticClass:"input",attrs:{placeholder:"Enter a new name"},domProps:{value:e.newName},on:{input:function(t){t.target.composing||(e.newName=t.target.value)}}}):e._e(),e.invalid?r("div",[e._v("\n                The name you chose is already in the system. Please try a different name.\n            ")]):e._e()]):e._e(),r("footer",{staticClass:"modal-card-foot has-background-white"},[r("div",{staticClass:"buttons is-right",staticStyle:{width:"100%"}},[r("button",{staticClass:"button is-light",on:{click:function(t){return e.cancel()}}},[r("span",[e._v("\n                        Cancel\n                    ")]),e._m(0)]),"export"===e.type?r("button",{staticClass:"button is-info",on:{click:e.confirm}},[r("span",[e._v("\n                        Export file\n                    ")]),e._m(1)]):r("button",{staticClass:"button",class:e.modalConfirmButton,on:{click:e.confirm}},[r("span",[e._v("\n                        Confirm\n                    ")]),r("span",{staticClass:"icon",class:e.modalButtonIcons},[r("i",{staticClass:"fa fa-check-circle"})])])])])])])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-times-circle"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"icon"},[r("i",{staticClass:"fa fa-download"})])}],s=(r("386d"),r("f057")),o={name:"CassModal",props:{},data:function(){return{selectedExportOption:{},visible:!1,exportOptions:[],title:"",type:"",text:"",onConfirm:{},options:[],selectedOption:"",onCancel:{},newName:"",currentName:"",invalid:!1,repo:window.repo}},computed:{modalButtonIcons:function(){var e="";return e="removeObject"===this.type?"has-text-white":(this.type,"has-text-white"),e},modalClass:function(){var e="";return e="removeObject"===this.type?"alert-modal":"deleteObject"===this.type?"warning-modal":"info-modal",e},modalHeaderFontColor:function(){var e="";return e="removeObject"===this.type?"has-text-warning":"deleteObject"===this.type?"has-text-danger":"has-text-dark",e},modalConfirmButton:function(){var e="";return e="removeObject"===this.type?"is-warning has-text-white":"deleteObject"===this.type?"is-danger has-text-white":"is-info has-text-white",e},modalHeaderBackground:function(){var e="";return e="removeObject"===this.type?"has-background-light":(this.type,"has-background-light"),e}},methods:{hide:function(){this.visible=!1,this.selectedOption="",this.newName="",this.currentName="",this.invalid=!1},confirm:function(){var e=this;if("function"===typeof this.onConfirm)if("export"===this.type)this.onConfirm(this.selectedExportOption),this.hide();else if(this.newName)if(this.newName===this.currentName)this.invalid=!0;else{var t=new UUID(3,"nil",this.newName).format(),r=new EcFramework;r.assignId(this.repo.selectedServer,t),this.repo.search('(@id:"'+r.shortId()+'") AND (@type:Framework)',(function(){}),(function(t){t.length>0?e.invalid=!0:(e.onConfirm(e.newName),e.hide())}),(function(t){console.error(t),e.hide()}))}else this.options&&"duplicate"!==this.type?(this.onConfirm(this.selectedOption),this.hide()):(this.onConfirm(),this.hide());else this.hide()},cancel:function(){"function"===typeof this.onCancel?(this.onCancel(),this.hide()):this.hide()},show:function(e){this.type=e.type,this.visible=!0,this.selectedExportOption=e.selectedExportOption,this.title=e.title,this.text=e.text,this.exportOptions=e.exportOptions,this.options=e.options,this.onConfirm=e.onConfirm,this.onCancel=e.onCancel,this.currentName=e.currentName},setSelectedExportOption:function(e){alert(e.target),this.selectedExportOption=e.target.value}},beforeMount:function(){var e=this;s["a"].EventBus.$on("show",(function(t){e.show(t)}))}},i=o,c=(r("8614"),r("2877")),l=Object(c["a"])(i,a,n,!1,null,null,null);t["a"]=l.exports},df03:function(e,t,r){e.exports=r.p+"0321225f27b00198644e4f71df10550d.csv"},e516:function(e,t,r){"use strict";var a=r("0164"),n=r.n(a);n.a},e817:function(e,t,r){e.exports=r.p+"a2fea717c220832ae6941c02dabf207a.csv"},efb1:function(e,t,r){e.exports=r.p+"33a816cd2442bbc68601fdf6aae14d66.csv"},f057:function(e,t,r){"use strict";var a=r("dc82"),n={install:function(e,t){this.EventBus=new e,e.component("cass-modal",a["a"]),e.prototype.$modal={show:function(e){n.EventBus.$emit("show",e)}}}};t["a"]=n}});
//# sourceMappingURL=app.7d82ac46.js.map